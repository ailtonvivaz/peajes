var gx=function(c){var f=/^(?:gx\.O\.)(.+)$/,e=/^(?:.+)?\((?:gx\.O\.)([a-zA-Z0-9_]+)(?:,)?(?:.*)\)$/,b=function(){return!1};return{$:c.noConflict(),O:null,pO:null,oldValues:[],oldKeyValues:[],newRows:[],suggestControls:[],disabledControls:[],usrPtys:[],usrFocusControl:"",currentRows:[],attachedControls:[],languageCode:"eng",dateFormat:"MDY",timeFormat:12,blankWhenEmpty:!1,centuryFirstYear:40,decimalPoint:".",thousandSeparator:",",staticDirectory:"/",basePath:"",theme:"",datepickerImage:null,clientImages:{},
blankImage:null,ascImage:null,descImage:null,expandImage:null,collapseImage:null,downloadImage:null,indicatorImage:null,resizeImage:null,msg:{},NULL_TIMEZONEOFFSET:0,emptyFn:function(){},falseFn:b,trueFn:function(){return!0},define:function(a,d,g){for(var b=0,c=window||this,a=a.split("."),e=a.length,b=0;b<e-1;b++)"undefined"==typeof c[a[b]]&&(c[a[b]]={}),c=c[a[b]];c[a[e-1]]=g;d||(c[a[e-1]].prototype=new gx.GxObject)},setParentObj:function(a){gx.pO=a;gx.O=gx.pO;gx.AjaxSecurity=gx.pO.AjaxSecurity;gx.OnSessionTimeout=
gx.pO.OnSessionTimeout},createParentObj:function(a){var d;gx.spa.started||(a instanceof gx.GxObject||(d=new a),d&&this.setParentObj(d));return d},setExecutableComponent:function(a){gx.fx.obs.addObserver("gx.onready",this,function(){null==gx.pO&&gx.setParentObj(gx.createComponent(a,""))},{single:!0})},setMasterPage:function(a){null!=gx.pO&&(gx.pO.MasterPage=a)},addComponent:function(a){null!=gx.pO&&gx.pO.setWebComponent(a)},createComponent:function(a,d){var g=null,b,c;b=gx.lang.getType(a);null!=b&&
(b.prototype=new gx.GxObject,c=gx.csv.cmpCtx,gx.csv.cmpCtx=d,g=new b(d),gx.csv.cmpCtx=c);return g},getObj:function(a,d){return""==a?!0==d?gx.pO.MasterPage:gx.pO:gx.pO.getWebComponent(a)},setGxO:function(){var a,d;1==arguments.length&&"object"==typeof arguments[0]?(a=arguments[0].CmpContext,d=arguments[0].IsMasterPage):(a=arguments[0],d=arguments[1]);gx.csv.cmpCtx=a;gx.O=this.getObj(a,d)||gx.pO;return gx.O},setVar:function(a,d){gx.O.setVariable(a,d)},getVar:function(a){return gx.O.getVariable(a)},
prefixVar:function(a){return"gx.O."+a},unprefixVar:function(a){var d=f,d=d.exec(a);null!=d&&d[1]?a=d[1]:(d=e,d=d.exec(a),null!=d&&d[1]&&(a=d[1]));return a},getMessage:function(a){return void 0==gx.msg[a]?a:gx.msg[a]},setLanguageCode:function(a){gx.languageCode=a},setDateFormat:function(a){gx.dateFormat=a},setTimeFormat:function(a){gx.timeFormat=a},setCenturyFirstYear:function(a){gx.centuryFirstYear=a},setBlankWhenEmptyDate:function(a){gx.blankWhenEmpty=a},setDecimalPoint:function(a){gx.decimalPoint=
a},setThousandSeparator:function(a){gx.thousandSeparator=a},setStaticDirectory:function(a){gx.staticDirectory=a;if(""==gx.staticDirectory)gx.staticDirectory="/";else{var d=gx.staticDirectory.length,a="/"!=gx.staticDirectory.charAt(0),d="/"!=gx.staticDirectory.charAt(d-1);gx.staticDirectory=(a?"/":"")+gx.staticDirectory+(d?"/":"")}},updateTheme:function(){var a=gx.fn.getHidden("GX_THEME");if(a&&a!=this.theme&&(this.theme=a,a=gx.dom.byId("gxtheme_css_reference")))a.href=a.href.replace(/[^/]*.css/,this.theme+
".css")},setTheme:function(a){var d=gx.util.browser,g=d.isIE(),d=d.ieVersion(),b=gx.dom.fixes;this.theme=gx.fn.getHidden("GX_THEME");this.theme||(this.theme="");try{gx.HTML5&&b.html5(a);if(void 0===a){g&&(c(document.documentElement).addClass("ie"),c(document.documentElement).addClass("ie"+d));if(g&&10==d){var e=document.createElement("style");e.innerHTML="input::-ms-clear {display: none;}";document.body.appendChild(e)}b.popupMinWidth()}b.fixTableResets(a)}catch(f){gx.dbg.logEx(f,"gxapi.js","setTheme")}},
SetOld:function(a,d,g){var b=d,a=gx.fn.controlGridId(a);0<a&&(b=d+"_"+gx.fn.currentGridRow(a));gx.fn.setHidden(b,gx.getVar(g))},Old:function(a,d){try{var g=d,b=gx.fn.controlGridId(a);0<b&&(g=d+"_"+gx.fn.currentGridRow(b));var c=gx.fn.getHidden(g);"undefined"==typeof c&&""!=gx.O.CmpContext&&(c=gx.fn.getHidden(gx.O.CmpContext+g));return c}catch(e){gx.dbg.logEx(e,"gxapi.js","Old")}return""},OldInteger:function(a,d){var g=parseInt(gx.Old(a,d),10);return isNaN(g)?0:g},OldDecimal:function(a,d){var g=gx.num.parseFloat(gx.Old(a,
d),gx.thousandSeparator,gx.decimalPoint);return isNaN(g)?0:g},OldDate:function(a,d){return(new gx.date.gxdate(gx.Old(a,d),"Y4MD")).getStringWithFmt(gx.dateFormat)},OldDateTime:function(a,d){var g=new gx.date.gxdate(gx.Old(a,d),"Y4MD");return g.getStringWithFmt(gx.dateFormat)+" "+g.getTimeString(!0,!0)},typedOld:function(a,d,g){switch(g){case "int":return this.OldInteger(a,d);case "decimal":return this.OldDecimal(a,d,!0);case "date":return this.OldDate(a,d);case "dtime":return this.OldDateTime(a,d);
default:return this.Old(a,d)}},types:{numeric:0,character:1,date:2,dateTime:3,blob:4,varChar:5,longVarChar:6,bool:7,geolocation:8},domains:{url:"Url",email:"Email",phone:"Phone",address:"Address",geolocation:"Geolocation",component:"Component",feed:"Feed"},gen:{net:!1,isDotNet:function(){return this.net},isRuby:b,isJava:function(){return!this.net}},dom:{_form:null,_avoidLeaksDiv:null,id:function(a){return void 0==a.id||""==a.id?a.name:a.id},byId:function(a,d){d=d||document;return d.getElementById(a)},
byName:function(a){return document.getElementsByName(a)},byTag:function(a,d){d=d||document;return d.getElementsByTagName(a)},byClass:function(a,d,g){return c((d||"")+"."+a,g).toArray()},el:function(a){if(a){if("object"==typeof a&&a.tagName)return a;var d=this.byId(a);if(null!=d)return d;d=this.byId("span_"+a);if(null!=d)return d;d=this.byName(a);return null!=d&&0<d.length?d[0]:null}return null},hasAttribute:function(a,d){return a.hasAttribute?a.hasAttribute(d):void 0!==a[d]},hasClass:function(a,d){var g=
gx.dom.el(a);if(g)return d&&-1!=(" "+g.className+" ").indexOf(" "+d+" ")},addPrefixClass:function(a,d){if(a){var g=c(a);a.className&&!g.attr("data-gx-unprefixed-class")&&(g.attr("data-gx-unprefixed-class",a.className),g=a.className.split(" "),g.splice(0,0,""),a.className+=g.join(" "+d))}},removePrefixClass:function(a,d){if(a){var g=c(a);if(0<=a.className.search(RegExp("(^|\\s)"+d))){var b=g.attr("data-gx-unprefixed-class");g.removeAttr("data-gx-unprefixed-class");a.className=b||a.className.substring(d.length)}}},
addClass:function(a,d){var g=gx.dom.el(a);g&&(d&&!this.hasClass(a,d))&&(g.className=g.className+" "+d)},classReCache:{},removeClass:function(a,d){var g=gx.dom.el(a);if(g&&this.hasClass(a,d)){var b=this.classReCache[d];b||(b=RegExp("(?:^|\\s+)"+d+"(?:\\s+|$)","g"),this.classReCache[d]=b);g.className=g.className.replace(b," ")}},hasTransition:function(a){if(a&&Modernizr.csstransitions){var d=gx.util.browser,g="transitionDuration";d.isIE()&&(g="msTransitionDuration");d.isWebkit()?g="webkitTransitionDuration":
d.isFirefox()?g="MozTransitionDuration":d.isOpera()&&(g="OTransitionDuration");a=parseFloat(gx.dom.getComputedStyle(a)[g],10);return 0!==a&&!isNaN(a)}return!1},hasAnimation:function(a){if(a&&Modernizr.csstransitions){var d=gx.util.browser,g="animationName";d.isIE()&&(g="msAnimationName");d.isWebkit()?g="webkitAnimationName":d.isFirefox()?g="MozAnimationName":d.isOpera()&&(g="OAnimationName");return gx.dom.getComputedStyle(a)[g]&&"none"!=gx.dom.getComputedStyle(a)[g]}return!1},isMultimediaElement:function(a){return"SPAN"==
a.tagName&&(gx.dom.hasClass(a,"gx-video-placeholder")||gx.dom.hasClass(a,"gx-audio-placeholder"))},purgeElement:function(a,d){var g=d||a.attributes,b,c,e;if(g){c=g.length;for(b=0;b<c;b+=1)e=g[b].name||g[b],"function"===typeof a[e]&&(a[e]=null)}},purge:function(a,d){d||this.purgeElement(a);var g=a.childNodes;if(g)for(var b=0,c=g.length;b<c;b++)gx.dom.purge(g[b],!1)},shouldPurge:function(){return gx.purgeElements&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()},form:function(){null==this._form&&
(this._form=document.forms.MAINFORM,this._form||(this._form=document.forms[0]));return this._form},indexElements:function(){if(!document.all)for(var a=this.form().elements,d=a.length,g=0;g<d;g++)a[g].gxIndex=g},setAttribute:function(a,d,g){var b=function(){try{var b=gx.dom.byName(a);if(null!=b&&0<b.length)for(var n=b.length,c=0;c<n;c++)b[c].setAttribute(d,g);else c=gx.dom.byId(a),null!=c&&c.setAttribute(d,g)}catch(e){gx.dbg.logEx(e,"gxapi.js","setAttribute")}};"loading"==document.gxReadyState?gx.fx.obs.addObserver("gx.onload",
this,b,{single:!0}):b.apply(this)},createInput:function(a,d){var g=document.createElement("input");g.type=d;g.id=a;g.name=a;gx.dom.form().appendChild(g);return g},hasSelectedFile:function(){var a=c('input[type="file"]'),d=a.length;if(!d)return!1;for(var g=0;g<d;g++)if(!gx.lang.emptyObject(a[g].value))return!0;return!1},hasSubmitControl:function(){var a=this.byTag("input"),d=a.length;if(!d)return!1;for(var g=0;g<d;g++){var b=a[g].getAttribute("type");if("submit"==b||"image"==b)return!0}return!1},scripts:function(){var a=
document.scripts;a||(a=document.getElementsByTagName("script"));if("undefined"!=typeof a){for(var d=[],g=a.length,b=0;b<g;b++){var c=a[b].attributes.src;c&&c.value&&(c=c.value,"//:"!=c&&d.push(c))}return d}return[]},styles:function(){var a=document.styleSheets;if("undefined"!=typeof a){for(var d=[],g=a.length,b=0;b<g;b++){var c=a[b].href;gx.lang.emptyObject(c)||d.push(c)}return d}return[]},getComputedStyle:function(a){try{return a==document?null:"function"==typeof window.getComputedStyle?window.getComputedStyle(a):
"undefined"!=typeof a.currentStyle?a.currentStyle:a.style}catch(d){return gx.dbg.logEx(d,"gxapi.js","getComputedStyle"),null}},getStyle:function(a,d){var g="";try{var g="function"==typeof window.getComputedStyle?window.getComputedStyle(a,null)[d]:"undefined"!=typeof a.currentStyle?a.currentStyle[d]:a.style[d],b=parseInt(g);isNaN(b)||(g=b)}catch(c){gx.dbg.logEx(c,"gxapi.js","getStyle")}return g},CSS_URL_REGEXP:/url\(["\']?(?!(?:https?:|\/))([^"\)]+)["\']?\)/ig,CSS_BASE_URL_REGEXP:/(.+\/)[^\/]+$/ig,
cssRules:null,cacheStyleSheet:function(a,d){var g,b=a.href?a.href.replace(this.CSS_BASE_URL_REGEXP,"$1"):document.location.href,c;this.cssRules||(this.cssRules=[]);try{if(c=a.cssRules||a.rules)for(var e=0,f=c.length;e<f;e++)g=c[e].cssText,d&&(g=g.replace(this.CSS_URL_REGEXP,'url("'+b+'$1")')),this.cssRules.push(g)}catch(m){}},getCssRules:function(a,d){var g=document.styleSheets;if(null===this.cssRules||a){this.cssRules=[];for(var b=0,c=g.length;b<c;b++)try{g[b].disabled||this.cacheStyleSheet(g[b],
d)}catch(e){}}return this.cssRules},isButton:function(a){return void 0!=a&&null!=a?"submit"==a.type||"button"==a.type:!1},editControls:{text:!0,password:!0,color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,number:!0,search:!0,url:!0,tel:!0},isEditControl:function(a){return a&&"INPUT"==a.tagName?this.editControls[a.type]||!1:!1},isDateControl:function(a){return"date"==a.type||"datetime"==a.type||"datetime-local"==a.type},isButtonLike:function(a){return this.isButton(a)?!0:void 0!=a&&null!=
a?"INPUT"==a.nodeName&&("image"==a.type||"checkbox"==a.type)&&"function"==typeof a.onclick:!1},iFrameDoc:function(a){try{if(a.contentDocument)return a.contentDocument;if(a.contentWindow)return a.contentWindow.document}catch(d){}return null},forEachChild:function(a,d,g){if(a&&a.childNodes&&"function"==typeof g)for(var b=a.childNodes.length,c=0;c<b&&!1!==g.call(d,a.childNodes[c]);c++);},isTextWithLink:function(a){return null!=a&&"A"==a.tagName&&(a.childNodes&&0<a.childNodes.length)&&this.innerChildIsText(a.firstChild)?
!0:!1},isChildNode:function(a,d){a.frameElement&&(a=a.frameElement);if(a==d)return!0;for(;a.parentNode;){if(a==d||a.parentNode==d)return!0;a=a.parentNode}return!1},findParentByTagName:function(a,d,g){a=a.parentNode;d=d.toUpperCase();for(i=0;a&&!(g&&i==g);){i++;if(a.tagName==d)return a;a=a.parentNode}},innerChildIsText:function(a){for(;null!=a;){if(a.nodeName&&"#text"==a.nodeName)return!0;a=a.firstChild}return!1},position:function(a){a=c(a).offset();return{x:Math.floor(a.left),y:Math.floor(a.top)}},
dimensions:function(a){a=c(a);return{w:a.outerWidth(),h:a.outerHeight()}},windowDimensions:function(a){var d=a.documentElement,g=a.body;if(d&&d.scrollHeight){var a=Math.max(d.scrollHeight,g.scrollHeight),b=Math.max(d.scrollWidth,g.scrollWidth),c=Math.max(d.clientHeight,g.clientHeight),d=Math.max(d.clientWidth,g.clientWidth);return{scrollWidth:b,scrollHeight:a,clientHeight:c,clientWidth:d}}return{scrollWidth:g.scrollWidth,scrollHeight:g.scrollHeight,clientHeight:g.clientHeight,clientWidth:g.clientWidth}},
documentScroll:function(a){a=a||document;return{scrollTop:a.documentElement.scrollTop||a.body.scrollTop,scrollLeft:a.documentElement.scrollLeft||a.body.scrollLeft}},autofitIFrame:function(a){var a=gx.evt.source(window.event||a),d=window.frames[a.name].document;if(d&&!(""!=a.width||""!=a.height)){var g=gx.dom.windowDimensions(d),d=g.scrollWidth?g.scrollWidth+10:null,g=g.scrollHeight?g.scrollHeight+10:null;d&&g&&(a.style.width=d+"px",a.style.height=g+"px")}},fitToParent:function(a){if(!gx.util.browser.isIE()&&
a&&a.childNodes){for(var d=null,g=a.childNodes.length,b=0;b<g;b++){var c=a.childNodes[b];if("TABLE"==c.nodeName){d=c;break}}if(null!=d&&(-1!=d.style.width.indexOf("%")&&(a.style.width=gx.dom.addUnits(d.style.width)),-1!=d.style.height.indexOf("%")))a.style.height=gx.dom.addUnits(d.style.height)}},redrawControl:function(a){!gx.util.browser.isIE()||6<=gx.util.browser.ieVersion()?gx.html.setOuterHtml(a,a.outerHTML):setTimeout(function(){gx.html.setOuterHtml(a,a.outerHTML)},100)},setCaretPosition:function(a,
d){if(null!=a)if(a.createTextRange){var g=a.createTextRange();g.move("character",d);g.select()}else a.selectionStart?(a.focus(),a.setSelectionRange(d,d)):a.focus()},replaceAtCaretPosition:function(a,d){var g=a.selectionStart,b=a.selectionEnd;document.selection?(g=document.selection.createRange().getBookmark(),a.selection=a.createTextRange(),a.selection.moveToBookmark(g),a.selectLeft=a.createTextRange(),a.selectLeft.collapse(!0),a.selectLeft.setEndPoint("EndToStart",a.selection),g=a.selectLeft.text.length+
1,b=a.selectLeft.text.length+(0==a.selection.text.length?1:a.selection.text.length)):(g=a.selectionStart,b=a.selectionEnd);a.setRangeText?a.setRangeText(d,g,b):a.value=a.value.substr(0,g)+d+a.value.substr(g,a.value.length);gx.dom.setCaretPosition(a,g)},spanValue:function(a){var d=a.nodeValue;gx.lang.emptyObject(d)&&(d=a.innerText||a.textContent);gx.lang.emptyObject(d)&&(d="");return d},removeControlSafe:function(a){this._avoidLeaksDiv||(this._avoidLeaksDiv=document.createElement("DIV"),this._avoidLeaksDiv.style.display=
"none",document.body.appendChild(this._avoidLeaksDiv));this._avoidLeaksDiv.appendChild(a);gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv);this._avoidLeaksDiv.innerHTML=""},removeControl:function(a){if(null==document.createRange)a.removeNode(!0);else{var d=document.createRange();a&&(d.selectNode(a),d.deleteContents())}},comboBoxToObj:function(a,d){try{var g={s:"",v:[]};if(!a)return g;if("SELECT"==a.tagName){g.s=a.value;for(var b=a.options.length,c=0;c<b;c++){var e="",e="undefined"!=typeof a.options[c].innerText?
a.options[c].innerText:a.options[c].text;g.v.push([a.options[c].value,e])}}else"SPAN"==a.tagName&&"string"==typeof d&&(g.v.push([d,d]),g.s=d);return g}catch(f){gx.dbg.logEx(f,"gxapi.js","comboBoxToObj")}return null},unitPattern:/\d+(px|em|%|en|ex|pt|in|cm|mm|pc|s)$/i,addUnits:function(a,d){return""===a||"auto"==a?a:void 0===a?"":"number"==typeof a||!this.unitPattern.test(a)?a+(d||"px"):a},getActiveElement:function(){var a=null;try{a=document.activeElement}catch(d){}return a},write:function(a,d){d=
d||document;d.write(a)},MASK_CLASS:"gx-mask",UNMASK_CLASS:"gx-unmask",MASK_RELATIVE_CLASS:"gx-masked-relative",MASKED_CLASS:"gx-masked",mask:function(a){a=this.el(a);if(!this.hasClass(a,this.MASK_RELATIVE_CLASS)){var d,g=gx.util.browser,b=6==g.ieVersion()||g.isIE&&g.isCompatMode(),c=!!a.style.setExpression;("body"!=a.tagName||"static"!=this.getComputedStyle(a).position)&&this.addClass(a,this.MASK_RELATIVE_CLASS);d=document.createElement("div");d.className=this.MASK_CLASS;a.appendChild(d);this.addClass(a,
this.MASKED_CLASS);if(b&&c)try{d.style.setExpression("height","this.parentNode."+(a==document.body?"scrollHeight":"offsetHeight")+' + "px"')}catch(e){}else if(g.isIE&&(7!=g.ieVersion||g.isCompatMode())&&"auto"==this.getComputedStyle(a).height)d.style.height=this.getComputedStyle(a).height;return d}},unmask:function(a){for(var a=this.el(a),d,g=0,b=a.childNodes.length;g<b;g++)if("DIV"==a.childNodes[g].tagName&&this.hasClass(a.childNodes[g],this.MASK_CLASS)){d=a.childNodes[g];break}d&&!d.removed?(d.removed=
!0,d.style.clearExpression&&(d.style.clearExpression("width"),d.style.clearExpression("height")),this.removeClass(a,this.MASKED_CLASS),g=gx.dom.hasAnimation(d)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(d)?gx.dom.TRANSITION_END_EVENT:!1,b=function(){a.removeChild(d);gx.dom.removeClass(a,this.MASK_RELATIVE_CLASS)}.closure(this),g?gx.evt.attach(d,g,b,!1,{single:!0,useCapture:!0,timeout:300}):b(),this.addClass(d,this.UNMASK_CLASS)):(this.removeClass(a,this.MASKED_CLASS),this.removeClass(a,this.MASK_RELATIVE_CLASS))},
replaceWithFx:function(a,d,g){var g=g||{},b=g.enteringClass||"entering",c=g.leavingClass||"leaving",e=g.enterDurationClass||"enter-fx-duration",f=g.leaveDurationClass||"leave-fx-duration",m=g.transitioningClass||"transitioning",l=g.transitionTimeout||1500,q=function(a){return(gx.dom.hasAnimation(a)||gx.dom.hasTransition(a))&&!gx.dom.hasClass(a.parentNode,m)},o=function(a){return gx.dom.hasAnimation(a)?gx.dom.ANIMATION_END_EVENT:gx.dom.hasTransition(a)?gx.dom.TRANSITION_END_EVENT:!1};"BODY"==a.tagName&&
(gx.dom.addClass(a,a.className+"-fx"),a.style.position="static");"BODY"==d.tagName&&gx.dom.addClass(d,d.className+"-fx");var p=a.parentNode,r=q(a),s=q(d);useParallelFx="BODY"!=a.tagName;if(r||s){var q=document.createElement("iframe"),u=document.createElement("div"),t,x=this.getComputedStyle(a),A=x.width,x=x.height,y,w,v=o(a),D=o(d),F,E,B,G,H,L=0;gx.dom.addClass(p,m);if("BODY"!=a.tagName&&"BODY"!=d.tagName)if(r){q.setAttribute("scrolling","no");q.setAttribute("frameborder","0");q.style.width=gx.dom.addUnits(window.innerWidth);
q.style.height=gx.dom.addUnits(window.innerHeight);q.style.display="none";u.appendChild(q);u.style.width=A;u.style.height=x;u.style.overflow="hidden";a.insertBefore(u,a.firstChild);o=q.contentDocument;try{o.open(),o.write(this.getDocTypeDeclaration(document)),o.write("<html>"),o.write("<head></head>"),o.write("<body><div></div></body>"),o.write("</html>"),o.close()}catch(z){gx.dbg.logEx(z,"gxapi.js","replaceWithFx"),u=o.createElement("div"),o.body.appendChild(u)}o.body.style.margin="0";o.body.className=
gx.dom.form().className;o.head.appendChild(document.createElement("style"));u=o.styleSheets[0];t=gx.dom.getCssRules(!0,!0);y=0;for(w=t.length;y<w;y++)u.insertRule(t[y],y);o.body.firstChild.style.width=A;for(o.body.firstChild.style.height=x;a.childNodes[1];)o.body.firstChild.appendChild(a.childNodes[1]);q.style.display="block"}else s&&(a.style.display="none");gx.dom.addClass(d,b);gx.dom.addClass(d,e);gx.dom.addClass(a,f);!1!==g.domAdd&&p.appendChild(d);f=function(){B=function(){if(L===2){gx.dom.removeClass(p,
m);if(useParallelFx){g.transitionEndCallback&&(d=g.transitionEndCallback(a,d));g.domRemove!==false&&p.removeChild(a)}gx.dom.removeClass(d,e)}else if(!useParallelFx){g.transitionEndCallback&&(d=g.transitionEndCallback(a,d));gx.dom.removeClass(d,b);s&&(H=setTimeout(E,l))}};if(r){F=function(){clearTimeout(G);L++;g.leavingTransCallback&&g.leavingTransCallback(a,d);B()};gx.evt.attach(a,v,F,false,{single:true,useCapture:true})}else{L++;B()}if(s){E=function(){if(L>=2)gx.evt.detach(d,D,E);else{clearTimeout(H);
L++;g.enteringTransCallback&&g.enteringTransCallback(a,d);B()}};gx.evt.attach(d,D,E,false,{single:true,useCapture:true})}else{L++;B()}setTimeout(function(){gx.dom.addClass(a,c);if(useParallelFx){gx.dom.removeClass(d,b);s&&(H=setTimeout(E,l))}r&&(G=setTimeout(F,l))},100)};g.beforeTransitionStart?!0!==g.beforeTransitionStart(f)&&f():f()}else g.beforeTransitionStart&&g.beforeTransitionStart(),g.leavingTransCallback&&g.leavingTransCallback(a,d),g.enteringTransCallback&&g.enteringTransCallback(a,d),g.transitionEndCallback&&
(d=g.transitionEndCallback(a,d)),!1!==g.domRemove&&p.removeChild(a),!1!==g.domAdd&&p.appendChild(d)},getDocTypeDeclaration:function(a){a=a||document;a=a.doctype;parts=["!DOCTYPE"];if(!a)return"";parts.push(a.name||"html");a.publicId&&(parts.push("PUBLIC"),parts.push('"'+a.publicId+'"'));a.systemId&&parts.push('"'+a.systemId+'"');return"<"+parts.join(" ")+">"},createShadowRoot:function(a){a=this.el(a);return a.createShadowRoot?a.createShadowRoot():a.webkitCreateShadowRoot?a.webkitCreateShadowRoot():
!1},fixes:function(){var a=RegExp("gx-tab-padding-fix-\\d+","ig"),d=RegExp("gx-tab-spacing-fix-\\d+","ig"),g={},b={},e,f;return{html5:function(a){var d=gx.util.browser,g=d.isIE(),b,n=document.getElementsByTagName("TABLE",a);for(b=n.length-1;0<=b;b-=1){var c=n[b],e=c.getAttribute("data-cellpadding");e&&c.setAttribute("cellPadding",parseInt(e,10));(e=c.getAttribute("data-cellspacing"))&&c.setAttribute("cellSpacing",parseInt(e,10));(e=c.getAttribute("data-align"))&&c.setAttribute("align",e)}if(g||d.isOpera()){d=
[];b=a||document;d=b.querySelectorAll?b.querySelectorAll("td[data-align]"):gx.dom.byTag("td",a);b=0;for(len=d.length;b<len;b++)if(a=d[b].getAttribute("data-align"))d[b].setAttribute("align",a),d[b].style.textAlign=a}},popupMinWidth:function(){if(0<=location.search.indexOf("gxPopupLevel")&&gx.runtimeTemplates){var a=c(window.top).width(),d=800;1200<=a&&(d=900);768<=a&&992>a&&(d=600);768>a&&(d=a-20);c(document.documentElement).css("min-width",gx.dom.addUnits(d))}},fixTableResets:function(k){if(gx.runtimeTemplates){var m=
c("#gx-table-resets-fix")[0];m||(m=document.createElement("style"),m.id="gx-table-resets-fix",document.head.insertBefore(m,gx.dom.byId("gxtheme_css_reference")));e||(e=Mustache.compile("{{#.}}.gx-tab-padding-fix-{{.}}{padding:{{.}}px}{{/.}}"));f||(f=Mustache.compile("{{#.}}.gx-tab-spacing-fix-{{.}}{border-collapse:separate; border-spacing:{{.}}px}{{/.}}"));c("table[cellpadding!=0], table[cellspacing!=0]",k||document.body).each(function(){var e=parseInt(this.getAttribute("cellpadding")||0,10),f=parseInt(this.getAttribute("cellspacing")||
0,10);if(e!=0){g[e]=e;c("tbody > tr > td, tbody > tr > th, tr > td, tr > th",this).each(function(){this.className="gx-tab-padding-fix-"+e+" "+this.className.replace(a,"")})}if(f!=0){b[f]=f;this.className="gx-tab-spacing-fix-"+f+" "+this.className.replace(d,"")}});var l=function(a){return[a]},k=c.map(g,l),l=c.map(b,l);m.innerHTML=e(k)+f(l)}}}}(),_init:function(){Function.prototype.closure=function(a,d,g){var b=gx.util.browser;if(b.isIE()&&8>b.ieVersion()){window.__objs||(window.__objs=[],window.__funs=
[],window.__args=[]);var c=this,e=a.__objId;e||(__objs[e=a.__objId=__objs.length]=a);var f=c.__funId;f||(__funs[f=c.__funId=__funs.length]=c);d||(d=[]);var m=d.__argsId;m||(__args[m=d.__argsId=__args.length]=d);d=c=a=null;return function(){if(__funs){var a=__args[m];if(g===true){a=Array.prototype.slice.call(arguments,0);a=a.concat(__args[m])}a.length==0&&arguments.length>0&&(a=arguments);a=__funs[f].apply(__objs[e],a);if(__objs)try{delete __objs[e].__objId}catch(d){__objs[e].__objId=null}__funs&&
delete __funs[f].__funId;__args&&delete __args[m].__argsId;return a}}}c=this;return function(){var b=d||arguments;!0===g&&(b=Array.prototype.slice.call(arguments,0),b=b.concat(d));return c.apply(a||window,b)}};gx.evt.on_ready(this,function(){var a,d,g=gx.util.browser;if(g.isWebkit()){var b=[];if(document.querySelectorAll)b=document.querySelectorAll("input[type='hidden']");else{var c=gx.dom.byTag("input");a=0;for(d=c.length;a<d;a++)"hidden"==c[a].getAttribute("type")&&b.push(c[a])}a=0;for(d=b.length;a<
d;a++)b[a].setAttribute("autocomplete","off")}if(g.isChrome()){g=document.querySelectorAll("select");a=0;for(d=g.length;a<d;a++)if(!g[a].value&&(b=g[a].querySelectorAll("option[selected]"))&&b.length)g[a].value=b[0].value}});this.TRANSITION_END_EVENT=gx.util.browser.isWebkit()?"webkitTransitionEnd":gx.util.browser.isOpera()?"oTransitionEnd":"transitionend";this.ANIMATION_END_EVENT=gx.util.browser.isWebkit()?"webkitAnimationEnd":gx.util.browser.isOpera()?"oAnimationEnd":"animationend"},_deinit:function(){this._form=
null;null!=this._avoidLeaksDiv&&(gx.dom.shouldPurge()&&gx.dom.purge(this._avoidLeaksDiv),this._avoidLeaksDiv.parentNode.removeChild(this._avoidLeaksDiv),this._avoidLeaksDiv=null);window&&(window.__objs=null,window.__funs=null,window.__args=null)}},util:{contentTypes:{txt:"text/plain",rtx:"text/richtext",htm:"text/html",html:"text/html",xml:"text/xml",aif:"audio/x-aiff",au:"audio/basic",wav:"audio/wav",bmp:"image/bmp",gif:"image/gif",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",jfif:"image/pjpeg",
tif:"image/tiff",tiff:"image/tiff",png:"image/x-png",mpg:"video/mpeg",mpeg:"video/mpeg",mov:"video/quicktime",qt:"video/quicktime",avi:"video/x-msvideo",exe:"application/octet-stream",dll:"application/x-msdownload",ps:"application/postscript",pdf:"application/pdf",tgz:"application/x-compressed",zip:"application/x-zip-compressed",gz:"application/x-gzip"},isKnownContentType:function(a){for(var d in this.contentTypes)if(this.contentTypes[d]==a)return!0;return!1},getContentTypeFromExt:function(a){var d=
a.lastIndexOf(".");-1!=d&&(a=a.substring(d+1));return a?this.getContentType(a):""},getContentType:function(a){if(gx.lang.emptyObject(a))return"text/html";a=a.toLowerCase();a=gx.text.trim(a);if(this.isKnownContentType(a))return a;var d=a.lastIndexOf(".");-1!=d&&(a=a.substring(d+1));a=this.contentTypes[a];return gx.lang.emptyObject(a)?"text/html":a},getFileName:function(a){var d=a.lastIndexOf("/"),g=a.lastIndexOf("\\"),d=d>g?d:g,g=a.lastIndexOf(".");if(!a)return a;if(0>g||d>g)g=a.length;return a.substring(d+
1,g)},getFileType:function(a){var d=a.lastIndexOf("/"),g=a.lastIndexOf("\\"),b=a.lastIndexOf(".");return 0>b||b<d||b<g?"":a.substring(b+1)},getWindowInfo:function(){var a="",d=!0,g=!1;try{if(g=window.location!=window.parent.location?!0:!1)try{d=window.frameElement.id||window.top.document.body,a=window.name}catch(b){d=!1}}catch(c){}return{insideIframe:g,canAccessFrame:d,frameId:a}},browser:function(){var a=navigator.userAgent;return{w3c:!0,ns4:!1,ie5:!0,ns6:!1,ie:-1!=a.indexOf("MSIE")||-1!=a.indexOf("Trident"),
ff:-1!=a.indexOf("Firefox"),winCE:-1!=a.indexOf("Windows CE"),iphone:-1!=a.indexOf("iPhone"),ipad:-1!=a.indexOf("iPad"),blackBerry:-1!=a.indexOf("BlackBerry"),operaMini:-1!=a.indexOf("Opera Mini"),opera:-1!=a.indexOf("Opera"),chrome:-1!=a.indexOf("Chrome"),webkit:-1!=a.search(/webkit/ig),isIE:function(){return this.ie},isFirefox:function(){return this.ff},isChrome:function(){return this.chrome},isWinCE:function(){return this.winCE},isIPhone:function(){return this.iphone},isIPad:function(){return this.ipad},
isBlackBerry:function(){return this.blackBerry},isOperaMini:function(){return this.operaMini},isOpera:function(){return this.opera},isWebkit:function(){return this.webkit},isSmartDevice:function(){return this.isWinCE()||this.isIPhone()||this.isBlackBerry()||this.isOperaMini()},isCompatMode:function(){return"BackCompat"==document.compatMode},ieVersion:function(){if(this.isIE())try{var d=a.indexOf("MSIE");if(0<=d){var g=a.indexOf(";",d),b=a.substring(d+5,g);return parseFloat(b,10)}var c=a.match(/; rv.([0-9]+)/);
if(1<c.length)return parseFloat(c[1],10)}catch(e){gx.dbg.logEx(e,"gxapi.js","ieVersion")}return-1},chromeVersion:function(){if(this.isChrome()){var d=a.match(/Chrome\/([0-9]+)/);if(1<d.length)return parseFloat(d[1],10)}},setupIE:function(){9<=this.ieVersion()&&!this.isCompatMode()&&("undefined"!==typeof Range&&!Range.prototype.createContextualFragment)&&(Range.prototype.createContextualFragment=function(a){var g=document.createDocumentFragment(),b=document.createElement("div");g.appendChild(b);b.outerHTML=
a;return g})},_init:function(){this.isWinCE()||(this.w3c=document.getElementById?!0:!1,this.ns4=document.layers?!0:!1,this.ie5=this.ie&&document.getElementById&&document.all?!0:!1,this.ns6=document.getElementById&&!document.all?!0:!1);this.setupIE()}}}(),addOnce:function(a,d,g){void 0==a[g]&&(a[g]=d)},inArray:function(a,d){if(null==a||!(d instanceof Array))return!1;if("function"==typeof d.indexOf)return-1!=d.indexOf(a);for(var g=d.length,b=0;b<g;b++)if(d[b]==a)return!0;return!1},lastArray:function(a){return 0<
a.length?a[a.length-1]:null},noParmsUrl:function(a){var d=a.indexOf("?");-1!=d&&(a=a.substring(0,d));return a},resolveUrl:function(a){return!a?a:gx.ajax.isabsoluteurl(a)?a:gx.ajax.isRelativeToHost(a)?0!=a.toLowerCase().indexOf("/"+gx.basePath.toLowerCase())?gx.util.resourceUrl(gx.basePath+a,!1):a:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+a,!1)},resourceUrl:function(a,d){if("undefined"==typeof a)return"";if(-1!=a.indexOf("://")||"."==a.charAt(0))return a;var g="/"!=gx.basePath.charAt(gx.basePath.length-
1),b=a.indexOf(gx.basePath);if(0==b&&!d)return("/"==a.charAt(0)?"":"/")+a;if(-1!=b||d){var c="",c=-1!=b?gx.text.replaceAll(a.substring(b+gx.basePath.length),"\\","/"):a;if("/"==a.charAt(0))return location.protocol+"//"+location.host+a;b="/"!=gx.basePath.charAt(0);g=g&&"/"!=c.charAt(0);return location.protocol+"//"+location.host+(b?"/":"")+gx.basePath+(g?"/":"")+c}return a},sameAppUrl:function(a){a=new this.Url(a);return a.isRelative()?!0:a.isSameApp(location.href)},removeBaseUrl:function(a){var d=
gx.staticDirectory.length,g="/"!=gx.staticDirectory.charAt(0),d="/"!=gx.staticDirectory.charAt(d-1),g=RegExp("(?:/)?(?:"+gx.basePath+(g?"/":"")+gx.staticDirectory+(d?"/":"")+")?((?:[\\S]*))").exec(a);null!=g&&g[1]&&(a=g[1]);return a},getIFrameEmptySrc:function(){return"https:"==location.protocol&&gx.util.browser.isIE()&&6>=gx.util.browser.ieVersion()?"gx_blank.html":"about:blank"},Url:function(){var a=/^(([^\:\/\?#]+)\:)?(\/\/([^\/\?#]*))?([^\?#]*)(\?([^#]*))?(#(.*))?$/,d=/^(([^@]+)@)?([^\:]+)(:(.+))?$/;
return function(g){this.url=g;this.user=this.hash=this.query=this.path=this.port=this.host=this.protocol="";this.isRelative=function(){return gx.lang.emptyObject(this.host)};this.isSameApp=function(a){a=new gx.util.Url(a);return this.protocol==a.protocol&&this.host==a.host};(function(g,b){var c=a,c=c.exec(b),e=!gx.lang.emptyObject(c);if(e&&(g.protocol=c[2]?c[2]:"",e=c[4]?c[4]:"",g.path=c[5]?c[5]:"",g.query=c[7]?c[7]:"",g.hash=c[9]?c[9]:"",c=d,c=c.exec(e),e=!gx.lang.emptyObject(c)))g.user=c[2]?c[2]:
"",g.host=c[3]?c[3]:"",g.port=c[5]?c[5]:""})(this,g)}}(),regExp:{isMatch:function(a,d){return null!==RegExp(d).exec(a)},replace:function(a,d,g){return a.replace(d,g)},split:function(a,d){return a.split(d)},matches:function(a,d){var g=RegExp(d).exec(a);return null!==g?g:[]}},autoRefresh:{arTimer:null,getProps:function(){var a=gx.fn.getHidden("_GxRefreshTimeout");null!=a&&(a=gx.json.evalJSON(a),a.Time=parseInt(a.Time));return a},install:function(){var a=this.getProps();null!=a&&(this.create(),"focus"==
a.Type&&gx.evt.attach(window,"blur",this.destroy))},create:function(){if(null==this.arTimer){var a=this.getProps();null!=a&&(this.arTimer=setTimeout(function(){gx.http.reload()},1E3*a.Time))}},destroy:function(){null!=gx.util.autoRefresh.arTimer&&(window.clearTimeout(gx.util.autoRefresh.arTimer),gx.util.autoRefresh.arTimer=null)}},accessKey:function(a){var d="";if(-1!=a.indexOf("&"))for(var g=a.length,b=0;b<g-1;b++)if("&"==a[b]&&"&"!=a[b+1]){d+=a[b+1];break}return d},accessKeyCaption:function(a){var d=
"";if(-1==a.indexOf("&"))return a;for(var g=a.length,b=0;b<g-1;b++)if("&"==a[b]&&"&"!=a[b+1]){d+=a.substring(b+1);break}else d+=a[b];return d},invalidFunc:function(a){throw"gxInvalidFunc: "+a;},urlValue:function(a){var d=a;"string"!=typeof d&&(d=gx.fn.getControlValueInt(a));return encodeURIComponent(d)},help:function(a){open(a,"gxHelpWindow","toolbar=no,location=no,directories=no,status=yes,menubar=no,scrollbars=yes,resizable=yes,copyhistory=no")},_init:function(){this.browser._init();Array.prototype.removeAt=
function(a){this.splice(a,1)}}},lang:{inherits:function(a,d,g){var b=a.prototype;a.prototype=new d;for(var c in b)"undefined"==typeof a.prototype[c]&&(a.prototype[c]=b[c]);"undefined"==typeof a.prototype.base&&(a.prototype.base=d);!0===g&&(a.prototype.constructor=function(){d.prototype.constructor.apply(this,arguments);b.constructor.apply(this,arguments)})},apply:function(a,d){if(a&&d&&"object"===typeof d)for(var g in d)a[g]=d[g];return a},instanceOf:function(a,d){if(null==a||null==d)return!1;if(a instanceof
d||d==String&&"string"==typeof a||d==Number&&("number"==typeof a||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal)||d==Array&&"array"==typeof a||d==Function&&"function"==typeof a)return!0;if("string"==typeof a||"number"==typeof a||"array"==typeof a)return!1;for(var g=a.base;"undefined"!=typeof g;){if(g==d)return!0;g=g.base}return!1},clone:function(a){var d={},g;for(g in a)d[g]=a[g];return d},isNumericType:function(a){return"int"==a||"decimal"==a},isBooleanType:function(a){return"boolean"==
a||"bool"==a},isArray:function(a){return a&&"number"==typeof a.length&&"function"==typeof a.splice},booleanValue:function(a){return!0==a||!1==a?a:"string"==typeof a&&"true"==a.toLowerCase()?!0:!1},gxBoolean:function(a){if("undefined"==typeof a)return!1;if("boolean"==typeof a)return a;if("number"==typeof a){if(0==a)return!1}else if("string"==typeof a&&("false"==a.toLowerCase()||"0"==a.replace(/^ */,"").replace(/ *$/,"")))return!1;return!0},arrayToSource:function(a){if(null!=a.toSource)return a.toSource();
for(var d="[",g=a.length,b=g-1,c=0;c<g;c++)d+=this.objectToSource(a[c]),c<b&&(d+=",");return d+"]"},objectToSource:function(a){if(this.isArray(a))return this.arrayToSource(a);if("object"==typeof a){var d="{",g="",b;for(b in a){var c=b;""==c?c="''":"string"==typeof c&&(c="'"+c+"'");d+=g;d="object"==typeof a[b]?d+(c+":"+this.objectToSource(a[b])):"string"==typeof a[b]?d+(c+":'"+this.encodeValue(a[b])+"'"):d+(c+":"+a[b]);g=","}return d+"}"}return"'"+this.encodeValue(a.toString())+"'"},emptyNum:function(a){return a&&
0===a||!a},emptyObj:function(a){if(a)for(var d in a)if(a.hasOwnProperty(d))return!1;return!0},emptyObject:function(a){return void 0===a||null==a||""==a||"number"==typeof a&&isNaN(a)?!0:!1},supEval:function(a,d){var g=null,g=d instanceof String||"string"==typeof d?a[d]:d;return function(){return g.apply(a,arguments)}},getType:function(a){var d=null;try{for(var g=0,b=window,c=a.split("."),e=c.length,g=0;g<e;g++)b[c[g]]&&(b=b[c[g]]);b&&b!=window&&(d=b)}catch(f){gx.dbg.logEx(f,"gxapi.js","getType")}return d},
doEval:function(a,d){d=d||window;return d.execScript?d.execScript(a):eval.call?eval.call(d,a):eval(a)},doCall:function(){try{for(var a=arguments[0],d=[],g=arguments.length,b=1;b<g;b++)d.push(arguments[b]);return a.apply(this,d)}catch(c){gx.dbg.logEx(c,"gxapi.js","doCall")}},doExecTimeout:function(a){clearTimeout(a.t);a.f.call()},doCallTimeout:function(a,d,g,b){a=a.closure(d,g);b=setTimeout(a,b);return{f:a,t:b}},encodeValue:function(a){return gx.text.charReplace(a,['"',"'","\r","\n"],["\\042","\\047",
"\\015","\\012"])},decodeValue:function(a){a=gx.text.replaceAll(a,"\\042",'"');return gx.text.replaceAll(a,"\\015\\012","\r\n")},htmlDecode:function(a){if(!a)return a;this.htmlDecodeEl||(this.htmlDecodeEl=document.createElement("div"));this.htmlDecodeEl.innerHTML="<div>"+a+"</div>";a=this.htmlDecodeEl.firstChild;return a.innerText||a.text||a.textContent||""},arrayUnique:function(a){for(var a=a.concat(),d=0;d<a.length;++d)for(var g=d+1;g<a.length;++g)a[d]===a[g]&&a.splice(g--,1);return a}},cache:{exceptionsRegEx:!1,
remoteFiles:{},inlineCode:{},isCacheable:function(a){return!this.exceptionsRegEx?!0:!!a&&-1==a.search(this.exceptionsRegEx)},addRemoteFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},addLoadedFile:function(a){this.isCacheable(a)&&(a=gx.util.noParmsUrl(a),this.remoteFiles[gx.util.resourceUrl(a,!0)]=!0)},removeAllRemoteFiles:function(){this.remoteFiles={}},removeRemoteFile:function(a){a=gx.util.noParmsUrl(a);this.remoteFiles[gx.util.resourceUrl(a,
!0)]=!1},fileLoaded:function(a){a=gx.util.noParmsUrl(a);return this.remoteFiles[gx.util.resourceUrl(a,!0)]?!0:!1},updateStyles:function(a,d){for(var g=[],b=a.length,c=0;c<b;c++){var e=a[c];if(!gx.lang.emptyObject(e)){for(var f=!1,m=d.length,l=0;l<m;l++)if(e==d[l]){f=!0;break}f||g.push(e)}}f=gx.staticDirectory;"/"==f.charAt(0)&&(f=f.substring(1));b=g.length;for(c=0;c<b;c++)e=g[c],"/"!=e.charAt(0)&&(e=f+e),this.removeRemoteFile(e)},addInlineCode:function(a){this.inlineCode[a]=!0},deleteInlineCode:function(a){delete this.inlineCode[a]},
codeLoaded:function(a){return this.inlineCode[a]?!0:!1},_init:function(){gx.pO.fullAjax&&gx.spa.started&&(gx.cache.exceptionsRegEx=/messages\..+\.js/);var a=gx.staticDirectory;"/"==a.charAt(0)&&(a=a.substring(1));for(var d=gx.dom.scripts(),g=d.length,b=0;b<g;b++){var c=d[b];gx.lang.emptyObject(c)||("/"!=c.charAt(0)&&!gx.ajax.isabsoluteurl(c)&&(c=a+c),this.addRemoteFile(c))}d=gx.dom.styles();g=d.length;for(b=0;b<g;b++)c=d[b],gx.lang.emptyObject(c)||("/"!=c.charAt(0)&&!gx.ajax.isabsoluteurl(c)&&(c=
a+c),this.addRemoteFile(c))}},evt:{enter:!1,lastKey:-1,lastControl:null,lastEvent:null,dummyCtrl:{},keyListeners:{},shiftPressed:!1,execLoad:!0,autoSkip:!1,hooks:[],controlKeys:[3,6,8,9,12,13,14,16,17,18,19,20,27,32,33,34,35,36,37,38,39,40,44,45,46],triggerKeys:[13,32],processing:!0,userReady:!1,skipPromptCtrl:!0,addHook:function(a,d,g){this.hooks[this.hooks.length]={c:a,e:d,f:g}},waitGridRefresh:function(a){gx.evt.refreshGridCallback instanceof Array?gx.evt.refreshGridCallback.push(a):a.call()},
notifyRefreshGrid:function(){if(gx.evt.refreshGridCallback&&gx.evt.refreshGridCallback instanceof Array){for(;0<gx.evt.refreshGridCallback.length;){var a=gx.evt.refreshGridCallback.pop();"function"==typeof a&&a.call()}gx.evt.refreshGridCallback=void 0}},clearHooks:function(){for(var a=this.hooks.length,d=0;d<a;d++){var g=this.hooks[d];try{this.detach(g.c,g.e,g.f),g.c=null,g.f=null}catch(b){gx.dbg.logEx(b,"gxapi.js","clearHooks")}this.hooks[d]=null}this.hooks=[]},source:function(a){return a.target||
a.currentTarget||a.srcElement},attach:function(a,d,g,b,c){c=c||{};if("string"==typeof d){var e=g;b&&(e=g.closure(b));if(c.single){var f=e,m=!1,l,e=function(){m||(l&&clearTimeout(l),gx.evt.detach(a,d,f,c),f.apply(this,arguments),m=!0)};c.timeout&&(l=setTimeout(e,c.timeout))}a.addEventListener?a.addEventListener(d,e,c.useCapture||!1):a.attachEvent?a.attachEvent("on"+d,e):a["on"+d]=e;this.addHook(a,d,e)}else if(gx.lang.isArray(d))for(var e=0,q=d.length;e<q;e++)this.attach(a,d[e],g,b,c)},detach:function(a,
d,g,b){try{if(b=b||{},"string"==typeof d)a.removeEventListener?a.removeEventListener(d,g,b.useCapture||!1):a.detachEvent?a.detachEvent("on"+d,g):a["on"+d]=null;else if(gx.lang.isArray(d))for(var c=0,e=d.length;c<e;c++)this.detach(a,d[c],g,b)}catch(f){gx.dbg.logEx(f,"gxapi.js","detach")}},cancel:function(a,d){if(d&&gx.util.browser.isIE()&&typeof("undefined"!=a.keyCode))try{a.keyCode=0}catch(g){}"undefined"==typeof a.preventDefault?(a.cancelBubble=d,a.returnValue=!d):d&&(a.preventDefault(),a.stopPropagation())},
checkCtrlFocus:function(a){try{if(gx.evt.fixWebKitOnFocus()&&"button"==a.type&&gx.fn.isAccepted(a)&&void 0!=a.onfocus)a.onfocus()}catch(d){gx.dbg.logEx(d,"gxapi.js","checkCtrlFocus")}},doClick:function(a,d){if(!gx.evt.processing||gx.csv.validating){var g=gx.evt.source(d);if("button"!=g.type&&"submit"!=g.type&&(g=gx.dom.el(a),gx.fn.isAccepted(g))){if(void 0!=g.onfocus)g.onfocus();if(void 0!=g.onclick)g.onclick();"INPUT"==g.nodeName&&"submit"==g.type&&gx.dom.form().submit()}}},executeOnblur:function(a){var d=
gx.csv.lastId,g=gx.O.focusControl;gx.O.focusControl=a;this.onblur(gx.O.focusControl);gx.O.focusControl=g;gx.csv.lastId=d},onblur:function(a){if(gx.O){gx.csv.lastId=a;try{var d=gx.fn.validStruct(a);d&&null!=d.gxgrid&&d.gxgrid.updateControlValue(d,!1);var g=gx.csv.lastControl,b=g.getAttribute("maxlength");0<b&&g.value.length>=b&&(g.value=g.value.substring(0,b));if(d&&"bits"==d.type&&0==d.ro){var c=gx.fn.getControlGridRef(d.fld,d.gxgrid?d.gxgrid.gridId:"");gx.util.browser.isWebkit()&&0>g.id.indexOf(d.fld)&&
(g=c);var e=gx.html.multimediaUpload.getContainer(c);gx.html.multimediaUpload.refreshPreviewImg(e,g)}}catch(f){gx.dbg.logEx(f,"gxapi.js","onblur")}}},onfocus:function(){var a=function(){gx.fx.obs.notify("gx.onbeforevalidate");gx.evt.onfocus_impl.apply(gx.evt,arguments);gx.fx.obs.notify("gx.onaftervalidate")};!0===gx.evt.is_button_mouse_event||gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,arguments)},onfocus_impl:function(a,
d,g,b,c,e,f){try{gx.evt.setReady(!1);if(!gx.fn.checkPopupFocus(a))return gx.evt.setReady(!0),!1;var m=!1;gx.csv.cmpCtx!=g&&(m=!0,gx.O.fromValid=0);gx.setGxO(g,b);m&&gx.fn.changeCmpContext();gx.fn.initOld(a);try{null!=gx.grid.lastFocusCtrl&&(gx.csv.lastId=gx.grid.lastFocusCtrl,gx.grid.lastFocusCtrl=null)}catch(l){gx.dbg.logEx(l,"gxapi.js","onfocus")}gx.csv.rowChanged=!1;gx.csv.lastControl=a;(0==e||""!=c)&&gx.fn.setCurrentGridRow(e,c);gx.fx.installSuggest(a);var q=!1;if(gx.csv.lastGrid!=e){gx.csv.lastRow[e]=
null;if(!f){if(gx.csv.lastGrid<e){var o=gx.fn.firstGridControl(e);gx.O.fromValid>o&&(gx.O.fromValid=o)}gx.csv.lastGrid=e}q=!0}gx.O.focusControl=d;if(!gx.csv.onloadFocus)try{gx.fx.ctx.notify(a)}catch(p){gx.dbg.logEx(p,"gxapi.js","onfocus")}if(gx.csv.disableFocus)return gx.csv.disableFocus=!1,gx.evt.setReady(!0),!0;try{var r=gx.fn.getControlValue("Mode");if("DLT"==r||"DSP"==r||gx.O.isTransaction()&&gx.dom.isButton(a)&&!gx.evt.isEnterEvtCtrl(a)&&!gx.evt.isCheckEvtCtrl(a)&&!f)return gx.evt.setReady(!0),
!0}catch(s){gx.dbg.logEx(s,"gxapi.js","onfocus")}if(gx.O.isTransaction()&&a.gxdisabled&&null!=gx.csv.lastControl){cn=gx.fn.getControlIndex(a)+1;if(-1!=cn&&(NextFocus=gx.fn.searchFocusFwd(cn),null!=NextFocus))return gx.fn.setFocus(NextFocus),gx.evt.setReady(!0),!0;gx.fn.setFocus(gx.csv.lastControl);gx.evt.setReady(!0);return!0}if(gx.csv.invalidForcedCtrl)return gx.fn.setFocusOnError(gx.csv.invalidForcedCtrl.id),gx.csv.invalidForcedCtrl=null,gx.evt.setReady(!0),!0;if(null!=gx.csv.invalidControl&&(gx.csv.invalidControl!=
a&&gx.O.focusControl>=gx.csv.invalidId)&&gx.csv.invalidControl==a)return gx.csv.validate(gx.csv.invalidControl,gx.csv.invalidId,!1).done(function(a){if(a){gx.csv.invalidControl=null;gx.evt.setReady(true)}}),!0;f?(gx.O.fromValid=gx.fn.firstGridControl(gx.csv.lastGrid),gx.O.toValid=gx.fn.firstCtrlAfterGrid(gx.O.fromValid,gx.csv.lastGrid),gx.O.focusControl=gx.O.toValid):(gx.O.toValid=gx.O.focusControl,gx.O.focusControl<gx.O.fromValid&&(gx.O.fromValid=gx.O.focusControl));void 0!=gx.csv.lastRow[e]&&(gx.csv.lastRow[e]!=
c&&!q)&&gx.O.fromValid==gx.O.toValid&&(gx.csv.lastId=gx.O.fromValid);var u=gx.fn.controlIds();0<u.length&&gx.O.fromValid<u[0]&&(gx.O.fromValid=u[0]);gx.lang.emptyObject(gx.csv.lastRow[e])&&0!=e&&(gx.csv.rowChanged=!0,gx.csv.lastRow[e]=c);var t=gx.O,x=gx.csv.lastId,A=gx.fn.validStruct(x,t);if(A)var y=gx.csv.lastRow[A.grid];gx.csv.checkRowChange(x,q,t,y).done(function(d){var g=false,b=function(){gx.csv.invalidControl==null&&(a.nodeName=="SELECT"?(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>=
7)&&gx.fn.setSelection(a):gx.fn.setSelection(a));gx.csv.disableFocusCondition();gx.evt.setReady(true)};if(!gx.lang.emptyObject(y)&&!gx.lang.emptyObject(c)&&y.length>c.length){g=y.substring(y.length-c.length);g=parseInt(g)<parseInt(c)}if((!d||q)&&(t.focusControl>=x||g)){if(gx.fn.lastMainLevelCtrlId(x,e))if((d=gx.fn.getControlRefById(x))&&d.getAttribute("gxvalid")===1)t.fromValid=x+1;gx.csv.validateAll(t).done(b)}else{t.toValid=t.focusControl;b()}})}catch(w){gx.dbg.logEx(w,"gxapi.js","onfocus")}return!1},
userOnload:function(){try{"function"==typeof window.GXOnloadUsr&&GXOnloadUsr()}catch(a){gx.dbg.logEx(a,"gxapi.js","userOnload")}},onload:function(){gx.objectLoad().done(function(){gx.spa.start({listeners:{onnavigatestart:function(){gx.dom.addClass(document.body,"gx-spa-navigating")},onnavigate:function(){gx.dom.removeClass(document.body,"gx-spa-navigating")},onbeforesend:function(a,d,g){gx.pO.MasterPage&&a.req.setRequestHeader(g,gx.pO.MasterPage.ServerClass)},onbeforeprocessresponse:function(a,d,
g,b,c,e){gx.reinit(!e)},oncontentreplace:function(a,d,g,b,c,e,f,m){var a=gx.lang.getType(b),e=(e=e==f?e:f)?gx.lang.getType(e.toLowerCase()):!1,l=gx.ajax.getJsonResponse();l&&gx.fn.setJsonHiddens(l.gxHiddens,!1);a.prototype=new gx.GxObject;gx.setParentObj(new a);m?gx.setMasterPage(c):e&&gx.setMasterPage(new e);gx.ajax.clearJsonResponse();l?gx.ajax.setJsonResponse(l,!1,function(){gx.objectLoad(l.gxGrids).done(function(){gx.fn.setJsonHiddens(l.gxHiddens,false);gx.pO.SetStandaloneVars()})},gx.O):gx.objectLoad()}}})})},
onready:function(a){if(gx.lang.emptyObject(a))if("complete"==document.readyState)gx.evt.onload();else setTimeout(function(){gx.evt.onready(null)},250);else if(gx.util.browser.isIE()&&"complete"==document.readyState)gx.evt.onload()},on_ready:function(a,d){gx.fx.obs.addObserver("gx.onload",a,d)},onunload:function(a){gx.objectUnload(a);gx.spa.stop()},onclick:function(a){gx.evt.setReady(!1);gx.evt.processing&&gx.evt.cancel(a,!0);gx.evt.mouse.update(a);setTimeout(function(){gx.fx.ctx.notify()},10);gx.evt.setReady(!0)},
onmousedown:function(a){var d=window.event||a,g=gx.evt.source(d);if(g&&8>=gx.util.browser.ieVersion()&&"SHAPE"===g.tagName.toUpperCase())return!1;gx.evt.is_button_mouse_event=gx.dom.isButtonLike(g);gx.evt.mouse.update(a);a=gx.fx.dnd;a.deleteClonControl();g=a.getSource(d);null!=g&&(gx.evt.cancel(d,!0),gx.setGxO(g.obj),a.drag(g.obj,g.types,g.hdl))},onmousemove:function(a){gx.evt.mouse.update(a);var d=gx.fx.dnd;gx.util.browser.isIE();if(gx.popup.ispopup()){var g=gx.popup.ext;g.movepopup();if(null!=g.currIDb||
null!=g.currRS)return!1}null!=d.obj&&(a=window.event||a,gx.evt.cancel(a,!0),null!=gx.fx.dnd.getTarget(a,d.obj.gxDragTypes)&&d.over(),d.moveControl(d.dragCtrl))},onmouseup:function(a){gx.evt.is_button_mouse_event=!1;gx.evt.mouse.update(a);var d=gx.fx.dnd;if(null!=d.dragCtrl){var g=window.event||a,g=d.getTarget(g,d.obj.gxDragTypes);null!=g?(d.deleteClonControl(),gx.setGxO(g.obj),d.drop(d.dropCtrl,g.obj,g.hdl)):d.restoreControl();g=window.event||a;gx.evt.cancel(g,!0)}d.out();d.dragCtrl=null;d.obj=null;
gx.popup.ispopup()&&(gx.popup.ext.currRS=null)},ondblclick:function(a){gx.evt.mouse.update(a);gx.fx.dom.raiseEvent("dblclick",window.event||a)},onwindowblur:function(){gx.fx.dnd.deleteClonControl()},checkMaxLength:function(a,d,g){var g=window.event||g,b=gx.util.browser.isIE(),c=g.keyCode;if(b){if("keydown"==g.type&&229==c)return a.value.length<=d?a.ImeKey=!0:!1;if("keyup"==g.type&&8==c&&a.ImeKey&&a.value.length+1>=d)return a.value=a.value.substring(0,a.value.length-1),a.ImeKey=!1,!0}if("keyup"==g.type||
b)return a.value.length+1<=d||8==c||9==c||46==c||35<=c&&40>=c},onkeypress:function(a,d,g){if((null!=a||window.event)&&!(null!=a&&window.event)){var a=null==a?window.event:a,b=gx.fn,c=gx.util.browser,d={event:a,hasEnter:d,skipOnEnter:g,cancel:!1};gx.fx.obs.notify("gx.keypress",[d]);if(!d.cancel)if(27==a.keyCode&&gx.popup.ispopup())b.closeWindow();else{13==a.keyCode&&(gx.evt.processing&&!gx.csv.validating)&&this.cancel(a,!0);if(!gx.O||gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode&&this.invalidDSPKey(a))return this.cancel(a,
!0),!1;this.lastKey=a.keyCode;this.shiftPressed=a.shiftKey;var e=a.ctrlKey,d=gx.evt.source(a)||gx.dom.getActiveElement()||gx.csv.lastControl;gx.csv.invalidateCtrl(d,a);if(!this.isEnterEvtCtrl(d)||!this.isTriggerKey(a)||!this.cancelAndRefresh(a)){this.checkFuncKey(a,d);if((32==a.charCode||32==a.keyCode||13==a.keyCode&&!g)&&gx.dom.hasClass(d,"gx_newrow")){var f=gx.dom.findParentByTagName(d,"DIV");f&&(f=gx.O.getGridById(f.getAttribute("gxgridid")))&&f.getNewRows(1,a)}if(13==a.keyCode)if(f=this.triggersEvt(d),
g){if(!b.enterHasFocus()&&(!this.shiftPressed||!("TEXTAREA"==d.nodeName&&c.isIE())))e&&"TEXTAREA"==d.nodeName?c.isIE()||gx.dom.replaceAtCaretPosition(d,"\n"):(c.isIE()&&"file"!=d.type?(gx.evt.isEnterEvtCtrl(d)&&gx.O.executeEnterEvent(a,d),a.keyCode=9,this.lastKey=a.keyCode,11<=c.ieVersion()&&(a.preventDefault(),b.setFocus(b.searchFocus(b.getControlIndex(d)+1,!0)))):(d.value&&(c.isIE()&&"SELECT"!=d.tagName)&&(c=d.value,d.value="",d.value=c),b.skipFocus(g),this.cancel(a,!0)),this.enter=!1)}else f||
gx.O.executeEnterEvent(a,d)}}}},onkeyup:function(a){var a=gx.evt.source(window.event?window.event:a),d=a.getAttribute("maxlength"),g="undefined"==typeof a.value?"":a.value;if((""==a.type&&9==this.lastKey||this.autoSkip&&""!=a.type&&!this.isControlKey(this.lastKey)&&g.length>=d)&&this.skipPromptCtrl)if(gx.dom.isTextWithLink(a)){if(d=a.id||("A"==a.tagName&&a.parentNode?a.parentNode.id:""))d=gx.O.getValidStructId(d),gx.evt.onfocus(a,d,"",!1,"",0)}else if(a=a.getAttribute("gxfocusable"),!(null!=a&&"1"==
a)){a=gx.fn.getControlIndex(gx.csv.invalidControl?gx.csv.invalidControl:gx.csv.lastControl);if(-1==a)return!0;a=gx.fn.searchFocus(this.shiftPressed?a-1:a+1,!this.shiftPressed);gx.fn.setFocus(a)}},setEventRow:function(a,d){var g=gx.fn.rowGridId(d),b=gx.fn.controlRowId(d)||gx.fn.currentGridRowImpl(g)||"0001";null!=g&&null!=b&&(void 0!=d.gxGridName&&gx.fn.setHidden(a.CmpContext+d.gxGridName.toUpperCase()+"_ROW",b),gx.csv.lastEvtRow=b,gx.fn.setCurrentGridRow(g,b))},ctrlOnchange:function(a,d,g,b){gx.csv.pkDirty=
g;"UPD"==a.value?"1"==d.value?(g?null!=b&&(b.value=gx.getMessage("GXM_captionadd")):null!=b&&(b.value=gx.getMessage("GXM_captionupdate")),d.value="0"):g&&null!=b&&(b.value=gx.getMessage("GXM_captionadd")):"INS"==a.value&&"1"==d.value&&(null!=b&&(b.value=gx.getMessage("GXM_captionadd")),d.value="0")},onchange:function(){var a=function(){gx.evt.onchange_impl.apply(gx.evt,arguments)};gx.fx.suggestProcessing?gx.fx.obs.addObserver("gx.validation",this,a.closure(this,arguments),{single:!0}):a.apply(gx.evt,
arguments)},onchange_impl:function(a){gx.evt.setReady(!1);gx.evt.lastControl=a;var d=gx.fn.getControlValue(gx.dom.id(a));if(gx.evt.fixWebKitOnFocus()&&"radio"==a.type)a.onfocus();var g,b=!1;if(a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE)!=d){b=!0;gx.fn.setControlValue("IsModified","1");var c=!0;if(g=gx.O.getValidStruct(gx.O.focusControl))"function"==typeof g.c2v&&g.c2v(),"function"==typeof g.v2bc&&g.v2bc.call(gx.O);if("select-one"==a.type||"checkbox"==a.type||"radio"==a.type)c=!1,gx.csv.validate(a,
gx.O.focusControl,!0,gx.O).done(function(d){d&&gx.csv.invalidControl==a&&(gx.csv.invalidControl=null);gx.evt.execOnchange(a,d)});gx.fn.setControlOldValue(a,d);c&&gx.evt.execOnchange(a,!1)}d=gx.evt.execUsrOnchange(a);gx.evt.setReady(!0);var c=gx.util.browser.isWebkit()&&("radio"==a.type||"checkbox"==a.type||"file"==a.type),e=!1;if(b&&g&&(gx.fn.lastMainLevelCtrlId(gx.O.focusControl,g.grid)||g.gxsgprm))e=c=!0;if(c&&a.onblur)a.onblur();e&&("undefined"==typeof a.GXFormatError||!1==a.GXFormatError)&&gx.csv.validControls(gx.O.focusControl,
gx.O.focusControl+1,!0,gx.O);return d},execOnchange:function(a,d){var g="";if(a.attributes.gxoch1)try{g+=a.attributes.gxoch1.value+";"}catch(b){gx.dbg.logEx(b,"gxapi.js","execOnchange")}if(gx.fn.isAccepted(a)&&a.attributes.gxoch2)try{g+=a.attributes.gxoch2.value+";"}catch(c){gx.dbg.logEx(c,"gxapi.js","execOnchange")}try{""!=g&&eval(g)}catch(e){gx.dbg.logEx(e,"gxapi.js","execOnchange")}d||a.setAttribute("gxvalid","0");a.setAttribute("gxctrlchanged","1");gx.fn.setControlValue("IsModified","1")},execUsrOnchange:function(a){var d=
"";try{d=a.attributes.gxoch0.value}catch(g){return!0}return(new Function(d)).call(a)},jsEvent:function(a){if(gx.evt.processing&&!gx.csv.validating)return!1;a=a.getAttribute?a.getAttribute("jsevent"):a.jsevent;return!gx.lang.emptyObject(a)?eval(a):!0},isEnterEvtCtrl:function(a){if(gx.O.EnterCtrl){var d=gx.dom.id(a);!d&&"A"==a.tagName&&(d=a.parentNode.id);d&&0==d.indexOf("span_")&&(d=d.substring(5));if(!d)return!1;for(var g=gx.O.EnterCtrl,a=gx.fn.rowGridId(a),b=0,c=g.length;b<c;b++){var e=gx.csv.ctxControlId(g[b]);
if(a&&-1!=d.search(RegExp(".*"+e+"_[0-9]{4}$"))||e==d)return!0}}return!1},isCheckEvtCtrl:function(a){if(!gx.lang.emptyObject(gx.O.CheckCtrl)){var a=gx.dom.id(a),d;for(d in gx.O.CheckCtrl)if(gx.O.CheckCtrl[d]==a||gx.O.CmpContext+gx.O.CheckCtrl[d]==a)return!0}return!1},isTriggerKey:function(a){for(var d=this.triggerKeys.length,g=0;g<d;g++)if(a.keyCode==this.triggerKeys[g]||a.charCode==this.triggerKeys[g])return!0;return!1},isControlKey:function(a){for(var d=this.controlKeys.length,g=0;g<d;g++)if(a==
this.controlKeys[g])return!0;return!1},invalidDSPKey:function(a){var d=a.keyCode-111;a.shiftKey&&(d+=12);return this.keyListeners[d]&&"ENTER"==this.keyListeners[d][gx.O.CmpContext]||13==a.keyCode?!0:!1},addKeyListener:function(a,d,g){1==d&&(document.body.onhelp=gx.falseFn);void 0==this.keyListeners[d]&&(this.keyListeners[d]=[]);this.keyListeners[d][a]=g},setEvtName:function(a){gx.fn.setHidden("_EventName",a)},cancelAndRefresh:function(a){return gx.O.conditionsChanged?(this.cancel(a,!0),gx.O.executeServerEvent("RFR",
!1),!0):!1},setGridEvt:function(a,d){if((!gx.evt.processing||gx.csv.validating)&&!gx.lang.emptyObject(a)){if(gx.lang.emptyObject(d)){var g=gx.fn.getGridObj(a);g&&(d=gx.fn.getHidden(gx.O.CmpContext+g.gridName.toUpperCase()+"_ROW"))}gx.fn.setHidden("_EventGridId",a);gx.fn.setHidden("_EventRowId",d);void 0!==d&&gx.fn.setCurrentGridRow(a,d)}},checkFuncKey:function(a,d){var g=this.lastKey-111;a.shiftKey&&(g+=12);if(0<g&&24>=g&&void 0!=this.keyListeners[g]){var b=this.keyListeners[g][gx.O.CmpContext];if("undefined"!=
typeof b)this.execFnKeyEvt(a,gx.O,b,d);else for(var c in this.keyListeners[g])if(b=this.keyListeners[g][c],"undefined"!=typeof b){var e=gx.getObj(c,!1);if(null!=e){this.execFnKeyEvt(a,e,b,d);break}}}},execFnKeyEvt:function(a,d,g,b){if(!gx.evt.processing)if(this.cancel(a,!0),"function"==typeof d[g])b=d.isServerEvent(g),gx.evt.setProcessing(!0,!b),d[g].call(d),"undefined"!=typeof gx&&gx.evt.setProcessing(!1,!b);else if("PROMPT"==g){if((g=d.getValidStructFld(b))&&g.attachedCtrls)for(var a=g.attachedCtrls,
c=0,e=a.length;c<e;c++)if((b=a[c])&&b.info&&b.info.isPrompt){var f=a[c].id;"function"==typeof d.promptKeyHandlers[f]&&(b=0<g.grid?"_"+gx.fn.currentGridRowImpl(g.grid):"",b=gx.dom.el(d.CmpContext+f+b),d.promptKeyHandlers[f].call(d,b))}}else if(d.isTransaction()&&"SELECT"==g){if((d=gx.dom.el(d.CmpContext+"BTN_SELECT"))&&"function"==typeof d.onclick)d.onclick()}else gx.evt.execEvt(d.CmpContext,d.IsMasterPage,d.CmpContext+"E"+g+".",gx.evt.dummyCtrl)},keyModifiesValue:function(a){a=window.event?a.keyCode:
a.which;return 32<=a&&127>=a||229==a?!0:!1},triggersEvt:function(a){return!gx.lang.emptyObject(a)&&(a==gx.evt.dummyCtrl||("A"==a.nodeName||"TEXTAREA"==a.nodeName)||"INPUT"==a.nodeName&&("button"==a.type||"image"==a.type))?!0:!1},setProcessing:function(a,d){if(("undefined"==typeof d||d)&&!gx.evt.redirecting)gx.evt.processing=a,gx.evt.setReady(!gx.evt.processing)},endValidation:function(){gx.csv.validatingGrid=null;gx.csv.validating=!1;gx.evt.setProcessing(!1)},setReady:function(a){gx.evt.userReadyCnt+=
a?-1:1;gx.evt.userReadyCnt=0>gx.evt.userReadyCnt?0:gx.evt.userReadyCnt;gx.evt.userReady=0==gx.evt.userReadyCnt;isNaN(gx.evt.userReadyCnt)&&(gx.evt.userReadyCnt=0)},EVT_ROW_ID_REGEXP:/\.([0-9]{4})$/,execEvt:function(a,d,g,b,c,e,f,m,l,q){gx.dbg.logPerf("execEvt");if(q||!gx.lang.emptyObject(g)&&!(gx.evt.processing&&!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){if(gx.evt.fixWebKitOnFocus()&&gx.dom.isButtonLike(b)&&b!=gx.csv.lastControl&&void 0!=b.onfocus)b.onfocus();gx.fx.obs.notify("gx.validation");
void 0!=a&&(q=gx.getObj(a,d))&&gx.setGxO(a,d);a=c;(d=(d=this.EVT_ROW_ID_REGEXP.exec(g))&&2==d.length?d[1]:null)||(d=gx.fn.currentGridRowImpl(a));f&&(gx.evt.srvCommand=!0,b&&(a=gx.fn.rowGridId(b),d=gx.fn.controlRowId(b),!gx.lang.emptyObject(a)&&!gx.lang.emptyObject(d)&&(gx.csv.lastGrid=a,gx.fn.setCurrentGridRow(a,d))));if(0<gx.csv.lastId&&(c=gx.O.getValidStruct(gx.csv.lastId),(gx.evt.isEnterEvtCtrl(b)&&0<b.id?gx.O.getValidStructId(b.id):gx.O.focusControl)<gx.csv.lastId&&(gx.evt.isEnterEvtCtrl(b)||
c&&c.isuc)||gx.evt.enter))gx.O.fromValid=gx.csv.lastId,gx.O.toValid=gx.csv.lastId+1,gx.csv.validateAll();this.setEvtName(g,b);this.lastEvent=g;!f&&(gx.grid.drawAtServer||b&&"INPUT"==b.nodeName&&"submit"==b.type)?this.execEvtSubmit(g,b):(b=function(){gx.ajax.doPost(gx.ajax.encryptParms(gx.pO,"gxajaxEvt"),e,m,l)},gx.pO.supportAjaxEvents&&!gx.dom.hasSelectedFile()?gx.evt.dispatcher.dispatch(g,gx.O,a,d,!0).done(l).fail(b):b())}},execEvtSubmit:function(a,d){if(!gx.evt.processing||gx.csv.validating){gx.evt.setProcessing(!0);
gx.O.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[a,d]);gx.fn.objectOnpost();gx.http.saveState();gx.fn.forceEnableControls(!1);var g=gx.dom.form(),b=gx.popup.getPopup();if(null!=b){var c=g.action,b=b.window.gx.popup.lvl;if(-1!=b){var e=-1!=c.indexOf("?")?",":"?",e=e+encodeURIComponent("gxPopupLevel="+b+";");g.action=c+e}}g.submit()}},execCliEvt:function(a,d,g,b,c,e){if(!(gx.evt.processing&&!gx.csv.validating||!gx.ajax.isFormEnabled()||gx.csv.anyFormatError())){gx.fx.obs.notify("gx.validation");
var e=void 0!=e?e:[],f=gx.getObj(a,d),m;if(null!=f){gx.setGxO(a,d);"string"==typeof b&&(""!=b&&4<arguments.length)&&(m=f.getGrid(b),m.instanciateRow(c),m=m.gridId);var l=f.isServerEvent(g);gx.evt.setProcessing(!0,!l);f.execC2VFunctions();var q=function(){gx.popup.waitCallback(function(){gx.evt.setProcessing(false,!gx.csv.validating&&!l)});f.conditionsChanged&&f.executeServerEvent("RFR",true)},o=function(){f[g](e);q()};gx.pO.supportAjaxEvents?gx.evt.dispatcher.dispatch(f.getServerEventName(g),f,m,
c,!1,e).done(q).fail(o):o()}}},fixWebKitOnFocus:function(){var a=gx.util.browser;return a.isWebkit()&&!a.isChrome()||a.isChrome()&&30>a.chromeVersion()?!0:!1},dispatcher:{EXECUTION_TIMEOUT:50,dispatchedEvents:{},getContextKey:function(a,d,g){return(a.CmpContext||"PARENT_OBJECT")+(d||"")+(g||"")},cleanEventName:function(a,d){var a=a.replace(RegExp("^"+d.CmpContext),""),g=/^E('?(\w+)\.?([^\.]*)'?)/.exec(a);return g&&g.length&&1<g.length?g[1].replace(/\.\d*$/,""):a},getEventParmsMetadata:function(a,
d,g){return d.EvtParms[a]["input"==g?0:1]},eventDepends:function(a,d,g){for(var d=this.getEventParmsMetadata(d,g,"output"),a=this.getEventParmsMetadata(a,g,"input"),b,c=0,e=d.length;c<e;c++)for(var g=gx.ajax.resolveParmKey(d[c]),f=0,m=a.length;f<m;f++)if(b=gx.ajax.resolveParmKey(a[f]),g==b)return!0;return!1},dispatch:function(a,d,g,b,e,f){var e=void 0===e||e,k=c.Deferred(),m=this.cleanEventName(a,d),l=d.getClientEventName(a);if(!d.EvtParms[m])return k.reject(),k.promise();var q=this.getContextKey(d,
g,b),o=this.dispatchedEvents[q],a={eventName:m,dirtyEventName:a,clientSideEventName:l,serverSide:e,deferred:k,arguments:f};o?o.events.push(a):(o={gxO:d,grid:g,row:b,events:[a]},this.dispatchedEvents[q]=o,setTimeout(this.dispatchTimeoutCallback.closure(this,[q]),this.EXECUTION_TIMEOUT));return k.promise()},dispatchTimeoutCallback:function(a){var d=this.dispatchedEvents[a],g=d.gxO,b=d.grid,c=d.row,e=[],f=[],m,l,q=[],o,p={};delete this.dispatchedEvents[a];for(var a=0,r=d.events.length;a<r;a++)if(m=d.events[a],
m.serverSide)f.push(m);else{l=!0;for(var s=0;s<a;s++)if(this.eventDepends(m.eventName,d.events[s].eventName,g)){l=!1;break}l?e.push(m):f.push(m)}d=e.concat(f);e=!1;a=0;for(r=d.length;a<r;a++)p[d[a].eventName]=d[a].deferred,e&&d[a].serverSide?o.addMethod(d[a].eventName):(o=new gx.ajax.message(d[a].eventName,g,b,c,d[a].serverSide),d[a].serverSide||(o.callback=g[d[a].clientSideEventName].closure(g,d[a].evtArguments||[])),q.push(o)),e=d[a].serverSide;var u=function(a,d,g){for(var b=0,c=a.methods.length;b<
c;b++){var e=p[a.methods[b]];e&&(d?e.resolve(g):e.reject(g))}};runCount=0;var t=function(){if(runCount<q.length){var a=q[runCount++],d=runCount==q.length;a.call().done(function(){u(a,!0,d);t()}).fail(function(){u(a,!1,d)})}};t()}},mouse:{x:-1,y:-1,update:function(a){try{gx.util.browser.isIE()?(this.x=event.clientX+gx.dom.documentScroll().scrollLeft,this.y=event.clientY+gx.dom.documentScroll().scrollTop):(this.x=a.pageX,this.y=a.pageY)}catch(d){gx.dbg.logEx(d,"gxapi.js","mouse update")}}},_init:function(){document.gxReadyState=
"loading";if(gx.util.browser.isIE()&&(gx.util.browser.isCompatMode()||8>=document.documentMode||8>=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()))this.attach(document,"readystatechange",this.onready);else if(9<=gx.util.browser.ieVersion()&&!gx.util.browser.isWinCE()||gx.util.browser.isFirefox()||gx.util.browser.isWebkit()||gx.util.browser.isOperaMini())this.attach(document,"DOMContentLoaded",this.onload);else if(gx.util.browser.isBlackBerry())this.attach(window,"load",this.onload);else this.onready(null);
this.attach(document,"mousedown",this.onmousedown);this.attach(document,"mousemove",this.onmousemove);this.attach(document,"mouseup",this.onmouseup);this.attach(document,"click",this.onclick);this.attach(document,"dblclick",this.ondblclick);this.attach(window,"blur",this.onwindowblur);gx.dbg.performance&&!gx.util.browser.isBlackBerry()&&this.attach(window,"load",function(){gx.dbg.logPerf("onload","Page Loaded");gx.dbg.printPerformanceLog()})},_deinit:function(){this.lastEvent=this.lastControl=null;
this.dummyCtrl={};this.keyListeners={};this.hooks=[]}},csv:{GX_OLD_VALUE_ATTRIBUTE:"gxOldValue",pkDirty:!1,validating:!1,lastRow:[],rowChanged:!1,currentId:0,lastId:0,lastControl:null,lastActiveControl:null,lastGrid:0,cmpCtx:"",anyError:!1,userFocus:null,focusControl:null,invalidControl:null,invalidForcedCtrl:null,validActivatedControl:null,disableFocus:!1,validatingUC:null,validatingGrid:null,lastEvtResponse:null,lastEvtRow:null,invalidId:0,stopOnError:!1,dismissSeconds:0,messagePosition:"right",
oneAtAtime:!0,gxFormatErrors:[],validateAll:function(a){var d=c.Deferred(),a=a||gx.O;this.validControls(a.fromValid,a.toValid,!1,a).done(function(){try{if((null==this.invalidControl||!gx.csv.stopOnError)&&(!this.rowChanged||this.targetRowIsMod(this.toValid)))a.fromValid=a.toValid}catch(g){gx.dbg.logEx(g,"gxapi.js","validateAll")}d.resolve()}.closure(this));return d.promise()},validControls:function(a,d,g,b){var e=c.Deferred(),f=[],k=function(a,d){if(gx.csv.stopOnError)if(-1!=d){var g=gx.fn.validStruct(d,
b),g=gx.fn.getControlGridRef(g.fld,g.grid);gx.csv.disableFocus=!0;gx.fn.isAccepted(g,b)?gx.fn.setFocus(g):gx.fn.setFocus(gx.evt.lastControl)}else!gx.dom.isButton(gx.csv.lastControl)&&null!=gx.csv.validActivatedControl&&gx.fn.setFocus(gx.csv.validActivatedControl)};try{gx.csv.validActivatedControl=null;gx.csv.invalidControl=null;gx.csv.invalidId=0;if(d>a){for(;a<d;a++)f.push(this.validControl(a,g,b));if(0<f.length)return c.when.apply(c,f).done(function(){for(var a=!0,d=-1,g=0,b=arguments.length;g<
b;g++){var c=arguments[g].ret;if(a&&!c){d=arguments[g].ctrl;a=!1;break}}k(a,d);e.resolve(a)}),e.promise()}k(!0,-1);e.resolve(!0)}catch(m){gx.dbg.logEx(m,"gxapi.js","validControls")}return e.promise()},validControl:function(a,d,g){var b=c.Deferred(),g=g||gx.O,e=gx.fn.validStruct(a,g);if(void 0!=e){if(0!=e.grid){var f=gx.fn.currentGridRow(e.grid);void 0!=f&&gx.fn.setCurrentGridRow(e.grid,f)}!0==e.isuc?e.uc.execC2VFunctions():"function"==typeof e.c2v&&e.c2v();"function"==typeof e.v2bc&&e.v2bc.call(g);
try{if(0==e.lvl||0!=e.grid&&gx.fn.gridRowIsMod(e.lvl,gx.fn.currentGridRow(e.grid))||!g.isTransaction()){var k=null;if(k=!0==e.isuc?e.uc.getRealControl():gx.fn.getControlGridRef(e.fld,e.grid))return this.validate(k,a,d,g).done(function(d){try{var g=!1,c=!0,f=-1;0!=e.grid&&(g=gx.fn.rowIsRemoved(e.grid,gx.fn.currentGridRow(e.grid)));!d&&!g&&(gx.csv.invalidControl=k,gx.csv.invalidId=a,c=!1,f=a);gx.csv.lastId=a;!1==gx.fn.isAccepted(k)&&(gx.evt.executeOnblur(a),k.getAttribute("gxhiddenonchange")!=k.value&&
(k.setAttribute("gxhiddenonchange",k.value),gx.evt.execOnchange(k)))}catch(m){gx.dbg.logEx(m,"gxapi.js","validControl - callback")}b.resolve({ret:c,ctrl:f});return b.promise()}),b.promise()}}catch(m){gx.dbg.logEx(m,"gxapi.js","validControl")}}b.resolve({ret:!0,ctrl:-1});return b.promise()},validate:function(a,d,g,b){var e=c.Deferred(),b=b||gx.O;gx.csv.anyError=!1;var f=gx.fn.validStruct(d,b);if(void 0==f)return e.resolve(!0),e.promise();gx.csv.refreshVars(f,b);if(null==f.fnc&&null==f.isvalid){if("SELECT"!=
a.tagName&&"checkbox"!=a.type&&gx.lang.isNumericType(f.type)&&!gx.lang.emptyObject(f.rgrid))for(var k=f.rgrid.length,d=0;d<k;d++)f.rgrid[d].filterVarChanged();e.resolve(!0);return e.promise()}try{if(-1!=d&&(g||"1"!=a.getAttribute("gxvalid"))){gx.evt.setProcessing(!0);gx.csv.currentId=d;gx.csv.validatingGrid=f.gxgrid;gx.csv.validating=!0;gx.csv.refreshVars(f);g=!1;g=!0==f.isuc?f.fnc.call(f.uc):null!=f.fnc?f.fnc.call(b):!0;1==b.AnyError&&(gx.lang.emptyObject(gx.csv.invalidControl)&&(gx.csv.invalidControl=
a),gx.csv.anyError=!0,b.AnyError=0);!0==gx.csv.anyError&&(g=!gx.csv.anyError);if(!1==g)return gx.evt.endValidation(),e.resolve(!1),e.promise();gx.csv.refreshControls(f,b);gx.csv.invalidateDeps(d,b);if(!gx.lang.emptyObject(f.rgrid)&&!gx.lang.emptyObject(f.hc)){k=f.rgrid.length;for(d=0;d<k;d++)f.rgrid[d].filterVarChanged()}if(!gx.csv.validateLostFocusOnly||b.fromValid===d){var m=gx.fn.isAccepted(a,b),d=function(){e.resolve(true);try{m?a.setAttribute("gxvalid","1"):a.setAttribute("gxvalid","0");gx.evt.endValidation()}catch(d){gx.dbg.logEx(d,
"gxapi.js","validate")}};if(null!=f.isvalid&&m){if(gx.pO.supportAjaxEvents){var l=f.isvalid,q=f.gxgrid?f.gxgrid.gridId:!1,o=q?gx.fn.currentGridRowImpl(q):"",p=b.isServerEvent(l);l?gx.evt.dispatcher.dispatch(b.getServerEventName(l),b,q,o,p).done(d).fail(d):(b[f.isvalid](),d());return e.promise()}b[f.isvalid]()}d()}else gx.evt.endValidation()}}catch(r){gx.dbg.logEx(r,"gxapi.js","validate")}e.resolve(!0);return e.promise()},invalidateForm:function(){if(1!=gx.O.AnyError)for(var a=gx.fn.controlIds(),d=
a.length,b=0;b<d;b++){var c=gx.fn.validStruct(a[b]);this.invalidateGXCtrl(gx.fn.getControlGridRef(c.fld,c.grid))}},invalidateGXCtrl:function(a){if(a){var d=a.getAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE);1==a.getAttribute("gxvalid")&&d!=a.value&&a.setAttribute("gxvalid","0")}},invalidateCtrl:function(a,d){try{this.invalidateGXCtrl(a);var b=gx.fn.validStruct(gx.O.focusControl);if(b&&0!=b.grid&&gx.evt.keyModifiesValue(d)){var c=gx.fn.controlRowId(a)||gx.fn.currentGridRowImpl(b.grid)||"0001";b.gxgrid.setRowModified(c)}}catch(e){gx.dbg.logEx(e,
"gxapi.js","invalidateCtrl")}},invalidateDeps:function(a,d){for(var b=gx.fn.controlIds(),c=b.length,e=0;e<c;e++){var f=b[e];if(f>a)for(var f=gx.fn.validStruct(f,d),k=f.ip?f.ip.length:0,m=0;m<k;m++)if(f.ip[m]==a)if(0==f.grid){var l=gx.fn.getControlGridRef(f.fld,f.grid);l&&l.setAttribute("gxvalid","0")}else{var q=gx.fn.getGridObj(f.grid);if(q)for(var o=q.grid.rows.length,p=0;p<o;p++){var l=q.grid.rows[p],r=l.gxDeleted(),s=l.gxExists();!r&&s&&(q.setRowModified(l.gxId),(l=gx.fn.getControlRef(f.fld+"_"+
l.gxId))&&l.setAttribute("gxvalid","0"))}}}},setFormatError:function(a,d){a.id&&(d||"undefined"==typeof d?(this.gxFormatErrors[a.id]=!0,a.GXFormatError=!0):(delete this.gxFormatErrors[a.id],a.GXFormatError=!1))},anyFormatError:function(){return!1===gx.lang.emptyObj(this.gxFormatErrors)},disableFocusCondition:function(){if("undefined"==typeof gx.fn.validStruct(gx.O.focusControl))return!1;try{var a=gx.getVar("Gx_mode");0<gx.csv.lastGrid&&gx.setVar("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid));var d=gx.fn.validStruct(gx.O.focusControl);if(d&&d.nac&&!0==d.nac.call(gx.O)){cn=gx.fn.getControlIndex(gx.csv.lastControl)+1;var b=gx.fn.searchFocusFwd(cn);null!=b&&gx.fn.setFocus(b);gx.setVar("Gx_mode",a);return!0}gx.setVar("Gx_mode",a)}catch(c){}return!1},loadScreen:function(){try{gx.csv.pkDirty&&(gx.csv.pkDirty=!1,gx.fn.clearOldKeys(),gx.evt.execEvt(gx.csv.cmpCtx,!1,gx.csv.cmpCtx+"ELSCR.",gx.evt.dummyCtrl,null,!0))}catch(a){gx.dbg.logEx(a,"gxapi.js","loadScreen")}},CTRL_ROW_INDEX_REGEXP:/(.*)_([0-9]{4})+$/,
ctxControlId:function(a,d){if(gx.O&&gx.O.IsMasterPage&&0!=a.indexOf("MP")){var b=this.CTRL_ROW_INDEX_REGEXP.exec(a);if(b&&1<b.length)return b[1]+"_MPAGE"+(2<b.length?"_"+b[2]:"")}d=d||this;return 0==a.indexOf(d.cmpCtx)?a:d.cmpCtx+a},isProperty:function(a){return a instanceof Array&&2==a.length||"object"==typeof a&&"undefined"!=typeof a[0]&&"undefined"!=typeof a[1]?!0:!1},checkRowChange:function(a,d,b,e){var f=c.Deferred();try{var j=gx.fn.validStruct(a,b);if("undefined"!=typeof j){var k=j.grid;if(0!=
k){var m=gx.fn.currentGridRowImpl(k);if(m&&(m!=e||d)&&1<m.length&&e&&1<e.length){gx.csv.rowChanged=!0;var l=b.Gx_BScreen;b.Gx_BScreen=1;gx.csv.validGridRowChange(k,m,b,e).done(function(a){a&&(a=b.getGridById(k,e))&&a.instanciateRow(m);b.Gx_BScreen=l;f.resolve(!0)})}else f.resolve(!1);void 0!=m&&gx.fn.setCurrentGridRow(k,m)}else f.resolve(!1)}else f.resolve(!1)}catch(q){gx.dbg.logEx(q,"gxfrmutl.js","checkRowChange")}return f.promise()},validGridRow:function(a,d){void 0!=d&&gx.fn.setCurrentGridRow(a,
d);var b=gx.fn.firstGridControl(a),c=gx.fn.lastGridControl(a);gx.csv.validControls(b,c+1,!0,gx.O)},validGridRowChange:function(a,d,b,e){var f=c.Deferred();void 0!=e&&gx.fn.setCurrentGridRow(a,e);var j=gx.fn.firstGridControl(a,b),e=gx.fn.lastGridControl(a,b);gx.csv.validControls(j,e+1,!0,b).done(function(b){(b||!gx.csv.stopOnError)&&gx.csv.changeGridRow(a,j,d);f.resolve(b)});return f.promise()},changeGridRow:function(a,d,b){gx.csv.lastId=d;gx.O.fromValid>d&&(gx.O.fromValid=d);gx.csv.lastRow[a]=b;Gx_BScreen=
1},targetRowIsMod:function(a){return(a=gx.fn.validStruct(a))?gx.fn.gridRowIsMod(a.lvl,gx.fn.currentGridRow(a.grid)):!1},refreshVars:function(a,d){for(var b=a.ip?a.ip.length:0,c=0;c<b;c++)try{"function"==typeof gx.fn.validStruct(a.ip[c],d).c2v&&gx.fn.validStruct(a.ip[c],d).c2v()}catch(e){gx.dbg.logEx(e,"gxapi.js","refreshVars")}},refreshControls:function(a,d){for(var b=a.op?a.op.length:0,c=0;c<b;c++)try{var e=gx.fn.validStruct(a.op[c],d);e.v2c();var f=null;(f=0==e.grid?gx.dom.el(gx.csv.ctxControlId(e.fld)):
gx.fn.getControlGridRef(e.fld,e.grid))&&f.setAttribute("gxvalid","0")}catch(k){gx.dbg.logEx(k,"gxapi.js","refreshControls")}b=a.ucs?a.ucs.length:0;for(c=0;c<b;c++)try{gx.fn.validStruct(a.ucs[c],d).uc.execV2CFunctions(!0)}catch(m){gx.dbg.logEx(m,"gxapi.js","refreshControls")}},setValidValues:function(a,d,b){var c=gx.json.evalJSON(b[b.length-1]),e={},a={fields:a,msgs:c};gx.O.cmpCtx?e[gx.O.cmpCtx]=a:e.MAIN=a;gx.fn.setErrorViewer(e);if(!gx.O.AnyError)for(var f=!1,e=d.length,a=0;a<e;a++){var k=d[a],c=
b[a];if(this.isProperty(k)){var m=gx.fn.vStructForVar(k[0])||gx.O.getValidStructFld(k[0]);null!=m&&gx.fn.setCtrlProperty(m.fld,k[1],c)}else if(m=gx.fn.validStruct(this.currentId),!gx.lang.emptyObject(m)&&!gx.lang.emptyObject(m.hc)&&(m.hc==k?(gx.O[m.hc]=c,gx.fn.setHidden(this.cmpCtx+"GXH_"+m.fld,c)):m.hd==k&&(gx.O[m.hd]=c)),m=gx.fn.vStructForVarWId(k,this.currentId),gx.lang.emptyObject(m)){m=gx.fn.vStructForHC(k);if(null!=m){var l="";0!=m.grid&&(l="_"+gx.fn.currentGridRow(m.grid));gx.fn.setHidden(this.cmpCtx+
"GXHC"+m.fld+l,c)}m=gx.fn.gridObjFromGxO(k);void 0!=m?(f=!0,m.loadGrid(c)):gx.fn.saveLvlOldParm(k,c)&&(gx.setVar(k,c),gx.fn.setGridHidden(k,c))}else if(k=gx.fn.screen_CtrlRef(m.fld),!gx.lang.emptyObject(k)&&c instanceof Object&&("SELECT"==k.tagName?(-1!=k.selectedIndex&&gx.fn.invalidEmptyValue(c)&&(c.s=k.options[k.selectedIndex].value),l=gx.dom.id(k),gx.fn.loadComboBox(l,c.v),gx.fn.setComboBoxValue(l,c.s)):gx.lang.emptyObject(c.s)||(c.s=gx.fn.trimSelectValue(c.s,m.type)),l=gx.fn.selectedDescription(c,
m.type),c=gx.lang.emptyObject(c.s)&&!gx.lang.emptyObject(k.value)?k.value:"SPAN"==k.tagName&&!gx.lang.emptyObject(c.s)&&!gx.lang.emptyObject(l)?l:c.s,gx.fn.setControlValue_span_safe(this.cmpCtx+m.fld,c,0)),m.v2v)m.v2v(c),m.v2c()}gx.O.refreshOlds();gx.fn.enableDisableDelete();f&&gx.dom.indexElements()},_deinit:function(){this.lastRow=[];this.lastEvtRow=this.lastEvtResponse=this.validatingGrid=this.validatingUC=this.validActivatedControl=this.invalidForcedCtrl=this.invalidControl=this.focusControl=
this.userFocus=this.lastActiveControl=this.lastControl=null}},json:{_nonSerializables:[],setNonSerializable:function(a){this.isNonSerializable(a)||this._nonSerializables.push(a)},isNonSerializable:function(a){for(var d=this._nonSerializables.length,b=0;b<d;b++)if(this._nonSerializables[b]==a)return!0;return!1},evalJSON:function(a){try{return eval("("+a+")")}catch(d){gx.dbg.logEx(d,"gxapi.js","evalJSON")}return a},serializeJson:function(a,d){var b=this.objToJson(a);if(null===b)b=this.arrayToJson(a);
else return b;if(null===b){if("function"==typeof a)return null;var b=[],c;for(c in a)if(d||!this.isNonSerializable(c)){var e=this.objToJson(c,!0);if(null!==e){var f=this.serializeJson(a[c]);"string"==typeof f&&b.push(e+":"+f)}}return"{"+b.join(",")+"}"}return b},objToJson:function(a,d){var b=typeof a;if(d){if(!gx.lang.emptyObject(a)){if("string"==b)return gx.text.escapeString(a);if("number"==b)return'"'+a+'"'}}else{if("undefined"==b)return b;if("string"==b)return gx.text.escapeString(a);if("number"==
b||"boolean"==b)return a.toString();if(null===a)return"null";if("function"==typeof a.json&&(b=a.json(),a!==b))return this.serializeJson(b)}return null},arrayToJson:function(a){if("function"!=typeof a&&"number"==typeof a.length){for(var d=[],b=a.length,c=0;c<b;c++){var e=this.serializeJson(a[c]);"string"!=typeof e&&(e="undefined");d.push(e)}return"["+d.join(",")+"]"}return null},objFromJson:function(a,d){var b=this.evalJSON(d);if(a instanceof Array&&b instanceof Array)for(;a.length>b.length;)a.shift();
else for(var c in a)"function"!=typeof a[c]&&delete a[c];for(c in b)a[c]=b[c]}},dbg:{lastTime:0,enabled:!1,performance:!1,dbgWin:null,outputFunc:null,hshTimes:null,performanceLog:[],_init:function(){this.hshTimes=[];this.hshTimes.onload=(new Date).getTime()},logDebug:function(a){this.enabled&&this.write(a)},logMsg:function(a){(this.enabled||window.console)&&this.write(a)},logEx:function(a,d,b){if(this.enabled||window.console){var c="";if(a&&a instanceof Error)c="["+a.name+": "+this.exTxt(a),c=c+(d?
", file: "+d:"")+((b?", func: "+b:"")+"]"),a.fileName&&(c+=" FileName:"+a.fileName),a.lineNumber&&(c+=" ln:"+a.lineNumber);else try{c=""+a}catch(e){c="[Unknown Error]"}this.write(c,!0)}},exTxt:function(a){return!a?"Unknown Error":a.message?a.message:a.description?a.description:a.toString()},write:function(a,d){if(this.enabled)try{null==this.dbgWin&&(this.dbgWin=window.open("","debug","scrollbars=1,height=900,width=900")),gx.dom.write(a+"<BR>",this.dbgWin.document)}catch(b){}window.console&&(d?console.error(a):
console.log(a))},writeT:function(a){var d=new Date,b=d.getTime(),c=this.lastTime;0<this.lastTime&&(c=(b-this.lastTime)/1E3);this.lastTime=b;a=d.toString()+" (+"+c+"seg): "+a;this.write(a)},logPerf:function(a,d){if(this.performance)if(void 0===this.hshTimes[a])this.hshTimes[a]=(new Date).getTime();else{var b=((new Date).getTime()-this.hshTimes[a])/1E3;delete this.hshTimes[a];0<b&&this.performanceLog.push((void 0==d?a:d)+":("+b+"seg)")}},printPerformanceLog:function(){if(this.performance){for(msg in this.performanceLog)"string"==
typeof this.performanceLog[msg]&&(this.outputFunc&&this.outputFunc(this.performanceLog[msg]),this.write(this.performanceLog[msg]));this.performanceLog=[]}}},http:{STATE_UNSENT:0,STATE_DONE:4,STATUS_OK:200,STATUS_UNAUTHORIZED:401,STATUS_FORBIDDEN:403,STATUS_SESSION_TO:440,iframeName:"gxPostIFrame",viewState:null,viewStateLoaded:!1,oldState:null,useBase64State:!1,useStateSignature:!1,lastStatus:0,lastResponse:"",modes:{none:0,full:1,call:2,retval:3},clearState:function(){this.viewState=null;this.viewStateLoaded=
!1},loadState:function(){gx.dbg.logPerf("loadState");this.viewState={};this.viewStateLoaded=!1;var a=gx.dom.el("GXState");if(a){var d=a=a.value;this.useBase64State&&(d=gx.base64.decode(a));this.viewState=gx.json.evalJSON(d);this.viewStateLoaded=!0}gx.dbg.logPerf("loadState","GXState Loaded")},saveState:function(a){if(this.viewState){var d=gx.json.serializeJson(this.viewState,a),a=d;this.useBase64State&&(a=gx.base64.encode(d));d=gx.dom.el("GXState");null==d?gx.dom.createInput("GXState","hidden"):this.oldState=
d.value;gx.fn.setControlValue_impl("GXState",a);this.useStateSignature&&(gx.http.setStateHsh(a),gx.http.setHsh())}},setStateHsh:function(a){null==gx.dom.el("GXHSH12")&&gx.dom.createInput("GXHSH12","hidden");a=gx.MD5.getHsh(a);gx.fn.setControlValue_impl("GXHSH12",a)},setHsh:function(){for(var a=gx.pO.WebComponents.length,d=0;d<a;d++)gx.http.setObjectHsh(gx.pO.WebComponents[d]);gx.http.setObjectHsh(gx.pO)},setObjectHsh:function(a){var d=a.getControlIdsh();if(null!=d){var b="";a.IsComponent&&null!=a.CmpContext&&
(b=a.CmpContext);for(var c="",e=0;e<d.length;e++)if((validStruct=a.getValidStruct(d[e]))&&"function"==typeof validStruct.val)var f=gx.fn.getControlValue_impl(b+validStruct.fld),c="checkbox"==validStruct.ctrltype&&""==gx.text.trim(f)?c+validStruct.val():c+f;gx.http.createHsh(b+"GXHSH11",c)}},createHsh:function(a,d){null==gx.dom.el(a)&&gx.dom.createInput(a,"hidden");var b=gx.MD5.getHsh(d);gx.fn.setControlValue_impl(a,b)},refreshState:function(){null!=this.oldState&&(gx.dom.el("GXState").value=this.oldState,
this.oldState=null)},notification:function(){var a=null,d=null,b=null;return{getDelay:function(){return 200},isVisible:function(){var a=gx.http.notification.node();return null!=a&&"none"!=a.style.display},node:function(){if(!a&&(a=gx.dom.byId("gx_ajax_notification"),!a)){var d=gx.ajax.getImageUrl(gx,"indicatorImage",!0),c;c='<div id="gx_ajax_notification" style="display:none;position:absolute;text-align:center;vertical-align:top;top:0px;left:0px;"><div style="background-color:#BEBEBE;filter:alpha(opacity=50);opacity:0.5;position:absolute;top:0px;left:0px;width:100%;height:100%;">';
gx.grid.drawAtServer&&(c+='<div onclick="gx.ajax.enableForm()" style="display:none;cursor:hand;font-size:9;position:absolute;top:0px;left:0px;"><u>Enable Form</u></div>');a=gx.html.nodesFromText(c+"</div>"+('<img id="gx_ajax_indicator" src="'+d+'" width="16px" height="16px" align="absmiddle"/></div>'))[0];document.body.appendChild(a);gx.popup.setZIndex(a);gx.grid.drawAtServer&&(b=a.firstChild.firstChild)}return a},show:function(){gx.dom.addClass(document.body,"gx-form-disabled");var a=gx.http.notification.node();
a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px";a.style.display="block";d=setInterval(gx.http.notification.move,50);gx.evt.attach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&setTimeout(gx.http.notification.showCloseLink,5E3)},hide:function(){gx.http.notification.node().style.display="none";clearInterval(d);d=null;gx.evt.detach(window,"resize",gx.http.notification.resize);gx.grid.drawAtServer&&gx.http.notification.hideCloseLink();gx.dom.removeClass(document.body,
"gx-form-disabled")},move:function(){var a=gx.http.notification.node(),d=parseInt(a.style.top),d=(gx.dom.documentScroll().scrollTop-d-10)/3+3+d;a.style.top=d+"px"},resize:function(){var a=gx.http.notification.node();a.style.width=gx.html.viewportWidth()+"px";a.style.height=gx.html.viewportHeight()+"px"},showCloseLink:function(){b&&(b.style.display="block")},hideCloseLink:function(){b&&(b.style.display="none")},cleanup:function(){a&&gx.dom.removeControlSafe(a);d=b=a=null}}}(),getCookie:function(a){for(var a=
a+"=",d=document.cookie.split(";"),b=d.length,c=0;c<b;c++){for(var e=d[c];" "==e.charAt(0);)e=e.substring(1,e.length);if(0==e.indexOf(a))return e.substring(a.length,e.length)}return null},setCookie:function(a,d,b){b=b||1;b=new Date((new Date).getTime()+864E5*b);document.cookie=a+"="+escape(d)+"; expires="+b.toGMTString();return this.getCookie(a)==d},checkResponseStatus:function(a){return a.status==this.STATUS_FORBIDDEN?!1:a.status==this.STATUS_SESSION_TO||this.isBadResponse(a)?(gx.http.reloadOnTimeout(),
!0):a.status==this.STATUS_UNAUTHORIZED?(gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore?gx.http.reload():gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.warn&&gx.http.reloadOnTimeout(),!0):!1},isSessionTimeoutError:function(a,d){return!gx.gen.isDotNet()&&(d&&a&&gx.pO.AjaxSecurity)&&a.readyState==this.STATE_DONE&&("NS_ERROR_FAILURE"==d.name&&2147500037==d.result||"Error"==d.name&&-2146697209==d.number||"NETWORK_ERR"==d.name&&101==d.code)?!0:!1},reloadOnTimeout:function(){if(gx.pO.AjaxSecurity&&
confirm(gx.getMessage("GXM_sessionexpired")))return gx.http.reload(),!0;gx.ajax.enableForm();return!1},reload:function(a){""==document.location.hash?this.redirect(location.href,!1,a):document.location.reload()},redirect:function(a,d,b){gx.evt.setProcessing(!0);var c=gx.popup.getPopup();if(null!=c&&(c=c.window.gx.popup.lvl,-1!=c))var e=-1!=a.indexOf("?")?",":"?",e=e+encodeURIComponent("gxPopupLevel="+c+";"),a=a+e;gx.ajax.isabsoluteurl(a)||(a=gx.ajax.absoluteurl(a));d?gx.evt.redirecting=!0:setTimeout(function(){gx.ajax.enableForm()},
200);gx.spa.started&&!b?(gx.spa.redirect(a),gx.ajax.enableForm()):location.href=a},getRequest:function(){var a=null;window.XMLHttpRequest&&(a=new XMLHttpRequest);if(!a)try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(d){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}return a},postDataFormat:{HTTP:0,JSON:1},getPostData:function(a,d){var d=d||gx.http.postDataFormat.HTTP,b=d==gx.http.postDataFormat.HTTP?[]:{};if(a.reqData)b=a.reqData;else for(var e=a.formNode,e="Form"==e.tagName?e.elements:c("input,textarea,select"),
f=e.length,j=0;j<f;j++){var k=gx.http.elementPostData(e[j],d);null!=k&&(d==gx.http.postDataFormat.HTTP?b.push(k):b[k[0]]=k[1])}gx.lang.isArray(b)&&d==gx.http.postDataFormat.HTTP&&(b=b.join("&")+"&");return b},elementPostData:function(a,d){if(gx.json.isNonSerializable(a.name)||"FIELDSET"==a.tagName)return null;var b="";if("select-multiple"==a.type)for(var c=a.options.length,e=0;e<c;e++)a.options[e].selected&&(b=a.options[e].value);else if("radio"==a.type||"checkbox"==a.type)if(a.checked)b=a.value;
else{if("radio"==a.type)return null}else b=this.element_gxvalue(a);return d==gx.http.postDataFormat.HTTP?encodeURIComponent(a.name)+"="+encodeURIComponent(b):[a.name,b]},element_gxvalue:function(a){return a.gxtype&&"dtime"==a.gxtype.type?(dt=new gx.date.gxdate(a.value,gx.dateFormat),dt.HasTimePart=0<a.gxtype.dec,gx.date.dttoc(dt,a.gxtype.len,a.gxtype.dec)):a.value},doHandleRequest:function(a,d){a.readyState==this.STATE_DONE&&(gx.evt.setReady(!1),gx.evt.setProcessing(!1,!gx.csv.validating),a.status==
this.STATUS_OK||d.handleAllStatusCodes?this.doCallHandler(a,d):gx.http.checkResponseStatus(a)||gx.lang.doCallTimeout(gx.dom.write,document,[a.responseText],50),d.always&&d.always.call(d.obj||window,a,d),window.gx&&(gx.evt.setReady(!0),gx.dbg.logPerf("execEvt","Event Executed"),gx.dbg.printPerformanceLog()))},onRequestError:function(a,d){d.error&&d.error.call(d.obj||window,a,d);d.always&&d.always.call(d.obj||window,a,d);gx.evt.setProcessing(!1,!gx.csv.validating);a.readyState==this.STATE_DONE?gx.http.checkResponseStatus(a):
this.isBadResponse(a)&&gx.http.reloadOnTimeout()},isBadResponse:function(a){return a.status==this.STATE_UNSENT&&gx.lang.emptyObject(a.responseText)?!0:!1},doCall:function(a){!a.handler&&"function"==typeof a.load&&(a.handler=a.load);"boolean"!=typeof a.sync&&(a.sync=!1);a.method||(a.method="POST");if(a.multipart&&"POST"==a.method)this.doMultipartPost(a);else{var d=this.getRequest();if(null!=d){if("function"==typeof a.handler&&!a.sync){var b=gx.http.doHandleRequest.closure(this,[d,a]),c=gx.http.onRequestError.closure(this,
[d,a]);gx.util.browser.isIE()?d.onreadystatechange=b:(d.onload=b,d.onerror=c)}b=null;"POST"==a.method&&(b=gx.http.getPostData(a));c=!1!==a.avoidCache?this.uncache(a.url):a.url;d.open(a.method,c,!a.sync);!1!==a.ajaxHeader&&d.setRequestHeader(gx.ajax.reqHeader,"1");"POST"==a.method&&d.setRequestHeader("Content-Type",a.contentType?a.contentType:"application/x-www-form-urlencoded");gx.sec.secToken&&(gx.AjaxSecurity&&gx.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&d.setRequestHeader(gx.sec.secTokenName,
gx.sec.secToken);this.setSecurityToken(d,a.gxO);a.beforeSend&&a.beforeSend.call(a.obj||window,d);try{d.send(b)}catch(e){gx.dbg.logEx(e,"gxapi.js","doCall")}"function"==typeof a.handler&&a.sync&&gx.http.doHandleRequest(d,a);return d}}return null},doCallHandler:function(a,d){d.obj?d.handler.call(d.obj,null,a.responseText,a):d.handler(null,a.responseText,a);if(window.gx&&"function"===typeof d.onReady)d.onReady()},doMultipartPost:function(a){this.getPostIFrame().gxPostInfo=a;var d=a.formNode;a.oldAction=
d.getAttribute("action");d.setAttribute("action",a.url);a.oldTarget=d.getAttribute("target");d.setAttribute("target",this.iframeName);d.submit()},setSecurityToken:function(a,d){if(d&&d.ajaxSecurityToken){var b="GX_AUTH_"+(d.CmpContext?d.CmpContext:"")+d.ServerClass,b=b.toUpperCase();a.setRequestHeader("X-GXAUTH-TOKEN",gx.fn.getHidden(b))}},useReadyStateEvent:function(){return gx.util.browser.isIE()&&11>gx.util.browser.ieVersion()},iFrameloadEventName:function(){return this.useReadyStateEvent()?"readystatechange":
"load"},getPostIFrame:function(){var a=this.iframeName,d=gx.dom.el(a);d&&d.frameElement&&(d=d.frameElement);d||(d=document.createElement("div"),d.innerHTML='<iframe name="'+a+'" src="about:blank">',document.body.appendChild(d),d=d.firstChild,document.body.appendChild(d),window[a]=d,d.name=a,d.setAttribute("name",a),d.id=a,d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.style.height="1px",d.style.width="1px",d.style.visibility="hidden");gx.evt.attach(d,this.iFrameloadEventName(),
gx.http.iframeOnload);return d},iframeOnload:function(){var a=gx.dom.el(gx.http.iframeName);if(!(gx.http.useReadyStateEvent()&&"complete"!=a.readyState)&&(gx.evt.setProcessing(!1,!gx.csv.validating),a||(a=window.frames[gx.http.iframeName]),a&&a.frameElement&&(a=a.frameElement),a)){gx.http.useReadyStateEvent()&&(a.src="about:blank",gx.evt.detach(a,gx.http.iFrameloadEventName(),gx.http.iframeOnload));var d=a.gxPostInfo,b=d.formNode;b.setAttribute("action",d.oldAction);b.setAttribute("target",d.oldTarget);
if(a=a.contentDocument?a.contentDocument:a.contentWindow.document)b=a.body,1==b.childNodes.length&&"#text"==b.childNodes[0].nodeName?(a=gx.base64.decode(gx.http.multipartResponse(b)),d.handler(null,a,d)):document.write(a.documentElement.innerHTML)}},multipartResponse:function(a){try{for(var d=a.childNodes[0];"#text"!=d.nodeName;)d=d.childNodes[0];var b=d.nodeValue;if(!gx.util.browser.isIE())for(d=d.nextSibling;d;)b+=d.nodeValue,d=d.nextSibling;return b}catch(c){return gx.dbg.logEx(c,"gxapi.js","multipartResponse"),
""}},uncache:function(a){var d=(new Date).getTime(),b=a.indexOf("?");return a+(0<b?b<a.length-1?",":"":"?")+"gx-no-cache="+d},callBackend:function(a,d,b,c,e,f,k,m,l,q,o){var p=this.getRequest(),o=o||{};if(p){try{var r=gx.O;f||r.startFeedback();k="undefined"!=typeof k?k:"GET";m="undefined"!=typeof m?m:null;q="undefined"!=typeof q?q:!1;l||(d=this.uncache(d));p.open(k,d,q);p.setRequestHeader(gx.ajax.reqHeader,"2");for(var s in o)p.setRequestHeader(s,o[s]);"POST"==k?p.setRequestHeader("Content-Type",
"application/x-www-form-urlencoded"):gx.sec.secToken&&(gx.O.AjaxSecurity&&gx.pO.OnSessionTimeout==gx.ajax.timeoutActions.ignore)&&p.setRequestHeader(gx.sec.secTokenName,gx.sec.secToken);p.send(m);f||r.endFeedback();this.lastStatus=p.status;this.lastResponse=p.responseText}catch(u){window.status="GXAjax HTTP error: "+u.message}window.status="";if(p.readyState!=this.STATE_DONE||p.status!=this.STATUS_OK)gx.http.checkResponseStatus(p)||(window.status="GXAjax HTTP error: ("+p.status+") - "+p.statusText,
gx.dbg.logEx(p.responseText));else if(e!=this.modes.none)if(this.lastResponse&&0<this.lastResponse.length&&"<"!=this.lastResponse.charAt(0)){this.lastStatus=0;try{if(e==this.modes.full)this.handleFull(this.lastResponse,a,b);else if(e==this.modes.call)return this.handleCall(this.lastResponse,a,b);return this.handleRetVal(this.lastResponse,a,b,c)}catch(t){gx.dbg.logEx(t,"gxapi.js","callBackend")}}else window.status="GXAjax HTTP error: (bad response format)"}},handleFull:function(a){gx.http.postHandler(null,
a,{status:200,responseText:""})},handleCall:function(a,d,b){if(d)return eval(d+a+b)},handleRetVal:function(a,d,b,c){var a=gx.json.evalJSON(a),e=a[0];this.lastStatus=a[1];void 0==this.lastStatus&&(this.lastStatus=0);if(d&&(c||null==this.lastStatus||0==this.lastStatus))return eval(d+gx.lang.arrayToSource(e)+b)},postHandler:function(a,d,b){try{if(gx.evt.enter=!1,gx.csv.lastEvtResponse=null,200>b.status||299<b.status)gx.dom.write(b.responseText);else{var c=gx.json.evalJSON(d);null==c?gx.dom.write(d.toString()):
(gx.http.refreshState(),gx.csv.lastEvtResponse=c,gx.fn.forceEnableControls(!0),gx.ajax.setPostResponse(c)||gx.fx.obs.notify("gx.onafterevent",[c]))}}catch(e){gx.dbg.logEx(e,"gxapi.js","postHandler")}},formatLink:function(a,d){a=gx.ajax.objectUrl(a);if(d&&0<d.length)for(var a=a+"?",b=d.length,c=0;c<b;c++)0<c&&(a+=","),a+=encodeURIComponent("function"==typeof d[c].getUrlVal?d[c].getUrlVal():d[c]);return a},loadScripts:function(a,d,b){"undefined"==typeof b&&(b=0);b>=a.length?d():gx.http.loadScript(a[b],
function(){gx.http.loadScripts(a,d,b+1)})},loadScript:function(a,d){var b=gx.dom.byTag("head")[0],c=document.createElement("script");c.type="text/javascript";c.src=a;"function"==typeof d&&(c.addEventListener?c.addEventListener("load",d,!1):c.onreadystatechange=function(){("loaded"==c.readyState||"complete"==c.readyState)&&d()});b.appendChild(c)},loadStyle:function(a,d,b,c){if(c=c?gx.dom.el(c):null)c.href=a;else{var e=gx.dom.byTag("head")[0],c=document.createElement("link");c.rel="stylesheet";c.type=
"text/css";c.href=a;"function"==typeof d&&(c.onload=d);b?(a=gx.dom.byId("gxtheme_css_reference"),e.insertBefore(c,a)):e.appendChild(c)}},loadStyles:function(){var a=gx.fn.getHidden("GX_STYLE_FILES");if(!gx.lang.emptyObject(a))for(var d=0;d<a.length;d++){var b=a[d];(new gx.util.Url(b)).isRelative()&&(b=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+b,!1));gx.cache.fileLoaded(b)||(gx.cache.addRemoteFile(b),this.loadStyle(b))}},doCommands:function(){var a=gx.fn.getHidden("GX_SRV_COMMANDS");gx.lang.emptyObject(a)||
gx.ajax.dispatchCommands(a)}},stackId:function(a){return"stack_"+gx.util.getWindowInfo().frameId+a},stackSupported:function(){return(gx.evt.clinav||"true"==gx.fn.getHidden("GX_CLI_NAV"))&&gx.call_stack_storage.supported},storage:function(a){this._store=window.sessionStorage;this._prefix=a;this.supported=!1;this.set_string=function(a,d){this.supported&&(this._store[this._prefix+a]=d)};this.get_string=function(a){return this.supported?this._store[this._prefix+a]:null};this.set=function(a,d){this.set_string(a,
gx.json.serializeJson(d))};this.get=function(a){return(a=this.get_string(a))?gx.json.evalJSON(a):null};this.remove=function(a){this.supported&&this._store.removeItem(this._prefix+a)};if("undefined"!=typeof window.sessionStorage)try{window.sessionStorage.setItem("storage.test",!0),window.sessionStorage.removeItem("storage.test"),this.supported=!0}catch(d){gx.http.setCookie("GXLocalStorageSupport","false",1)}},_setBasePath:function(){for(var a=gx.dom.scripts(),d=null,b=0,c=a.length;b<c;b++)if(0<=a[b].indexOf("gxgral.js")||
0<=a[b].indexOf("gxapiSD.js")){d=a[b];break}a="";if(!gx.ajax.isRelativeToHost(d)||gx.ajax.isabsoluteurl(d))b=location.pathname.lastIndexOf("/"),a=1<b?location.pathname.substring(1,b):"";else{var d=d.split("/"),e=location.pathname.split("/");d.splice(d.length-1,1);e.splice(e.length-1,1);b=0;for(c=e.length;b<c;b++)if(e[b]==d[b]||void 0===d[b])a=a+(""==a?"":"/")+e[b];else break}gx.basePath=a},objectLoad:function(a){var d=c.Deferred();if(!gx.evt.execLoad)return d.resolve(),d.promise();void 0===gx.runtimeTemplates&&
(gx.runtimeTemplates=0<c("div[data-abstract-form]").length);gx.plugdesign.init().done(function(){var b=true;gx.fx.obs.notify("gx.onready");if(typeof gx.StorageTimeZone!="undefined"&&gx.StorageTimeZone!=gx.NULL_TIMEZONEOFFSET){var c=jstz.determine().name();!gx.lang.emptyObject(c)&&(gx.http.getCookie("GxTZOffset")!=c&&gx.http.setCookie("GxTZOffset",c,30))&&gx.http.reload()}gx.sec.loadKey();gx.setTheme();gx.fx.obs.addObserver("webcom.render",this,function(a){if(a=a.getContainer()){gx.setTheme(a);b||
gx.plugdesign.applyTemplateObject("#"+a.id)}});gx.fx.obs.addObserver("grid.onafterrender",this,function(a){a.ownerGrid.parentGrid||gx.dom.fixes.fixTableResets(a.container)});delete gx.evt.redirecting;gx.ajax._init();gx.grid._init();gx.evt.attach(window,"unload",gx.evt.onunload);gx.fn.setFocusInit();gx.http.notification.node();gx.cache._init();gx.fn.installComponents(true);gx.http.loadStyles();a&&gx.fn.loadJsonGrids(a,false);gx.fn.objectOnload();gx.dom.indexElements();gx.fn.doAttachs();document.gxReadyState=
"complete";gx.util.autoRefresh.install();(!gx.util.browser.isIE()||gx.util.browser.ieVersion()>8)&&gx.fn.setOpacity("reset","body");gx.evt.setProcessing(false);gx.fx.obs.notify("gx.onload");gx.evt.userOnload();gx.fn.setFocusOnload();gx.fx.delayedSuggest();gx.http.doCommands();gx.evt.setReady(true);gx.evt.userReadyCnt=0;b=false;d.resolve()});return d.promise()},objectUnload:function(a){gx.fx.obs.notify("gx.onunload");gx.http.saveState(!0);gx.evt.clearHooks();gx.fx.obs.removeAll();gx.http.notification.cleanup();
gx.fn.objectOnUnload(a);gx._deinit()},_init:function(){gx.dbg._init();gx.dom._init();gx.base64._init();gx.sec._init();gx.util._init();gx.evt._init();gx._setBasePath();gx.date._init();gx.html.controls._init();gx.popup._init();gx.geolocation._init();gx.call_stack_storage=new gx.storage("gx_call_stack")},_deinit:function(){if(gx.popup.ispopup()&&gx.evt.execLoad||gx.dom.shouldPurge()){gx.dom.purgeElement(document.body);gx.dom.purgeElement(gx.dom.form());for(var a=["onblur","onclick","onfocus","onchange"],
d=gx.dom.form().elements,b=0,c=d.length;b<c;b++)gx.dom.purgeElement(d[b],a);d=gx.dom.byTag("span");b=0;for(c=d.length;b<c;b++)gx.dom.purgeElement(d[b],a);d=gx.dom.byTag("img");b=0;for(c=d.length;b<c;b++)gx.dom.purgeElement(d[b],a)}gx.msg={};gx.dom._deinit();gx.csv._deinit();gx.evt._deinit();gx.grid._deinit();gx.O=null;gx.pO=null},reinit:function(a){gx.pO.clean(a);gx.objectUnload(a);gx._init()}}}(jQuery);
gx.plugdesign=function(c){var f={},e=!1,b,a,d=1;return{init:function(){return gx.plugdesign.applyTemplateObject()},getDOMContext:function(a,d,b,e,f){d={};d.text=c(a).text();c.each(a.attributes,function(a,b){d[b.name]=b.value});b&&(d.outerHTML=a.outerHTML);e&&(d.innerHTML=a.innerHTML);f&&(d=f.call(this,d,a)||d);return d},assingUserAPI:function(a,d){d.fnc_isRO=a.fnc_isRO},getElements:function(a,d){if("function"==typeof a.selector)return a.selector(d||"");d=d&&!a.global?d+" "+a.selector:a.selector;return c(d)},
applyTemplateOnElement:function(a,d){if("string"==typeof a&&(a=f[a],!a))return;var b=gx.plugdesign.getDOMContext(d,b,a.outerHTML,a.innerHTML,a.setContext);!a.compiledTemplate&&a.template&&(a.compiledTemplate=Mustache.compile(a.template));if(a.compiledTemplate){var c=a.compiledTemplate(b);"inner"==a.applyTo?d.innerHTML=c:d.outerHTML=c}a.initialize&&a.initialize(b);if(a.listeners){var e=a.listeners;e.before&&gx.fx.obs.addObserver("gx.control.onbeforepropertychange",this,function(d){var c=typeof e.control==
"function"?e.control(b):e.control;if((d.control.id==c||d.control.tagName=="INPUT"&&d.control.type=="radio"&&d.control.name==c)&&typeof e.before[d.property]=="function"){c=e.before[d.property].call(a,d.control,d.value)===true;d.cancel=c}});e.after&&gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,function(d){var c=typeof e.control=="function"?e.control(b):e.control;(d.control.id==c||d.control.tagName=="INPUT"&&d.control.type=="radio"&&d.control.name==c)&&typeof e.after[d.property]=="function"&&
e.after[d.property].call(a,d.control,d.value)})}},applyTemplateSelection:function(a,d){c.each(this.getElements(a,d),function(d,b){b&&gx.plugdesign.applyTemplateOnElement(a,b)})},applyClassMapOnElement:function(a,d){var b;b=gx.plugdesign.getDOMContext(d,b,!1,!1,a.setContext);if(a.first){var e=c(d).attr("class")||"";c(d).attr("class",a.cssClass+" "+e.replace(a.cssClass,""))}else gx.dom.addClass(d,a.cssClass);a.initialize&&a.initialize(b)},applyClassSelection:function(a,d){c.each(this.getElements(a,
d),function(d,b){b&&(gx.plugdesign.applyClassMapOnElement(a,b),gx.plugdesign.assingUserAPI(a,b),gx.fx.obs.addObserver("gx.control.onafterpropertychange",this,function(d){"Class"==d.property&&c(d.control).is(a.selector)&&gx.plugdesign.applyClassMapOnElement(a,d.control)}))})},applyControlValue:function(a,d){gx.fn.setControlValue(a.id,d);gx.html.onchange(a,d)},applyTemplates:function(a,b){c.each(a,function(a,g){"string"==typeof g?g=f[g]:(g.name=g.name||"auto-generated-"+d++,g=new gx.plugdesign.Template(g));
gx.plugdesign.applyTemplateSelection(g,b)})},applyClassMaps:function(a,d){c.each(a,function(a,b){gx.plugdesign.applyClassSelection(b,d)})},applyTemplateObject:function(d){var f=c.Deferred();if(!gx.runtimeTemplates)return f.resolve().promise();e?(this.applyTemplates(b,d),this.applyClassMaps(a,d),f.resolve()):gx.http.doCall({avoidCache:!1,sync:!0,method:"GET",url:gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"gxtemplate.json",!1),handler:function(h,j){var k=gx.json.evalJSON(j);k.css&&c.each(k.css,
function(a,d){gx.http.loadStyle(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+d,!1),!1,!0)});var m=[];k.js&&c.each(k.js,function(a,d){m.push(gx.util.resourceUrl(gx.basePath+gx.staticDirectory+d,!1))});var l=jQuery;jQuery=gx.$;gx.http.loadScripts(m,function(){e=!0;b=k.templates||[];a=k.class_maps||[];this.applyTemplates(b,d);this.applyClassMaps(a,d);jQuery=l;f.resolve()}.closure(this))},obj:this});return f.promise()},Template:function(){var a=function(a){a=a||{};if(a.name){if(a.selector){if(a.listeners){var d=
a.listeners;if(!d.control&&(d.before||d.after)){gx.dbg.write("If a visible or enabled handler is specified, a control must be specified too",!0);return}}gx.lang.apply(this,a);f[a.name]=this;return this}gx.dbg.write("A selector must be specified",!0)}else gx.dbg.write("A name must be specified",!0)};a.prototype={name:"",selector:"",template:"",applyTo:"outer",outerHTML:!1,innerHTML:!1,global:!1,setContext:gx.emptyFn,initialize:gx.emptyFn,listeners:{}};return a}()}}(gx.$);
gx.html=function(c){var f=/<style[^>]*>([\s\S]*?)<\/style>/i,e=RegExp("<style[^>]*>([\\s\\S]*?)</style>","ig"),b=/<link ([^>]*rel=['"]?stylesheet['"]?[^>]*)>/i,a=RegExp("<link ([^>]*rel=['\"]?stylesheet['\"]?[^>]*)>","ig"),d=/<script([^>]*)>([\s\S]*?)<\/script>/i,g=RegExp("<script([^>]*)>([\\s\\S]*?)<\/script>","ig"),n=/href=(['"]?)([^'">]*)\1/i,h=/id=(['"]?)([^'">]*)\1/i,j=/src=(['"]?)([\s\S]*)\?([^"']*)\1/i,k=/src=(['"]?)([^"']*)\1/i;return{encodeCaseFormat:function(a,d,b){d==gx.html.controls.formats.TEXT?
a=gx.html.encode(a,!1,b):d==gx.html.controls.formats.TEXT_W_SPACES&&(a=gx.html.encode(a,!0,b));return a},encode:function(a,d,b){var g=["<",">","&"],c=["&lt;","&gt;","&amp;"];d&&(g.push(" "),c.push("&nbsp;"));b&&(g.push("\n"),c.push("<br/>"));return gx.text.charReplace(a,g,c)},getHidden:function(a,d){return'<input type="hidden" id="'+a+'" name="'+a+'" value="'+d+'">'},viewportWidth:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientWidth,document.body.clientWidth):
document.body.clientWidth},viewportHeight:function(){var a=document.documentElement;return a&&a.clientHeight?Math.max(a.clientHeight,document.body.clientHeight)-5:document.body.clientHeight-5},cleanHtmlRefs:function(d,b){(void 0===b||b)&&(d=d.replace(e,""));d=d.replace(a,"");return d=d.replace(g,"")},setOuterHtml:function(a,d){a.outerHTML=d},setInnerHtml:function(a,d,b,g,e){var f=gx.dom.styles();gx.dom.shouldPurge()&&gx.dom.purge(a,!0);var n=a.children[0];!n&&g&&(n=document.createElement("div"),gx.dom.addClass(n,
gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME),gx.dom.addClass(n,"Form-fx"),a.appendChild(n));g&&gx.pO.fullAjax&&n&&gx.dom.hasClass(n,gx.GxObject.WEBCOMPONENT_BODY_CLASS_NAME)&&!gx.dom.hasClass(a,"transitioning")?(a=document.createElement("div"),a.innerHTML=this.cleanHtmlRefs(d,e),gx.dom.replaceWithFx(n,a.children[0])):c(a).html(this.cleanHtmlRefs(d,e));gx.util.browser.isIE()&&gx.cache.updateStyles(f,gx.dom.styles());!0==b&&this.processCode(d,!1)},setInnerText:function(a,d,b,g){null!=a.nodeValue?a.nodeValue=
d:null!=a.innerText&&!gx.util.browser.isChrome()?a.innerText=d:gx.util.browser.isFirefox()||gx.util.browser.isChrome()?c(a).html(gx.html.encodeCaseFormat(d,b,g)):"TEXT"==a.tagName&&null!=a.innerHTML?c(a).html(d):c(a).html("<text>"+d+"</text>")},nodesFromText:function(a){var d=document.createElement("div");d.style.visibility="hidden";d.style.display="none";document.body.appendChild(d);gx.dom.shouldPurge()&&gx.dom.purge(d,!0);d.innerHTML=a;for(var a=[],b=d.childNodes.length,g=0;g<b;g++)a.push(d.childNodes[g].cloneNode(!0));
gx.dom.removeControlSafe(d);return a},onTypeAvailable:function(a,d,b){try{eval(a),b instanceof Array?d.apply(this,b):d()}catch(g){setTimeout(function(){gx.html.onTypeAvailable(a,d,b)},250)}},processCode:function(a,g,c,e,p,r){var s=a,u=[],t=!1,x=[],A=[],y=[];if(""!=a){var w=[];if(void 0===r||r)for(;w;){if(w=a.match(f))(r=w.lastIndex)||(r=w.index+w[0].length),a=a.substring(r);else break;y.push(w[1])}a=s;for(w=[];w;){if(w=a.match(b))(r=w.lastIndex)||(r=w.index+w[0].length),a=a.substring(r);else break;
r=w[1].match(n);idAttr=w[1].match(h);r&&!gx.cache.fileLoaded(r[2])&&(A.push({href:r[2],id:idAttr&&2<idAttr.length?idAttr[2]:null}),gx.cache.addRemoteFile(r[2]))}a=s;for(w=[];w;){if(w=a.match(d))(r=w.lastIndex)||(r=w.index+w[0].length),a=a.substring(r);else break;void 0!=w[1]&&""!=w[1]?(r=w[1].match(j),null==r&&(r=w[1].match(k)),r&&!gx.cache.fileLoaded(r[2])?(s=r[2],gx.lang.emptyObject(r[3])||(s+="?"+r[3]),u.push(s),gx.cache.addRemoteFile(r[2])):r&&gx.cache.fileLoaded(r[2])?t=!0:!r&&w[2]&&x.push(w[2])):
w[2]&&x.push(w[2])}if(!0!=g){w="";g=x.length;for(a=0;a<g;a++)w+=x[a];""!=w&&gx.lang.doEval(w);var v=[];if("function"==typeof c)gx.http.loadScripts(u,function(){e instanceof Array?c.apply(this,e):c()});else{x={method:"GET",useCash:!0};x.load=function(a,d){gx.lang.supEval(this,v.push(d))}.closure(this);x.mimetype="text/plain";x.sync=!0;for(var D=u.length,a=0;a<D;a++)x.url=u[a],gx.http.doCall(x)}w="";g=v.length;for(a=0;a<g;a++)w+=v[a];""!=w&&gx.lang.doEval(w);u=document.getElementsByTagName("style");
g=A.length;for(a=0;a<g;a++){x=!1;w=u.length;for(s=0;s<w;s++)if(u[a]&&A[a].href==(u[a].styleSheet&&u[a].styleSheet.cssText?u[a].styleSheet.cssText:u[a].innerHTML))x=!0;x||gx.http.loadStyle(A[a].href,gx.emptyFn,!1,A[a].id)}w="";g=y.length;for(a=0;a<g;a++)w+=y[a];""!=w&&(A=document.createElement("style"),A.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(A),A.styleSheet?A.styleSheet.cssText=w:(y=document.createTextNode(w),A.appendChild(y)));if(0==D&&"function"==typeof c)if(t&&
p)gx.html.onTypeAvailable(p,c,e);else e instanceof Array?c.apply(this,e):c()}}},multimediaUpload:{getInputFileEl:function(a){return c("#"+a+"[type='file']")[0]},resolveFileName:function(a,d){return a||d||""},onOptionChange:function(a){var a=this.getElements(a),d=a.fileField,b=a.uriField;a.uriOption.checked?(gx.dom.removeClass(d,"field-selected"),gx.dom.addClass(b,"field-selected")):(gx.dom.removeClass(b,"field-selected"),gx.dom.addClass(d,"field-selected"))},imageLoadHandler:function(a,d){var b=function(a){var d=
"IMG"==a.tagName?"src":"href";return!a[d]||a[d]==document.location.href||"/"==a[d].charAt(a[d].length-1)};!a||b(a)?gx.dom.addClass(d,"gx-multimedia-empty"):gx.dom.removeClass(d,"gx-multimedia-empty");d&&!b(d)&&gx.dom.removeClass(d,"gx-multimedia-empty");if(gx.util.browser.isIE()&&(a&&"IMG"==a.tagName)&&(b=parseInt(a.currentStyle.maxWidth),b<a.width&&(a.style.height=gx.dom.addUnits(b*a.height/a.width),a.style.width=gx.dom.addUnits(b)),b=parseInt(a.currentStyle.maxHeight),b<a.height))a.style.width=
gx.dom.addUnits(b*a.width/a.height),a.style.height=gx.dom.addUnits(b)},dialogCloseHandler:function(a,d){var b=this.getElements(a);d.style.display="none";a.appendChild(d);b.uriOption.checked?this.refreshPreviewImg(a,b.uriField):this.refreshPreviewImg(a,b.fileField);b.action.focus()},actionClickHandler:function(a,d){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.getElements(d),g=b.button;b.fieldsCt.style.display="block";var e=130,f=500,n=!0;gx.util.browser.isIE()&&gx.util.browser.isCompatMode()&&
(d.style.position="static",b.fileField.style.marginTop="0",b.uriField.style.marginTop="0",e=230);gx.runtimeTemplates&&(n=!1,c(window).width()<f&&(f=c(window).width()-20,e=170));e=gx.popup.openDialog({parentElement:d,w:f,h:e,contentHtml:b.fieldsCt,title:"",showParentPopups:!1,showCloseButton:!0,resizable:n,callbacks:{beforeClose:this.dialogCloseHandler.closure(this,[d,b.fieldsCt,g])}});b.fileOption.focus();gx.evt.attach(g,"click",e.close,e,{single:!0});gx.fx.obs.addObserver("gx.keypress",this,this.keypressHandler)},
clearActionHandler:function(a,d){a=a||event;a.preventDefault?a.preventDefault():a.returnValue=!1;var b=this.getElements(d);b.uriField.value="";b.fileField.value="";b.uriOption.checked=!1;b.fileOption.checked=!0;gx.fx.obs.notify("gx.multimedia.clear",[d]);this.refreshPreviewImg(d,b.fileField)},keypressHandler:function(a){13==a.event.keyCode&&(a.cancel=!0,gx.popup.currentPopup.close(),gx.fx.obs.deleteObserver("gx.keypress",this,this.keypressHandler))},tapHandler:function(a){this.getElements(a).action.focus()},
getElements:function(a){var a=gx.dom.el(a),d=c(a),a=d.find(".change-action")[0],b=d.find(".clear-action")[0],g=null,e=c(b).next()[0],d=d.find(".fields-ct");"A"==e.tagName?(g=e,e=e.firstChild):"IMG"!=e.tagName&&(e=null);return{previewLink:g,action:a,clearAction:b,previewImg:e,fieldsCt:d[0],uriField:d.find("input[type='text']")[0],fileField:d.find("input[type='file']")[0],uriOption:d.find("input[type='radio'][value='uri']")[0],fileOption:d.find("input[type='radio'][value='file']")[0],button:d.find("input[type='button']")[0]}},
getContainer:function(a){for(a=gx.dom.el(a);a;){if(gx.dom.hasClass(a,"gx-multimedia-upload"))return a;a=a.parentNode}return null},setPreviewImage:function(a,d){var a=gx.dom.el(a),b=this.getElements(a);b.previewImg&&("IMG"==b.previewImg.tagName&&(b.previewImg.src=d),this.imageLoadHandler(b.previewImg,b.previewLink))},setPreviewLink:function(a,d){var a=gx.dom.el(a),b=this.getElements(a);b.previewLink&&(d&&(!b.previewImg||"IMG"!=b.previewImg.tagName)?b.previewLink.href=d:b.previewLink.removeAttribute("href"));
this.imageLoadHandler(b.previewImg,b.previewLink)},refreshPreviewImg:function(a,d){var a=gx.dom.el(a),b=this.getElements(a);if(b.previewImg&&"INPUT"==d.tagName){if(d==b.fileField){var g;if(d.files&&(g=d.files[0]))if(g.type.match(/image.*/)){var c=new FileReader;c.onload=function(a,d,b){d.src=a.target.result;b.href=""}.closure(this,[b.previewImg,b.previewLink],!0);c.readAsDataURL(g)}else b.previewLink.href="#";if(!g&&"1"==d.getAttribute("gxctrlchanged")||d.gxctrldeleted)b.previewImg.src="",b.previewLink.href=
""}else d==b.uriField&&(b.previewImg.src=d.value,b.previewLink.href=d.value);this.imageLoadHandler(b.previewImg,b.previewLink)}},setType:function(a,d){var a=gx.dom.el(a),b=this.getElements(a);b.fileOption.checked=d;b.uriOption.checked=!d;d&&(b.uriField.value="");this.onOptionChange(a)},getOptionValue:function(a){a=gx.dom.el(a);return this.getElements(a).fileOption.checked?"file":"uri"},createControl:function(a){a=gx.dom.el(a);if(!a._created){a._created=!0;var d=this.getElements(a);gx.dom.addClass(d.fileField,
"field-selected");d.action.setAttribute("gxfocusable","1");var b=document.createElement("input");b.type="button";b.className="BtnEnter";b.value=gx.getMessage("GXM_uploadconfirmoption");d.fieldsCt.appendChild(b);var b=this.imageLoadHandler.closure(this,[d.previewImg,d.previewLink]),g=this.onOptionChange.closure(this,[a]);b();d.previewImg&&gx.evt.attach(d.previewImg,"load",b);g();gx.evt.attach(d.uriOption,"click",g);gx.evt.attach(d.fileOption,"click",g);gx.evt.attach(d.action,"click",this.actionClickHandler.closure(this,
[a],!0));gx.evt.attach(d.clearAction,"click",this.clearActionHandler.closure(this,[a],!0));gx.evt.attach(a,"touchstart",this.tapHandler.closure(this,[a]))}}},controls:{types:{singleLineEdit:1,multipleLineEdit:2,blob:3,radio:4,comboBox:5,listBox:6,checkBox:7,image:8,textBlock:9,button:10,grid:11,userControl:12,userControlContainer:13,webComponent:14,embeddedPage:15,table:16,row:17,cell:18,group:19,multimedia:20,video:21,audio:22,div:23,responsiveRow:24,responsiveCell:25},formats:{TEXT:0,HTML:1,RAW_HTML:2,
TEXT_W_SPACES:3},isMultiSelection:function(a){return"combo"==a||"dyncombo"==a||"listbx"==a||"dynlistbx"==a?!0:!1},eventJSCode:function(a,d,b,g,c){var e="";if(4==a&&b)e=b;else if(1==a)e="gx.fn.closeWindow();";else if(7==a)a="",g&&c&&(a=",'"+g.gridName+"','"+c.gxId+"'"),e="gx.evt.execCliEvt("+d+a+",this);";else if(6==a||5==a)e="gx.evt.execEvt("+d+",this,"+g.gridId+");";return e},startAnchor:function(a,d,b,g,c){""!=b?""!=d?a.append('<a href="javascript:if( '+b+") {"+d+'}">'):a.append('<a href="javascript:'+
b+'">'):""!=d?a.append('<a href="javascript:'+d+'">'):""!=g&&(a.append('<a href="'+g+'"'),""!=c&&a.append(' target="'+c+'"'),a.append(">"))},endAnchor:function(a,d,b,g){(""!=d||""!=b||""!=g)&&a.append("</a>")},onJSEvent:function(a,d,b,g){a.append(" ");""!=g&&a.append('jsevent="'+g+'" ');a.append(d+'="if( ');""!=b?a.append("gx.evt.jsEvent(this)) {"+b+'} else return false;"'):a.append('!gx.evt.jsEvent(this)) return false;"')},htmlControl:function(a,d,b,g,c){this.id=a||"";this.width=d||0;this.widthUnit=
"px";this.height=b||0;this.heightUnit="px";this.cssClass=g||"";this.style=this.ownCssClass=this.roClass="";this.title=c||"";this.value="";this.type=-1;this.dataType="";this.enabled=this.visible=!0;this.rtEnabled=!1;this.jsEvent=this.linkTarget=this.link="";this.hasJsLink=!1;this.extraAttributes="";this.column=this.row=this.grid=null;this.gridRow=this.gridId="";this.buffer=new gx.text.stringBuffer;this.getHtml=function(){this.buffer.clear();this._getHtml();return this.buffer.toString()};this.append=
function(a){return this.buffer.append(a)};this.tagAtt=function(a,d){return this.buffer.append(" "+a+'="'+d.toString().replace(/\"/g,"&quot;")+'"')};this.persistValue=function(){var a=this.grid.parentObject.GXValidFnc[this.column.gxId];!gx.lang.emptyNum(this.column.gxId)&&a&&(this._persistValue?this._persistValue():a.v2v&&a.v2v(this.value))};this.setIndividualProp=function(a,d){this[a]="enabled"==a||"visible"==a||"isPassword"==a||"autoComplete"==a||"hasJsLink"==a?gx.lang.gxBoolean(d):d};this.setGridData=
function(a){this.grid=a.grid;this.row=a.row;this.gridId=a.gridId;this.gridRow=a.gridRow};this.getGridData=function(){return{grid:this.grid,row:this.row,gridId:this.gridId,gridRow:this.gridRow}}},singleLineEdit:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.singleLineEdit;this.maxLength="";this.isPassword=!1;this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J,K,N,S,P,O,Q,R,T,U,V,W,Y,X){this.id=a;this.inputType=C;this.step=I;this.title=f;this.placeholder=
n;this.width=M;this.widthUnit=J;this.height=17==K?0:K;this.heightUnit=N;this.maxLength=S;this.visible=0!=o;this.enabled=0!=p;this.rtEnabled=0!=z;this.isPassword=0!=P;this.format=O;this.link=c;this.linkTarget=e;this.style=k;this.cssClass=m;this.roClass=l;this.columnClass=q;this.vStruct=gx.O.getValidStructFld(this.column.htmlName);this.formattedValue=!gx.lang.emptyObject(d)?gx.html.encodeCaseFormat(d,O):this.applyPicture(gx.html.encodeCaseFormat(X,O));this.extraAttributes=b;this.jsScrCode=j;this.usrOnclick=
h;this.eventName=g;this.parentId=Q;this.hasTheme=R;this.autoComplete=0!=T;this.autoCorrection=0!=U;this.value=X;this.domainName=W};this.applyPicture=function(a){var d=this.vStruct;if(!gx.lang.emptyObject(d)&&!gx.lang.emptyObject(d.pic)&&!gx.lang.emptyObject(d.type))switch(d.type){case "int":return gx.num.formatNumber(a,d.dec,d.pic,d.len,d.sign,!0);case "decimal":return gx.num.formatNumber(a,d.dec,d.pic,d.len,d.sign,!0);case "char":return a;default:return a}else return a};this._getHtml=function(){var a=
"",d="";0==this.width&&(this.width=this.colSize?this.colSize:this.maxLength,this.widthUnit="chr");0<this.width&&("chr"==this.widthUnit?a=' size="'+this.width+'"':this.style=this.style+";width: "+this.width+this.widthUnit+";");0<this.height&&"row"!=this.heightUnit&&(this.style=this.style+";height: "+this.height+this.heightUnit+";");d=this.style;this.style+=!this.visible?";display:none;":"";if(this.rtEnabled||this.enabled){if(this.dataType==gx.types.date||this.dataType==gx.types.dateTime)this.append("<div"),
this.tagAtt("id",this.id+"_dp_container"),this.tagAtt("class","dp_container"),""!=this.style&&this.tagAtt("style","white-space:nowrap;display:inline;width:auto;"),this.append(">");this.append("<input");if(!0==this.isPassword)this.tagAtt("type","password");else if(this.tagAtt("type",this.inputType),this.step&&("number"==this.inputType||"range"==this.inputType))this.tagAtt("step",this.step),"search"==this.inputType&&(this.extraAttributes+=' onsearch="this.onchange();"');this.tagAtt("id",this.id);this.tagAtt("name",
this.id);this.tagAtt("value",this.dataType==gx.types.numeric?gx.text.ltrim(this.formattedValue):this.formattedValue);this.append(a);""!=this.title&&this.tagAtt("title",this.title);""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder);this.autoComplete||this.tagAtt("autocomplete","off");this.tagAtt("spellcheck",this.autoCorrection.toString());"date"!=this.inputType&&("datetime"!=this.inputType&&"datetime-local"!=this.inputType)&&this.tagAtt("maxlength",this.maxLength);""!=this.cssClass&&
this.tagAtt("class",this.cssClass);a=this.style;""!=this.column.align&&(a+=";text-align:"+this.column.align);var b=!this.enabled&&this.rtEnabled?";display:none;":"",a=a+b;""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");this.dataType==gx.types.date||this.dataType==gx.types.dateTime?(a=this.grid.parentObject.getValidStructFld(this.id),void 0!=a.dp&&(0==a.dp.f&&(this.append("<img"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"datepickerImage")),this.tagAtt("id",this.id+
"_dp_trigger"),b=!this.enabled&&this.rtEnabled||!this.visible?";display:none;":"",this.tagAtt("style","cursor: pointer"+b),this.tagAtt("title","Date selector"),this.append(">")),this.append("</div>"),this.grid.addDatepickerToSetup({CtrlId:this.id,Grid:this.gridId,Row:this.gridRow}))):gx.html.controls.specificDomainCtrls(this)}if(!this.enabled){b="";this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);b=this.hasTheme?0==this.parentId?""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?
"Readonly"+this.cssClass:this.cssClass:""!=this.roClass&&0!=this.roClass.indexOf("Readonly")?"Readonly"+this.roClass:this.roClass:this.cssClass;a="";this.format!=gx.html.controls.formats.RAW_HTML&&(d+=!this.visible?";display:none;":"",this.append("<span"),this.append(this.extraAttributes),""!=b&&this.tagAtt("class",b),""!=d&&this.tagAtt("style",d),""!=this.title&&this.tagAtt("title",this.title),this.tagAtt("id","span_"+this.id),this.append(">"),a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,
null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget));if(this.isPassword){d=gx.lang.emptyObject(this.maxLength)?3:parseInt(this.maxLength);for(b=0;b<d;b++)this.append("*")}else this.append(this.formattedValue);this.format!=gx.html.controls.formats.RAW_HTML&&(gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link),this.append("</span>"));this.format==gx.html.controls.formats.RAW_HTML&&gx.html.processCode(this.buffer.toString(),!1);gx.html.controls.specificDomainCtrls(this)}}},
multipleLineEdit:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.multipleLineEdit;this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J,K){this.id=a;this.visible=0!=c;this.enabled=0!=e;this.rtEnabled=0!=f;this.width=n;this.widthUnit=h;this.height=j;this.heightUnit=m;this.style=k;this.cssClass=l;this.columnClass=q;this.maxLength=o;this.extraAttributes=b;this.autoresize=0!=p;this.format=g;this.link=d;this.linkTarget=z;this.placeholder=C;this.value=K;this.autoCorrection=
0!=I;this.domainName=J};this._getHtml=function(){this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.rtEnabled||this.enabled)this.append("<textarea"),""!=this.placeholder&&this.tagAtt("placeholder",this.placeholder),this.tagAtt("spellcheck",this.autoCorrection.toString()),"chr"==this.widthUnit?this.tagAtt("cols",this.width):this.style=this.style+";width: "+this.width+this.widthUnit,"row"==this.heightUnit?this.tagAtt("rows",this.height):this.style=this.style+";height: "+
this.height+this.heightUnit,this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.tagAtt("maxlength",this.maxLength),this.append('onkeyup = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),this.append('onkeydown = "return gx.evt.checkMaxLength(this,'+this.maxLength+',event);"'),""!=this.cssClass&&this.tagAtt("class",this.cssClass),""!=this.style&&this.tagAtt("style",this.style),""!=this.title&&this.tagAtt("title",this.title),this.append(this.extraAttributes),this.append(">"),
this.append(this.value),this.append("</textarea>");if(!this.enabled){var a=!this.visible?"display:none;":"";this.autoresize||(a+='overflow="hidden";');this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")&&(this.cssClass="Readonly"+this.cssClass);this.append("<span ");this.append(this.extraAttributes);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=a&&this.tagAtt("style",a);""!=this.title&&this.tagAtt("title",this.title);this.tagAtt("id",
"span_"+this.id);this.append(">");gx.html.controls.startAnchor(this,"","",this.link,this.linkTarget);this.append(gx.html.encodeCaseFormat(this.value,this.format,!0));gx.html.controls.endAnchor(this,"","",this.link);gx.html.controls.specificDomainCtrls(this);this.append("</span>")}}},blob:function(a,d,b,g,c,e,f){this.base(a,d,b,g,c);this.type=gx.html.controls.types.blob;this.display=e||0;this.contentType=f||"text/html";this.parameters=this.url="";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,
l,r,q,o,p,M,J,K,N,s,P,O,Q,R,T,U,V){this.id=a;this.value=d;this.contentType=b||"text/html";this.linkTarget=c;this.parameters=e;this.display=f;this.visible=0!=h;this.enabled=0!=n;this.alt=j;this.title=m;this.borderWidth=k;this.autoresize=0!=l;this.width=r;this.widthUnit=q;this.height=o;this.heightUnit=p;this.vSpace=M;this.hSpace=J;this.jsScrCode=K;this.usrOnclick=N;this.eventName=s;this.style=P;this.cssClass=O;this.columnClass=Q;this.extraAttributes=R;this.extraDisplayAttributes=T;this.jsDynCode=U;
this.url=gx.util.resolveUrl(V)};this._getHtml=function(){var a="";this.style+=this.visible?"":";display:none;";this.append("<table");this.tagAtt("border",0);this.tagAtt("cellpadding",0);this.tagAtt("cellspacing",0);this.tagAtt("style","margin:"+this.vSpace+"px "+this.hSpace+"px;");""!=this.title&&this.tagAtt("title",this.title);this.append("><tr><td>");var d=-1!=this.contentType.toLowerCase().indexOf("image/");if(0==this.display){if(d){this.append("<img");""!=this.alt&&this.tagAtt("alt",this.alt);
if(""==this.url||this.url==gx.util.resourceUrl(gx.basePath+gx.staticDirectory))this.url=gx.ajax.getImageUrl(gx,"blankImage");this.tagAtt("src",this.url)}else this.append("<object"),this.tagAtt("type",this.contentType),""==this.url&&(this.url="about:blank"),this.tagAtt("data",this.url);this.tagAtt("id","Object_"+this.id);this.style+="display:block;";0!=this.width&&!this.autoresize&&(this.style=this.style+"width:"+this.width+this.widthUnit+";");0!=this.height&&!this.autoresize&&(this.style=this.style+
"height:"+this.height+this.heightUnit+";");this.tagAtt("style",this.style);a=""!=this.cssClass?"BlobContent"+this.cssClass:this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a);this.tagAtt("class",a);this.append(this.extraDisplayAttributes);this.append(">");d?this.append("</img>"):(this.append(this.parameters),this.append("</object>"))}else 1==this.display&&(this.append("<a"),this.tagAtt("id","Link_"+this.id),this.style=""!=this.url?this.style+"display:block;":
this.style+"display:none;",this.tagAtt("style",this.style),this.tagAtt("href",this.url),this.tagAtt("type",this.contentType),""!=this.linkTarget&&this.tagAtt("target",this.linkTarget),this.append("><img"),this.tagAtt("border","0"),this.tagAtt("src",gx.ajax.getImageUrl(gx,"downloadImage")),this.append("></a>"));this.append("</td></tr><tr><td>");if(this.enabled){var b="";gx.lang.emptyObject(this.value)||(gx.dom.form().encoding="multipart/form-data");a=gx.dom.el(this.id);this.grid&&this.grid.parentObject.isTransaction()&&
a&&this.value===a.value?(d=this.id+"_hook",this.append("<div"),this.tagAtt("id",d),this.append(">"),this.append("</div>"),this.grid.addControlToReuse({el:a,hookId:d})):(this.append("<input"),this.tagAtt("type","file"),this.tagAtt("id",this.id),this.tagAtt("name",this.id),this.visible||(b+="display:none;"),0!=this.width&&(b=b+"width:"+this.width+";"),this.tagAtt("style",b),this.tagAtt("value",this.value),a=""!=this.cssClass?"BlobInput"+this.cssClass:this.cssClass,!this.enabled&&(""!=this.cssClass&&
0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+a),this.tagAtt("class",a),d&&this.tagAtt("accept",this.contentType),this.append(this.extraAttributes),this.append(">"))}this.append("</td></tr></table>")}},radio:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.radio;this.vertical=!0;this.possibleValues=[];this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o){this.possibleValues=a.v||[];this.id=d;this.title=b;this.visible=0!=g;this.enabled=0!=c;this.columns=e;this.orientation=
f;this.style=n;this.cssClass=h;this.columnClass=j;this.jsScrCode=m;this.usrOnclick=k;this.eventName=l;this.extraAttributes=q;this.value=o};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()));var a="gx-radio-button ",a=!this.enabled&&""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?a+("Readonly"+this.cssClass):a+this.cssClass,d=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.style+=this.visible?"":
";display:none;";1==this.orientation?this.append("<table"):this.append("<span ");this.tagAtt("class",a);""!=this.style&&this.tagAtt("style",this.style);this.append(">");for(var a=0,b=this.possibleValues.length,g=0;g<b;g++){var c=this.possibleValues[g],e=c[0],c=c[1];1==this.orientation&&(1<this.columns&&(a=(a+1)%this.columns),0==a&&this.append("<tr>"),this.append("<td>"));this.append("<input");this.tagAtt("type","radio");this.tagAtt("name",this.id);this.tagAtt("value",e);""!=this.title&&this.tagAtt("title",
this.title);gx.text.trim(this.value.toString())==gx.text.trim(e.toString())&&this.append(" checked");this.enabled||this.append(" disabled");this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",d,this.usrOnclick);this.append(">");this.append(c);1==this.orientation&&(this.append("</td>"),0==a&&this.append("</tr>"))}1==this.orientation?this.append("</table>"):this.append("</span>")}},comboBox:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.comboBox;this.rows=
1;this.possibleValues=[];this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J,K,N){this.possibleValues=a.v||[];this.id=d;this.title=n;this.visible=0!=h;this.enabled=0!=j;this.rtEnabled=0!=m;this.rows=b;this.format=k;this.width=l;this.widthUnit=q;this.height=o;this.heightUnit=p;this.style=z;this.cssClass=C;this.columnClass=I;this.formattedValue=J;this.jsScrCode=c;this.usrOnclick=g;this.eventName=e;this.extraAttributes=M;this.value=N};this._getHtml=function(){this.dataType==gx.types.numeric&&
(this.value=gx.text.trim(this.value.toString()));0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);var a=this.style+" ;overflow:hidden;";this.style+=!this.visible||!this.enabled&&this.rtEnabled?";display:none;":"";if(this.enabled||this.rtEnabled){var d=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row);this.append("<select");1<this.rows&&this.tagAtt("size",this.rows);
this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.enabled||(this.append(" disabled"),gx.util.addOnce(gx.disabledControls,this.id,this.id));this.append(this.extraAttributes);gx.html.controls.onJSEvent(this,"gxoch0",d,this.usrOnclick);this.append(">");for(var d=this.possibleValues.length,b=0;b<d;b++){var g=this.possibleValues[b];this.append("<option");
this.tagAtt("value",g[0]);gx.text.trim(g[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))&&this.append(" selected");this.append(">");this.append(g[1]);this.append("</option>")}this.append("</select>")}if(!this.enabled){this.rtEnabled||this.grid.addHiddenControl(this.id,this.value);d="";d=""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly")?"Readonly"+this.cssClass:this.cssClass;a+=!this.visible?";display:none;":"";this.append("<span ");this.tagAtt("id","span_"+this.id);""!=
this.title&&this.tagAtt("title",this.title);""!=d&&this.tagAtt("class",d);""!=a&&this.tagAtt("style",a);this.append(this.extraAttributes);this.append(">");d=this.possibleValues.length;for(b=0;b<d;b++)if(g=this.possibleValues[b],gx.text.trim(g[0].toString())==gx.text.trim(gx.lang.htmlDecode(this.value.toString()))){this.append(g[1]);break}this.append("</span>")}}},listBox:function(a,d,b,g,c,e){this.base(a,d,b,g,c);this.type=gx.html.controls.types.listBox;this.rows=e},checkBox:function(a,d,b,g,c,e,
f,n){this.base(a,d,b,g,c);this.type=gx.html.controls.types.checkBox;this.caption=e||"";this.checkedValue=f;this.uncheckedValue=n;this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m){this.id=a;this.title=d;this.visible=0!=b;this.enabled=0!=g;this.checkedValue=c;this.caption=e;this.style=f;this.cssClass=n;this.columnClass=h;this.extraAttributes=j;this.value=m};this._getHtml=function(){this.dataType==gx.types.numeric&&(this.value=gx.text.trim(this.value.toString()),this.checkedValue=gx.text.trim(this.checkedValue.toString()));
var a=this.cssClass;!this.enabled&&(""!=this.cssClass&&0!=this.cssClass.indexOf("Readonly"))&&(a="Readonly"+this.cssClass);this.style+=this.visible?"":";display:none;";this.append("<span ");""!=a&&this.tagAtt("class",a);""!=this.style&&this.tagAtt("style",this.style);this.append("><input");this.tagAtt("type","checkbox");this.tagAtt("name",this.id);this.value.toString()==this.checkedValue.toString()?(this.append(" checked"),this.tagAtt("value",this.checkedValue)):this.tagAtt("value",this.uncheckedValue);
""!=this.title&&this.tagAtt("title",this.title);this.enabled||this.append(" disabled");this.append(this.extraAttributes);this.append(">");this.append(this.caption);this.append("</span>")}},imageReadOnly:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.image;this.alt="";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J,K,N,S,P,O,Q,R){this.id=a;this.accessKey=g;this.visible=0!=e;this.enabled=0!=f;this.alt=n;this.title=h;this.borderWidth=j;this.autoresize=
0!=m;this.width=k;this.widthUnit=l;this.height=q;this.heightUnit=o;this.vSpace=p;this.hSpace=z;this.link=d;this.linkTarget=b;this.jsScrCode=C;this.usrOnclick=I;this.eventName=M;this.style=J;this.cssClass=K;this.columnClass=N;this.align=S;this.extraAttributes=P;this.useMap=O;this.jsDynCode=Q;this.value=this.imageUrl=R};this._getHtml=function(){this.grid.addHiddenControl(this.id,this.imageUrl);""!=this.eventName&&gx.text.endsWith(this.eventName,".'")&&(this.eventName=this.eventName.replace(".'","."+
this.gridRow+"'"));var a=gx.util.accessKey(this.title);this.title=gx.util.accessKeyCaption(this.title);""!=a&&(this.accessKey=a);this.style+=this.visible?"":";display:none;";a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);""!=a?(this.append("<input"),this.tagAtt("type","image"),this.tagAtt("src",this.value),this.tagAtt("name",this.id),gx.html.controls.onJSEvent(this,"onclick",a+"return false;",this.usrOnclick)):(this.enabled&&""!=this.link&&gx.html.controls.startAnchor(this,
a,this.usrOnclick,this.link,this.linkTarget),this.append("<img"),this.tagAtt("src",this.value));this.enabled||this.append(" disabled");""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("id",this.id);0!=this.vSpace&&this.tagAtt("vspace",this.vSpace);0!=this.hSpace&&this.tagAtt("hspace",this.hSpace);""!=this.align&&this.tagAtt("align",this.align);if(""==this.cssClass||0<this.borderWidth)this.tagAtt("border",this.borderWidth),""!=this.cssClass&&(this.style=this.style+";border-width: "+
this.borderWidth);""!=this.alt&&this.tagAtt("alt",this.alt);""!=this.title&&this.tagAtt("title",this.title);0<this.width&&(this.style=this.style+";width: "+this.width+this.widthUnit);0<this.height&&(this.style=this.style+";height: "+this.height+this.heightUnit);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);""!=this.useMap&&this.tagAtt("usemap",this.useMap);this.extraAttributes&&this.append(this.extraAttributes);this.append(">");this.enabled&&
(""!=this.link&&""==a)&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link)};this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.imageUrl)}},multimedia:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.multimedia;this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J){this.id=a;this.display=0!=d;this.visible=0!=b;this.enabled=0!=g;this.autoresize=0!=c;this.width=
e;this.widthUnit=f;this.height=n;this.heightUnit=h;this.jsScrCode=j;this.usrOnclick=m;this.eventName=k;this.style=l;this.cssClass=q;this.columnClass=o;this.extraInputAttributes=p;this.jsDynCode=C;this.readOnly=0!=I;this.isBlob=gx.lang.gxBoolean(M);this.multimediaUrl=J;this.value=gx.util.resolveUrl(J)};this.startMultimediaUploadControl=function(a,d,b,g){return['<div id="',a,'_ct" class="gx-multimedia-upload" style="',(g||"")+(d?"":"display:none;"),'">'].join("")};this.endMultimediaUploadControl=function(a,
d,b,g,c,e,f,n,h,j,m,k,l,q,o,p){b=[];g=gx.html.multimediaUpload.getInputFileEl(this.id);c="checked";e="";f=a.match(/([\w]+)(_\d{4})$/);f=f[1]+"_GXI"+f[2];if(o||void 0===o)c="",e="checked",d="";o=['<div id="',a,'_ct_fields" class="fields-ct">','<label class="option">','<input name="',a,'Option" type="radio" value="file" ',e,"/>",gx.getMessage("GXM_uploadfileoption"),"</label>",'<label class="option">','<input name="',a,'Option" type="radio" value="uri" ',c,"/>",gx.getMessage("GXM_uploadurioption"),
"</label>",'<input type="text" class="field ',m,'" id="',f,'" name="',f,'" value="',d,'" ',l," />"];b.push(o.join(""));o=g?['<div id="',a,'_hook"></div>']:['<input type="file" class="field ',m,'" id="',a,'" name="',a,'" accept="',p,'" ',l,"/>"];b.push(o.join(""));o=["</div>","</div>"];b.push(o.join(""));return b.join("")};this.getPreviewHtml=function(){return['<a target="_blank"',this.value?' href="'+this.value+'"':"",'><span id="',this.readOnly||!this.enabled?this.id:"",'" class="',this.cssClass?
"Readonly"+this.cssClass:""," ",this.placeHolderClass,'" title="',gx.getMessage("GXM_multimediaalttext"),'"></span></a>'].join("")};this._getHtml=function(){!this.readOnly&&this.enabled?(this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style)),this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>"),this.append('<a gxfocusable="1" href="" class="action clear-action"></a>')):this.grid.addHiddenControl(this.id,
this.multimediaUrl);this.append(this.getPreviewHtml());if(!this.readOnly&&this.enabled){this.append(this.endMultimediaUploadControl(this.id,this.value,"",this.width,this.widthUnit,this.height,this.heightUnit,this.usrOnclick,this.eventName,this.style,this.cssClass,"",this.extraInputAttributes,this.readOnly,this.isBlob,this.accept));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}};
this._persistValue=function(){this.grid.parentObject.GXValidFnc[this.column.gxId].v2v&&this.grid.parentObject.GXValidFnc[this.column.gxId].v2v(this.multimediaUrl)}},image:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.image;this.alt="";this.innerImage=new gx.html.controls.imageReadOnly;this.placeHolderClass="gx-image-placeholder";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p,z,C,I,M,J,K,N,S,P,O,Q,R,T,U,V,W){this.id=a;this.accessKey=g;this.visible=0!=e;this.enabled=
0!=f;this.alt=n;this.title=h;this.borderWidth=j;this.autoresize=0!=m;this.width=k;this.widthUnit=l;this.height=q;this.heightUnit=o;this.vSpace=p;this.hSpace=z;this.link=d;this.linkTarget=b;this.jsScrCode=C;this.usrOnclick=I;this.eventName=M;this.style=J;this.cssClass=K;this.columnClass=N;this.align=S;this.extraInputAttributes=P;this.extraImageAttributes=O;this.useMap=Q;this.jsDynCode=R;this.readOnly=0!=T;this.isBlob=gx.lang.gxBoolean(U);this.isAttribute=gx.lang.gxBoolean(V);this.multimediaUrl=W;this.value=
gx.util.resolveUrl(W);this.themeName=c;this.className=V&&K?"Readonly"+K:K;a=this.getGridData();this.updateinnerImageProperties();this.innerImage.setGridData(a);this.innerImage.column=this.column};this.updateinnerImageProperties=function(){this.innerImage.setProperties(this.id,this.link,this.linkTarget,this.accessKey,this.themeName,this.visible,this.enabled,this.alt,this.title,this.borderWidth,this.autoresize,this.width,this.heightUnit,this.height,this.heightUnit,this.vSpace,this.hSpace,this.jsScrCode,
this.usrOnclick,this.eventName,this.style,this.className,this.columnClass,this.align,this.extraImageAttributes,this.useMap,this.jsDynCode,this.value)};this.getPreviewHtml=function(){return['<a target="_blank"><img id="Object_',this.id,'" class="',this.cssClass?"Readonly"+this.cssClass:"",'" alt="',this.alt,'" src="',this.value,'" /><span class="',this.placeHolderClass,'"></span></a>'].join("")};this._getHtml=function(){if(this.readOnly||!this.enabled)this.buffer=this.innerImage.buffer,this.updateinnerImageProperties(),
this.innerImage._getHtml();else{this.append(this.startMultimediaUploadControl(this.id,this.visible,this.width,this.style));this.append('<a class="action change-action" gxfocusable="1" href=""'+this.extraInputAttributes+">"+gx.getMessage("GXM_multimediachange")+"</a>");this.append('<a gxfocusable="1" href="" class="action clear-action"></a>');this.append(this.getPreviewHtml());this.append(this.endMultimediaUploadControl(this.id,this.value,this.title,this.width,this.widthUnit,this.height,this.heightUnit,
this.usrOnclick,this.eventName,this.style,this.cssClass,this.align,this.extraInputAttributes,this.readOnly,this.isBlob,"image/*"));var a=gx.html.multimediaUpload.getInputFileEl(this.id);this.grid&&(this.grid.parentObject.isTransaction()&&a)&&this.grid.addControlToReuse({el:a,hookId:this.id+"_hook"})}}},video:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.video;this.accept="video/*";this.placeHolderClass="gx-video-placeholder"},audio:function(a,d,b,g,c){this.base(a,d,b,g,
c);this.type=gx.html.controls.types.audio;this.accept="audio/*";this.placeHolderClass="gx-audio-placeholder"},textBlock:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.textBlock;this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l){this.id=a;this.visible=0!=j;this.enabled=0!=m;this.format=k;this.title=h;this.link=d;this.linkTarget=b;this.jsScrCode=n;this.usrOnclick=g;this.eventName=c;this.extraAttributes=e;this.cssClass=f;this.value=gx.text.replaceAll(l,"�","'")};this._getHtml=
function(){var a;this.format!=gx.html.controls.formats.RAW_HTML&&(this.format==gx.html.controls.formats.HTML?(a=(this.visible?";display:inline;":";display:none;")+this.extraAttributes,this.append("<div ")):(a=(this.visible?"":";display:none;")+this.extraAttributes,this.append("<span ")),this.tagAtt("id",this.id),""!=this.cssClass&&this.tagAtt("class",this.cssClass),this.tagAtt("gxformat",this.format),""!=a&&this.tagAtt("style",a),""!=this.title&&this.tagAtt("title",this.title),this.append(">"));a=
"";this.enabled?(a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,null,this.grid,this.row),gx.html.controls.startAnchor(this,a,this.usrOnclick,this.link,this.linkTarget)):a="";this.append(gx.html.encodeCaseFormat(this.value,this.format));this.enabled&&gx.html.controls.endAnchor(this,a,this.usrOnclick,this.link);this.format==gx.html.controls.formats.HTML?this.append("</div>"):this.format!=gx.html.controls.formats.RAW_HTML&&this.append("</span>");this.format==gx.html.controls.formats.RAW_HTML&&
gx.html.processCode(this.buffer.toString(),!1)}},button:function(a,d,b,g,c,e){this.base(a,d,b,g,c);this.type=gx.html.controls.types.button;this.caption="";this.buttonStyle=e||"rounded";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p){this.reset=o;this.id=a;this.title=c;this.accessKey=e;this.style=f;this.cssClass=n;this.visible=0!=h;this.enabled=0!=j;this.buttonStyle=m;this.jsScrCode=g;this.usrOnclick=b;this.eventName=k+(5==this.jsScrCode?"+'"+this.gridRow+"'":"");this.extraAttributes=
l;this.jsCode=d;this.jsDynCode=q;this.caption=p};this._getHtml=function(){this.style+=this.visible?"":";display:none;";var a="BaseRBtn R"+this.cssClass;"rounded"==this.buttonStyle&&(this.cssClass="BtnText",this.append("<span "),this.tagAtt("onclick","gx.evt.doClick('"+this.id+"', event);"),""!=this.style&&this.tagAtt("style",this.style),this.tagAtt("class",a),this.append('><span class="BtnLeft"><span class="BtnRight"><span class="BtnBackground">'));this.append("<input");a="button";1==this.reset?a=
"submit":0==this.reset&&(a="reset");this.tagAtt("type",a);a=gx.util.accessKey(this.caption);this.caption=gx.util.accessKeyCaption(this.caption);""==a&&(a=gx.util.accessKey(this.title),this.title=gx.util.accessKeyCaption(this.title));""!=a&&(this.accessKey=a);this.tagAtt("name",this.id);this.tagAtt("value",this.caption);""!=this.title&&this.tagAtt("title",this.title);""!=this.accessKey&&this.tagAtt("accesskey",this.accessKey);this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);
this.tagAtt("gxevent",this.eventName);this.enabled||this.append(" disabled");a=gx.html.controls.eventJSCode(this.jsScrCode,this.eventName,this.jsDynCode,this.grid,this.row);a=this.jsCode+a;gx.html.controls.onJSEvent(this,"onclick",a+"return false;",this.usrOnclick);this.append(this.extraAttributes);this.append(">");"rounded"==this.buttonStyle&&this.append("</span></span></span></span>")}},grid:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.grid;this.containerName="";this.setProperties=
function(a){this.containerName=a;this.id=this.grid.gxComponentContext+this.containerName+"Div_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.append("></div>")}},userControl:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.userControl;this.containerName="";this.setProperties=function(a){this.id=this.containerName=a};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("class","gx_usercontrol");this.append("></div>");
this.grid.addUsercontrolToDraw({r:this.gridRow,c:this.column})}},userControlContainer:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.userControlContainer;this.containerName=this.parentName="";this.setProperties=function(a,d){this.parentName=a;this.containerName=d;this.id=this.parentName+this.containerName+"_"+this.gridRow};this._getHtml=function(){this.append("<div");this.tagAtt("id",this.id);this.tagAtt("style","display:none;");this.tagAtt("class","gx_usercontrol_child");
this.append(">")}},webComponent:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.webComponent;this.content=this.controlName="";this.setProperties=function(a){this.controlName=a;var d=this.grid.parentObject.getComponentData(this.controlName),b=d.Prefix,a=this.grid.gxComponentContext+"gxHTMLWrp"+b+this.gridRow,g=gx.dom.el(a),c="";this.grid.addOldComponent(this.gridRow,this.grid.gxComponentContext+b+this.gridRow);if(null!=g)d=a+"_hook",this.grid.addComponentToDraw({create:!1,
existingEl:d,el:a}),a=d;else if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)&&!gx.lang.emptyObject(gx.csv.lastEvtResponse.gxComponents))if(g=gx.csv.lastEvtResponse.gxComponents[a],gx.lang.emptyObject(g))c="";else{var c=gx.html.cleanHtmlRefs(g),e=gx.fn.getHidden(this.grid.gxComponentContext+b+this.gridRow);e||(e=d.GXClass);gx.lang.emptyObject(e)||this.grid.addComponentToDraw({load:!0,n:e.toLowerCase(),p:this.grid.gxComponentContext+b+this.gridRow,c:g})}this.id=a;this.content=c};this._getHtml=function(){this.append("<div");
this.tagAtt("id",this.id);this.tagAtt("class",gx.GxObject.WEBCOMPONENT_CLASS_NAME);this.append(">");this.append(this.content);this.append("</div>")}},embeddedPage:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.embeddedPage;this.align="center";this.scrollbars="auto";this.borderStyle="1";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m){this.id=a;this.value=d;this.visible=0!=b;this.width=g;this.widthUnit=c;this.height=e;this.heightUnit=f;this.borderStyle=n;this.align=h;this.title=
j;this.scrollbars=m};this._getHtml=function(){this.style+=this.visible?"":";display:none;";this.append("<iframe");this.tagAtt("frameborder",this.borderStyle);this.tagAtt("align",this.align);this.tagAtt("scrolling",this.scrollbars);0<this.height&&this.tagAtt("height",this.height+this.heightUnit);0<this.width&&this.tagAtt("width",this.width+this.widthUnit);""!=this.title&&this.tagAtt("title",this.title);""!=this.id&&(this.tagAtt("id",this.id),this.tagAtt("name",this.id));""!=this.value&&this.tagAtt("src",
this.value);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">");this.append("</iframe>")}},table:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.table;this.backColor=this.cellPadding=this.cellSpacing="";this.setProperties=function(a,d,b,g,c,e,f,n,h,j,m,k,l,q,o,p){this.id=a;this.visible=0!=d;this.cssClass=b;this.background=g;this.backColor=c;this.borderColor=e;this.align=f;this.title=n;this.borderWidth=h;this.cellPadding=
j;this.cellSpacing=m;this.height=k;this.width=l;this.rules=q;this.heightUnit=o;this.widthUnit=p;this.style=""};this._getHtml=function(){this.style+=this.visible?"":";display:none;";""!=this.background&&(this.background=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+this.background,!0),this.style=this.style+"background-image: url("+this.background+");");if(""!=this.backColor){var a=parseInt(this.backColor),a=isNaN(a)?this.backColor:gx.color.html(a).Html;this.style=this.style+"background-color: "+
a+";"}""!=this.borderColor&&(a=parseInt(this.borderColor),a=isNaN(a)?this.borderColor:gx.color.html(a).Html,this.style=this.style+"border-color: "+a+";");""!=this.borderWidth&&(this.style=this.style+"border-width: "+this.borderWidth+";");""!=this.height&&(this.style=this.style+"height: "+this.height+this.heightUnit+";");""!=this.width&&(this.style=this.style+"width: "+this.width+this.widthUnit+";");this.append("<table");this.tagAtt("id",this.id);this.tagAtt("align",this.align);""!=this.borderWidth&&
this.tagAtt("border",this.borderWidth);""!==this.cellSpacing&&this.tagAtt("cellspacing",this.cellSpacing);""!==this.cellPadding&&this.tagAtt("cellpadding",this.cellPadding);""!=this.rules&&"none"!=this.rules&&this.tagAtt("rules",this.rules);""!=this.title&&this.tagAtt("title",this.title);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.style&&this.tagAtt("style",this.style);this.append(">")}},row:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.row;this.verticalAlign=
this.align=this.borderColor=this.backColor="";this.isFreestyleRow=!1;this.oncontextmenu="";this.setProperties=function(a,d,b){d&&(this.cssClass=this.ownCssClass?d+(this.ownCssClass?" "+this.ownCssClass:""):d);this.style=b};this._getHtml=function(){this.append("<tr");""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);
""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",this.oncontextmenu);this.append(">")}},cell:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.cell;this.rowSpan=this.colSpan=this.verticalAlign=this.align=this.borderColor=this.backColor=this.background=this.style=
"";this.setProperties=function(a,d){this.background=a;d&&""!=d&&0<d.indexOf("style=")&&(this.style=d.substring(8),this.style=this.style.substring(0,this.style.length-1)+";")};this._getHtml=function(){this.append("<td");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+
";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);""!=this.cssClass&&this.tagAtt("class",this.cssClass);this.append(">")}},responsiveRow:function(a,d,b,g,c){this.base(a,d,b,g,c);this._getHtml=function(){this.append("<div");
""!=this.id&&this.tagAtt("id",this.id);this.isFreestyleRow&&this.tagAtt("gxrow",this.gridRow);""!=this.backColor&&(this.style=this.style+"background-color:"+this.backColor+";");""!=this.borderColor&&this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.style&&this.tagAtt("style",this.style);this.tagAtt("class","row "+(this.cssClass||""));""!=this.oncontextmenu&&this.tagAtt("oncontextmenu",
this.oncontextmenu);this.append(">")}},responsiveCell:function(a,d,b,g,c){this.base(a,d,b,g,c);this._getHtml=function(){this.append("<div");"undefined"!=typeof this.width&&0!=this.width&&this.tagAtt("width",this.width);"undefined"!=typeof this.height&&0!=this.height&&this.tagAtt("height",this.height);""!=this.background&&this.tagAtt("background",this.background);""!=this.backColor&&(this.style+="background-color:"+this.backColor+";");""!=this.style&&this.tagAtt("style",this.style);""!=this.borderColor&&
this.tagAtt("bordercolor",this.borderColor);""!=this.align&&this.tagAtt("align",this.align);""!=this.verticalAlign&&this.tagAtt("valign",this.verticalAlign);""!=this.colSpan&&this.tagAtt("colspan",this.colSpan);""!=this.rowSpan&&this.tagAtt("rowspan",this.rowSpan);this.tagAtt("class","col-xs-12 "+(this.cssClass||""));this.append(">")}},group:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.group;this.caption="";this.setProperties=function(a,d,b,g,c,e,f,n,h){this.id=a;this.caption=
d;this.visible=0!=b;this.width=g;this.widthUnit=c;this.height=e;this.heightUnit=f;this.cssClass=n;this.extraAtts=h};this._getHtml=function(){this.append("<fieldset");this.tagAtt("id",this.id);this.tagAtt("name",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);var a="-moz-border-radius:3pt;";"0"!=this.width&&(a+="width: "+this.width+this.widthUnit+";");"0"!=this.height&&(a+="height: "+this.height+this.heightUnit+";");this.visible||(a+="display:none;");this.tagAtt("style",a);""!=this.extraAtts&&
this.append(this.extraAtts);this.append(">");this.append("<legend");""!=this.cssClass&&this.tagAtt("class",this.cssClass+"Title");this.append(">");this.append(gx.getMessage(this.caption));this.append("</legend>")}},div:function(a,d,b,g,c){this.base(a,d,b,g,c);this.type=gx.html.controls.types.div;this.setProperties=function(a,d,b,g,c,e,f,n){this.id=a;this.visible=0!=d;this.width=b;this.widthUnit=g;this.height=c;this.heightUnit=e;this.cssClass=f;this.extraAtts=n};this._getHtml=function(){var a=this.visible?
"":";display:none;";""!=this.height&&(a=a+"height: "+this.height+this.heightUnit+";");""!=this.width&&(a=a+"width: "+this.width+this.widthUnit+";");this.append("<div");this.tagAtt("id",this.id);""!=this.cssClass&&this.tagAtt("class",this.cssClass);""!=a&&this.tagAtt("style",a);""!=this.extraAtts&&this.append(this.extraAtts);this.append(">")}},specificDomainCtrls:function(a){if(a.domainName==gx.domains.component&&0==a.enabled){var d=a.enabled?";display:none;":"",b=a.id+"_comp_trigger",g=gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+"Resources\\"+gx.theme+"\\Select.png",!1);a.append("<img");a.tagAtt("src",g);a.tagAtt("id",b);a.tagAtt("class","");a.tagAtt("style",d+" margin-left:2px; cursor:pointer;");a.tagAtt("onclick","gx.popup.openUrl('"+a.value+"')");a.append("/>");d=[];d.push(a.column.gxId)}else a.dataType==gx.types.geolocation&&(d=!a.enabled?";display:none;":"",b=gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"Resources\\locateMe.png",!0),g=a.id+"_geoLocMe",a.append("<img"),a.tagAtt("src",b),a.tagAtt("id",
g),a.tagAtt("class","GeoLocOption"),a.tagAtt("style",d),a.tagAtt("onclick","gx.geolocation.getMyPosition(this)"),a.append(">"),d=[],d.push(a.column.gxId))},_init:function(){gx.lang.inherits(this.singleLineEdit,this.htmlControl);gx.lang.inherits(this.multipleLineEdit,this.singleLineEdit);gx.lang.inherits(this.blob,this.htmlControl);gx.lang.inherits(this.radio,this.htmlControl);gx.lang.inherits(this.comboBox,this.htmlControl);gx.lang.inherits(this.listBox,this.comboBox);gx.lang.inherits(this.checkBox,
this.htmlControl);gx.lang.inherits(this.imageReadOnly,this.htmlControl);gx.lang.inherits(this.textBlock,this.htmlControl);gx.lang.inherits(this.button,this.htmlControl);gx.lang.inherits(this.grid,this.htmlControl);gx.lang.inherits(this.userControl,this.htmlControl);gx.lang.inherits(this.userControlContainer,this.htmlControl);gx.lang.inherits(this.webComponent,this.htmlControl);gx.lang.inherits(this.embeddedPage,this.htmlControl);gx.lang.inherits(this.table,this.htmlControl);gx.lang.inherits(this.row,
this.htmlControl);gx.lang.inherits(this.cell,this.htmlControl);gx.lang.inherits(this.group,this.htmlControl);gx.lang.inherits(this.multimedia,this.htmlControl);gx.lang.inherits(this.image,this.multimedia);gx.lang.inherits(this.video,this.multimedia);gx.lang.inherits(this.audio,this.multimedia);gx.lang.inherits(this.div,this.htmlControl);gx.lang.inherits(this.responsiveRow,this.row);gx.lang.inherits(this.responsiveCell,this.cell)}}}}(gx.$);
gx.util.Observable=function(){return{observers:[],addObserver:function(c,f,e,b){new gx.thread.Mutex(this,this.addObserverSync,arguments)},addObserverSync:function(c,f,e,b){0>this.indexOf(c,f,e)&&this.observers.push({e:c,o:f,f:e,cfg:b})},deleteObserver:function(c,f,e){new gx.thread.Mutex(this,this.deleteObserverSync,[c,f,e])},deleteObserverSync:function(c,f,e){c=this.indexOf(c,f,e);0<=c&&this.observers.removeAt(c)},removeAll:function(){this.observers=[]},indexOf:function(c,f,e){for(var b=this.observers.length,
a=0;a<b;a++){var d=this.observers[a];if(d.e==c&&d.o==f&&d.f==e)return a}return-1},notify:function(c,f){f||(f=[]);for(var e=this.observers.length,b=[],a=0;a<e;a++){var d=this.observers[a];if(d.e==c&&!d.removed)try{d.cfg&&d.cfg.single&&(d.removed=!0,b.push(a)),d.f.apply(d.o,f)}catch(g){gx.dbg.logEx(g,"gxfx.js","gx.obs.notify")}}if(0<b.length)for(a=b.length-1;0<=a;a--)this.observers.removeAt(b[a])}}};
gx.fx={delayedSuggest:function(){for(var c=gx.suggestControls.length,f=0;f<c;f++)this.installSuggest(gx.suggestControls[f],!0)},installSuggest:function(c,f){if(!f&&document.readyState&&"complete"!=document.readyState)gx.suggestControls.push(c);else try{var e=gx.O.getValidStructFld(c.id);if(e&&!gx.lang.emptyObject(e.gxsgprm)){var b=0<e.grid?gx.fn.currentGridRowImpl(e.grid):"main",a=e.gxsgprm;a.installed||(a.installed={});a.installed[b]||(gx.ajax.suggest(a[1],c.id,a[0],a[3],a[2]),a.installed[b]=!0)}}catch(d){gx.dbg.logEx(d,
"gxfx.js","installSuggest")}},updateSuggestParms:function(c){if(c)for(var f=c.length,e=0;e<f;e++){var b=gx.fn.validStruct(c[e]);b&&"function"==typeof b.c2v&&b.c2v()}},firesuggest:function(c,f,e,b){this.updateSuggestParms(b);c.textbox.value&&f.requestSuggestions(c,e);delete gx.fx.suggestProcessing;gx.fx.obs.notify("gx.validation")},autoSuggestControl:function(c,f,e,b,a,d){this.cur=-1;this.layer=this.IFrameControl=null;this.provider=f;this.textbox=c;"undefined"==typeof this.textbox.GXonblur&&(this.textbox.GXonblur=
c.onblur);this.ControlRefresh=e;this.typeahead=b;this.suggestParms=a||[];this.sdtParms=d||[];this.requestSuggestions=function(a,d,b){gx.fx.suggestProcessing=true;var c=this.suggestParms;this.timer&&window.clearTimeout(this.timer);this.timer=window.setTimeout(function(){gx.fx.firesuggest(a,d,b,c)},400)};this.hideSuggestions=function(){if(this.IFrameControl)this.IFrameControl.style.visibility="hidden";this.layer.style.visibility="hidden"};this.highlightSuggestion=function(a){for(var d=this.layer.childNodes.length,
b=0;b<d;b++){var c=this.layer.childNodes[b];if(c==a)c.className="current";else if(c.className=="current")c.className=""}};this.init=function(){var a=function(a){if(!a)a=window.event;this.handleKeyUp(a)};gx.evt.attach(this.textbox,"keyup",a.closure(this));gx.evt.attach(this.textbox,"keydown",function(a){if(!a)a=window.event;this.handleKeyDown(a)}.closure(this));gx.evt.attach(this.textbox,"blur",function(){this.hideSuggestions();this.textbox.GXonblur()}.closure(this));gx.util.browser.isFirefox()&&gx.evt.attach(this.textbox,
"input",a.closure(this));this.createDropDown()};this.nextSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur<a.length-1?this.cur+1:0;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.previousSuggestion=function(){var a=this.layer.childNodes;if(a.length>0){this.cur=this.cur>0?this.cur-1:a.length-1;a=a[this.cur];this.highlightSuggestion(a);this.pickvalue(a.firstChild.nodeValue)}};this.selectRange=function(a,d){if(this.textbox.createTextRange){var b=
this.textbox.createTextRange();b.moveStart("character",a);b.moveEnd("character",d-this.textbox.value.length);b.select()}else this.textbox.setSelectionRange&&this.textbox.setSelectionRange(a,d);gx.csv.stopOnError&&this.textbox.focus()};this.showSuggestions=function(a){this.cur=-1;var d=null;this.setupLayer();gx.dom.shouldPurge()&&gx.dom.purge(this.layer,true);this.layer.innerHTML="";if(!this.IFrameControl){d=false;this.IFrameControl=gx.dom.byId("gxAutosuggestIFrame");if(!this.IFrameControl){d=true;
this.IFrameControl=document.createElement("IFRAME");this.IFrameControl.src="about:blank";this.IFrameControl.id="gxAutosuggestIFrame"}this.IFrameControl.style.zIndex=1;this.IFrameControl.style.visibility="hidden";this.IFrameControl.style.position="absolute";this.IFrameControl.frameBorder="0";d&&document.body.appendChild(this.IFrameControl)}for(var b=a.length,c=0;c<b;c++){d=document.createElement("div");d.appendChild(document.createTextNode(a[c].d));d.style.width=this.textbox.offsetWidth;this.layer.appendChild(d)}this.layer.style.left=
this.getLeft()+"px";this.layer.style.top=this.getTop()+this.textbox.offsetHeight+"px";this.layer.style.visibility="visible";this.layer.style.zIndex=2;this.IFrameControl.style.top=this.layer.style.top;this.IFrameControl.style.left=this.layer.style.left;this.IFrameControl.style.height=this.layer.offsetHeight;this.IFrameControl.style.width=this.layer.offsetWidth;this.IFrameControl.style.visibility="visible"};this.typeAhead=function(a){if(this.textbox.createTextRange||this.textbox.setSelectionRange){var d=
this.textbox.value.length;this.pickvalue(a);a=a.length;d<a&&this.selectRange(d,a)}};this.pickvalue=function(a){for(var d=this.aSuggestions.length,b=0;b<d;b++)if(this.aSuggestions[b].d==a){this.textbox.value=a;gx.evt.onchange_impl(this.textbox);break}};this.autosuggest=function(a,d){this.aSuggestions=a;var b=this.aSuggestions.length;if(d&&this.aSuggestions!=null&&b==1)this.typeAhead(this.aSuggestions[0].d);else if(this.textbox==gx.csv.lastControl&&(this.aSuggestions!=null&&b>0)&&(b==1&&this.aSuggestions[0].d!=
this.textbox||b>1)){this.showSuggestions(this.aSuggestions);return}this.hideSuggestions()};this.createDropDown=function(){var a=false;this.layer=gx.dom.byId("gxAutosuggestElement");if(!this.layer){a=true;this.layer=document.createElement("div");this.layer.className="suggestions";this.layer.id="gxAutosuggestElement"}this.setupLayer();a&&document.body.appendChild(this.layer)};this.setupLayer=function(){this.layer.style.visibility="hidden";this.layer.style.width=this.textbox.offsetWidth;this.layer.onmousedown=
this.layer.onmouseup=this.layer.onmouseover=function(a){var a=a||window.event,d=gx.evt.source(a);if(a.type=="mousedown"){gx.evt.cancel(a,true);this.pickvalue(d.firstChild.nodeValue);this.hideSuggestions();window.setTimeout(function(){gx.fn.setFocus(this.textbox)},100)}else a.type=="mouseover"?this.highlightSuggestion(d):this.textbox.focus()}.closure(this)};this.getLeft=function(){for(var a=this.textbox,d=0;a.tagName!="BODY";){d=d+a.offsetLeft;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){d=
d-a.scrollLeft;a=a.parentNode}return d};this.getTop=function(){for(var a=this.textbox,d=0;a.tagName!="BODY";){d=d+a.offsetTop;a=a.offsetParent}for(a=this.textbox;a.tagName!="BODY";){d=d-a.scrollTop;a=a.parentNode}return d};this.handleKeyDown=function(a){switch(a.keyCode){case 38:this.previousSuggestion();break;case 40:this.nextSuggestion();break;case 13:this.hideSuggestions()}};this.handleKeyUp=function(a){a=a.keyCode;a==9?this.hideSuggestions():a==8||a==46?this.requestSuggestions(this,this.provider,
false):a<32||(a>=33&&a<46||a>=112&&a<=123)||this.requestSuggestions(this,this.provider,this.typeahead)};this.init()},suggestProvider:function(c,f,e){this.ControlId=c;this.ControlRefresh=f;this.CtrlSvc=e;this.requestSuggestions=function(b,a){var d,g=gx.ajax.objectUrl()+"?",c="gxajaxSuggest_"+this.CtrlSvc,e=this.ControlId.length;for(d=0;d<e;d++)c+=","+encodeURIComponent(eval(this.ControlId[d]));c+=","+encodeURIComponent(gx.fn.getControlValue_impl(this.ControlRefresh));e=b.sdtParms.length;for(d=0;d<
e;d++)c+=","+encodeURIComponent(eval(b.sdtParms[d]));g+=gx.ajax.encryptParms(gx.O,c);gx.http.doCall({method:"GET",url:g,handler:function(d,g){var c=gx.json.evalJSON(g);(this.values=gx.fx.returnSuggestValues(this.VarRefresh,c[0]))?b.autosuggest(this.values,a):b.hideSuggestions()},obj:this})}},returnSuggestValues:function(c,f){return f},addElement:function(c,f,e){if(!this.elementExists(c,f,e)){var b=f.id;!0===e&&(b+=f.types.sort().join(""));c.splice(0,0,f);c[b]=f}},elementExists:function(c,f,e){var b=
f.id;!0===e&&(b+=f.types.sort().join(""));return c[b]?!0:!1},deleteElement:function(c,f,e){var b=f;e&&(b+=e.sort().join(""));c[b]&&delete c[b];for(var b=c.length,a=0;a<b;a++){var d=c[a];if(d.id==f)if(e){if(this.matchingTypes(e,d.types)){c.removeAt(a);break}}else{c.removeAt(a);break}}return c},matchingTypes:function(c,f){for(var e=f.length,b=0;b<e;b++){for(var a=!1,d=c.length,g=0;g<d;g++)f[b].toLowerCase()==c[g].toLowerCase()&&(a=!0);if(!a)return!1}return!0},findControl:function(c,f,e){f=gx.dom.el(e);
if(null!=f)return f;f=gx.dom.el("gxHTMLWrp"+e);if(null!=f)return f;e=RegExp("^"+e+"_(?:(?:[0-9]){4})+$");return null!=c&&e.test(c.id)?c:null},isUnderMouse:function(c){var f=gx.evt.mouse.x,e=gx.evt.mouse.y,b=gx.dom.position(c),a=gx.dom.dimensions(c);return f>=b.x&&f<=b.x+a.w&&e>=b.y&&e<=b.y+a.h||"DIV"==c.tagName&&(0===a.w&&0===a.h&&c.firstChild)&&(b=gx.dom.position(c.firstChild),a=gx.dom.dimensions(c.firstChild),f>=b.x&&f<=b.x+a.w&&e>=b.y&&e<=b.y+a.h)?!0:!1},dom:{generics:[],dblclicks:[],getEventHandlers:function(c){return"dblclick"==
c?this.dblclicks:this.generics},addEventHandler:function(c,f,e,b){e=gx.lang.emptyObject(c)?e:c.CmpContext+e;c={id:f+e,cId:e,type:f,obj:c,hdl:b};f=this.getEventHandlers(f);gx.fx.addElement(f,c,!1)},raiseEvent:function(c,f){for(var e=gx.evt.source(f),b=this.getEventHandlers(c),a=b.length,d=0;d<a;d++){var g=b[d],n=gx.fx.findControl(e,g.obj,g.cId);null!=n&&gx.fx.isUnderMouse(n)&&g.hdl.call(g.obj)}},highlight:function(c,f,e){var b=gx.color.fromRGB(f[0],f[1],f[2]),a=gx.dom.getStyle(c,"backgroundColor"),
d="transparent"==a||"rgba(0, 0, 0, 0)"==a;return{play:function(){c.style.backgroundColor=b.Html;setTimeout(this.end,e)},end:function(){var b=a;d&&(b="transparent");c.style.backgroundColor=b}}}},obs:new gx.util.Observable,dnd:{obj:null,dragCtrl:null,clonCtrl:null,sources:[],targets:[],dropCtrl:null,noDropCtrl:null,toHdl:null,drag:function(c,f,e){e&&(gx.evt.setEventRow(c,this.dragCtrl),this.obj=e.call(c,this.dragCtrl),this.obj.gxDragTypes=f)},drop:function(c,f,e){e&&e.call(f,c,this.dragCtrl,this.obj)},
noDrop:function(){var c=this.noDropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"NoAcceptDrag")},out:function(){var c=this.dropCtrl;c&&c.gxClassName&&(c.className=c.gxClassName);this.dropCtrl=null;c=this.noDropCtrl;null!=c&&c.gxClassName&&(c.className=c.gxClassName);this.noDropCtrl=null},over:function(){var c=this.dropCtrl;null!=c&&c.gxDndClassName&&(c.className=c.gxDndClassName+"AcceptDrag")},deleteClonControl:function(){null!=this.clonCtrl&&gx.dom.removeControlSafe(this.clonCtrl);
this.clonCtrl=null},restoreControl:function(){var c=this.clonCtrl;null!=c&&((null==this.toHdl&&(c.dropLeft=parseFloat(c.style.left||"0"),c.dropTop=parseFloat(c.style.top||"0"),this.toHdl=setInterval("gx.fx.dnd.restoreControl()",2)),this.controlRestored())?(clearInterval(this.toHdl),this.toHdl=null,this.deleteClonControl()):(c=this.nextCoords(),this.moveDragControl(c.X,c.Y)))},nextCoords:function(){var c=this.clonCtrl,f=parseFloat(c.style.left||"0"),e=parseFloat(c.style.top||"0"),b=0,a=0;f>=e?(b=f-
1,a=c.dropTop-(c.dropTop-c.originalTop)*(c.dropLeft-b)/(c.dropLeft-c.originalLeft)):(a=e-1,b=c.dropLeft-(c.dropTop-a)*(c.dropLeft-c.originalLeft)/(c.dropTop-c.originalTop));b<=c.originalLeft&&(b=c.originalLeft);a<=c.originalTop&&(a=c.originalTop);return{X:b,Y:a}},moveControl:function(c){if(null==this.clonCtrl){var f=document.createElement("DIV");f.style.position="absolute";c.gxDndClassName&&(f.className=c.gxDndClassName+"Dragging");gx.dom.shouldPurge()&&gx.dom.purge(f,!0);f.innerHTML=this.dragInfo();
gx.fn.setOpacity(50,f);document.body.appendChild(f);f.originalLeft=gx.evt.mouse.x-10;f.originalTop=gx.evt.mouse.y-10;f.diffLeft=10;f.diffTop=10;this.clonCtrl=f}this.moveDragControl(gx.evt.mouse.x,gx.evt.mouse.y)},controlRestored:function(){var c=this.clonCtrl;if(null==c)return!0;var f=parseFloat(c.style.left||"0"),e=parseFloat(c.style.top||"0")-c.originalTop;return 0>=f-c.originalLeft&&0>=e?!0:!1},moveDragControl:function(c,f){try{var e=this.clonCtrl;null!=e&&(e.style.left=c-e.diffLeft+"px",e.style.top=
f-e.diffTop+"px")}catch(b){this.deleteClonControl()}},dragInfo:function(){if(null!=this.obj){var c="",f="",e;for(e in this.obj){if("gxDragTypes"!=e){var b=[c];if("function"==typeof this.obj[e])continue;f+=e+": "+this.obj[e]+"</br>";c=b[0]}if(5<=c){f+="...";break}c++}return f}return""},deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var f=[],e,b=this.sources.length;for(e=0;e<b;e++){var a=this.sources[e];a.obj!=c&&f.push(a)}this.sources=f;
f=[];b=this.targets.length;for(e=0;e<b;e++)a=this.targets[e],a.obj!=c&&f.push(a);this.targets=f},addSource:function(c,f,e,b,a){gx.thread.Mutex(this,this.addSourceSync,[c,f,e,b,a])},addSourceSync:function(c,f,e,b,a){f=gx.lang.emptyObject(c)?f:c.CmpContext+f;gx.fx.addElement(this.sources,{id:f,cssClass:e,types:b,obj:c,hdl:a},!1)},addTarget:function(c,f,e,b,a){gx.thread.Mutex(this,this.addTargetSync,[c,f,e,b,a])},addTargetSync:function(c,f,e,b,a){f=gx.lang.emptyObject(c)?f:c.CmpContext+f;gx.fx.addElement(this.targets,
{id:f,cssClass:e,types:b,obj:c,hdl:a},!0)},deleteSource:function(c){gx.thread.Mutex(this,this.deleteSourceSync,[c])},deleteSourceSync:function(c){this.sources=gx.fx.deleteElement(this.sources,c)},getSource:function(c){for(var c=gx.evt.source(c),f=this.sources.length,e=0;e<f;e++){var b=this.sources[e],a=this.dragCtrl=gx.fx.findControl(c,b.obj,b.id);if(null!=a&&(a.gxClassName=a.className,a.gxDndClassName=b.cssClass,gx.fx.isUnderMouse(a)))return b}return this.obj=this.dragCtrl=null},getTarget:function(c,
f){for(var e=gx.evt.source(c),b=this.targets.length,a=0;a<b;a++){var d=this.targets[a],g=gx.fx.findControl(e,d.obj,d.id);if(null!=g&&(g.gxClassName=g.className,g.gxDndClassName=d.cssClass,gx.fx.isUnderMouse(g))){if(gx.fx.matchingTypes(f,d.types))return this.noDropCtrl=null,this.dropCtrl=g,d;this.out();this.noDropCtrl=g;this.noDrop();return null}}this.out();return null}},notifications:{queuedEvents:[],addTracker:function(c,f,e,b,a,d){c.notifications||(c.notifications=[],gx.fx.obs.addObserver("gx.ws.onMessage",
c,gx.fx.notifications.notify.closure(c),{single:!1}),gx.fx.obs.addObserver("gx.onafterevent",c,gx.fx.notifications.fireQueuedEvents.closure(c),{single:!1}));c.notifications[f||""]={gxO:c,handler:a,eventName:e,type:b,noWait:d};gx.webSocket._init()},notify:function(c){var c=gx.json.evalJSON(c),f=this.notifications[c.GroupName||""];f&&(gx.fx.notifications.queuedEvents.push({notifObj:f,data:c}),(f.noWait||!gx.evt.processing||gx.csv.validating)&&gx.fx.notifications.fireQueuedEvents())},fireQueuedEvents:function(){for(var c=
0;c<gx.fx.notifications.queuedEvents.length;c++){var f=gx.fx.notifications.queuedEvents[c];if(!f.executed){gx.fx.notifications.queuedEvents.splice(c--,1);var e=f.notifObj.gxO;f.executed=!0;if(gx.lang.emptyObject(f.data.Object)||f.data.Object.toUpperCase()==e.ServerClass.toUpperCase()){var b=f.notifObj.type,a=f.notifObj.eventName;if(a){var d=e.isServerEvent(a),g={};g[b[0][0]]=f.data;e.setEventParameters(f.notifObj.type,g);gx.evt.dispatcher.dispatch(e.getServerEventName(a),e,0,0,d)}else f.notifObj.handler(f.data)}}}}},
ctx:{setters:[],trackers:[],deleteHandlers:function(c){gx.thread.Mutex(this,this.deleteHandlersSync,[c])},deleteHandlersSync:function(c){var f,e=[],b=this.setters.length;for(f=0;f<b;f++){var a=this.setters[f];a.obj!=c&&e.push(a)}this.setters=e;e=[];b=this.trackers.length;for(f=0;f<b;f++)a=this.trackers[f],a.obj!=c&&e.push(a);this.trackers=e},addSetter:function(c,f,e,b,a){gx.thread.Mutex(this,this.addSetterSync,[c,f,e,b,a])},addSetterSync:function(c,f,e,b,a){f=gx.lang.emptyObject(c)?f:c.CmpContext+
f;gx.fx.addElement(this.setters,{id:f,cssClass:e,types:b,obj:c,hdl:a},!1)},addTracker:function(c,f,e){gx.thread.Mutex(this,this.addTrackerSync,[c,f,e])},addTrackerSync:function(c,f,e){gx.fx.addElement(this.trackers,{id:c.CmpContext+c.IsMasterPage.toString(),cssClass:"",types:f,obj:c,hdl:e},!0)},deleteSetter:function(c){gx.thread.Mutex(this,this.deleteSetterSync,[c])},deleteSetterSync:function(c){this.setters=gx.fx.deleteElement(this.setters,c)},notify:function(c,f,e){gx.thread.Mutex(this,this.notifySync,
[c,f,e])},notifySync:function(c,f,e){if(c&&c.forcedFocus)c.forcedFocus=!1;else{var b,a=gx.lang.emptyObject,d=function(a,d){var b=gx.O;gx.setGxO(a);d();gx.setGxO(b)},g=null;if(a(f)||a(e)){var n=this.setters.length;for(b=0;b<n;b++){var h=this.setters[b];if(a(c)){if(g=gx.fx.findControl(null,h.obj,h.id),null!=g&&a(g.onfocus)&&gx.fx.isUnderMouse(g)){d.apply(this,[h.obj,function(){gx.evt.setEventRow(h.obj,g);f=h.types;e=h.hdl.call(h.obj,g)}]);break}}else if(c.id==h.id){d.apply(this,[h.obj,function(){g=
c;gx.evt.setEventRow(h.obj,g);f=h.types;e=h.hdl.call(h.obj,g)}]);break}}}if(!a(f)&&(e||""===e)){a=this.trackers.length;for(b=0;b<a;b++){var j=this.trackers[b];gx.fx.matchingTypes(f,j.types)&&d.apply(this,[j.obj,function(){j.hdl.call(j.obj,null,g,e)}])}}}}}};
gx.date=function(){var c=/([0-9]{1,4})\/?-?([0-9]{1,2})\/?-?([0-9]{1,4})\s?T?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,f=/([0-9]{1,2}):?([0-9]{1,2})?:?([0-9]{1,2})?:?([0-9]{1,2})?\s?(AM|PM)?/i,e=/^[0-9]{4}[/-]{1}[0-9]{2}[/-]{1}[0-9]{2}$/,b=/^([ ]*([\/|\-][ ]*[\/|\-][ ]*((00|12)(:00(:00)?)?[ ]*(a|am)?)?)?)?[ ]*$/i,a=new Date(0,0,0,0,0,0,0);return{UTC_Offset:(new Date).getTimezoneOffset(),clone:function(){return new Date(this.getTime())},equalsNoTime:function(a){return this.getDay()==
a.getDay()&&this.getMonth()==a.getMonth()&&this.getFullYear()==a.getFullYear()?!0:!1},toJson:function(){var a=new gx.date.gxdate("");a.assign_date(this);return a.json()},gxdate:function(d,b){this.json=function(){var a=this.TimeFmt;this.TimeFmt=24;var d=this.HasTimePart;this.HasTimePart=!0;var b=this.getStringWithFmt("Y4MD")+" "+this.getTimeString(!0,!0);this.TimeFmt=a;this.HasTimePart=d;return b};this.mapCTODFormatToPattern=function(a){return"ANSI"==a?"Y4MD":a};this.emptyDateString=function(a){return-1==
a.indexOf("Y4")?gx.blankWhenEmpty?"        ":"  /  /  ":gx.blankWhenEmpty?"          ":"Y4MD"==a?"    /  /  ":"  /  /    "};this.getStringWithFmt=function(d){d=this.mapCTODFormatToPattern(d);if(0===this.Value-a)return this.emptyDateString(d);var b=d,g=gx.text.padr(this.Value.getDate().toString(),2,"0"),c=gx.text.padr((this.Value.getMonth()+1).toString(),2,"0"),e=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),f=this.FormatPos(d),b=b.replace("D",g+(3>f.DPos?"/":"")),b=b.replace("M",c+(3>f.MPos?
"/":""));-1==d.indexOf("Y4")?(e=e.slice(2,4),b=b.replace("Y",e+(3>f.YPos?"/":""))):b=b.replace("Y4",e+(3>f.YPos?"/":""));return b};this.getString=function(a){gx.lang.emptyObject(a)&&(a=gx.dateFormat);return this.getStringWithFmt(a)};this.toString=function(){return this.getString()};this.gxdtoc=function(a,d){return this.getStringWithFmt(this.mapCTODFormatToPattern(a)).replace("/",d)};this.getUrlVal=function(){if(gx.date.isNullDate(this))return"";var a=gx.text.padr(this.Value.getDate().toString(),2,
"0"),d=gx.text.padr((this.Value.getMonth()+1).toString(),2,"0"),b=gx.text.padr(this.Value.getFullYear().toString(),4,"0"),g=this.HasTimePart?gx.text.padr(this.Value.getHours().toString(),2,"0"):"",c=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",e=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";return b+d+a+g+c+e};this.getTimeString=function(a,d,b){if(gx.date.isNullDate(this)&&gx.blankWhenEmpty){var g="";b&&(g+="  ");a&&(g+="   ");d&&(g+="   ");
return g}var g="",c=this.Value.getHours(),b=b||!0;12==this.TimeFmt&&12<=c?(12<c&&(c-=12),g=" PM"):12==this.TimeFmt&&(g=" AM");var e=this.HasTimePart?gx.text.padr(c.toString(),2,"0"):"",f=this.HasTimePart?gx.text.padr(this.Value.getMinutes().toString(),2,"0"):"",o=this.HasTimePart?gx.text.padr(this.Value.getSeconds().toString(),2,"0"):"";0===c&&""!==g&&(e="12");c="";b&&(c=e);a&&(c=c+":"+f);d&&(c=c+":"+o);return c+g};this.FormatPos=function(a){var d,b,g;"ANSI"==a?(d=1,b=2,a=3):(g=a.indexOf("Y4"),d=
-1==g?a.indexOf("Y")+1:g+1,b=a.indexOf("M"),0!==g&&b++,a=a.indexOf("D"),0!==g&&a++);return{YPos:d,MPos:b,DPos:a}};this.assign_date=function(d){d instanceof gx.date.gxdate?(this.Value=d.Value,this.HasTimePart=d.HasTimePart):this.Value=void 0===d?a:d};this.toUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()+6E4*this.Value.getTimezoneOffset());a.HasTimePart=
this.HasTimePart;return a};this.fromUTC=function(){if(gx.date.isNullDate(this)||"undefined"==typeof gx.StorageTimeZone||gx.StorageTimeZone==gx.NULL_TIMEZONEOFFSET)return this;var a=new gx.date.gxdate("");a.Value.setTime(this.Value.getTime()-6E4*this.Value.getTimezoneOffset());a.HasTimePart=this.HasTimePart;return a};this.assign_string=function(a,d,b,g){var e=c,l=e.exec(a),q=0;if(null==l)-1!=a.indexOf("  /  /  ")&&(b=!0);else for(var o=l.length,p=1;p<o;p++)gx.lang.emptyObject(l[p])||q++;var r=this.FormatPos(d),
s=p=o=d=0,u=0,t=0,x=0;try{if(6==r.DPos+r.MPos+r.YPos&&null!=l&&3<=q){null!=l[r.YPos]&&(d=parseInt(l[r.YPos],10));if(isNaN(d))throw"InvalidDate";d<this.FYearOfCentury?d+=2E3:100>d?d+=1900:1E3>d&&(d+=1E3);null!=l[r.MPos]&&(o=parseInt(l[r.MPos],10)-1);if(isNaN(o)||0>o||11<o)throw"InvalidDate";null!=l[r.DPos]&&(p=parseInt(l[r.DPos],10));if(isNaN(p)||0>p||p>gx.date.maxDays(o,d))throw"InvalidDate";}this.HasTimePart=!1;r=0;null==l?(e=f,l=e.exec(a),null!=l&&(r=1,this.HasTimePart=!0)):3<q&&(r=4,this.HasTimePart=
!0);if(this.HasTimePart&&!b){null!=l[r]&&(s=parseInt(l[r],10));if(gx.lang.emptyObject(l[r])||isNaN(s))throw this.HasTimePart=!1,"InvalidHour";null!=l[r+1]&&(u=parseInt(l[r+1],10));isNaN(u)&&(u=0);null!=l[r+2]&&(t=parseInt(l[r+2],10));isNaN(t)&&(t=0);null!=l[r+3]&&(x=parseInt(l[r+3],10));isNaN(x)&&(x=0);if(!this.validTime(-1!=a.toLowerCase().indexOf("m"),s,u,t,x))throw"InvalidHour";if((-1!=a.indexOf("PM")||-1!=a.indexOf("pm"))&&12>s)s+=12;if((-1!=a.indexOf("AM")||-1!=a.indexOf("am"))&&12==s)s=0}}catch(A){if(g)throw A;
"InvalidDate"==A&&(x=t=u=s=p=o=d=0);"InvalidHour"==A&&(x=t=u=s=0)}this.Value=new Date(d,o,p,s,u,t,x);if(0<d+o+p+s+u+t+x&&(!this.HasTimePart||b)&&this.Value.getDate()!=p)this.Value=new Date(Date.UTC(d,o,p,s+12,u,t,x))};this.validTime=function(a,d,b,g,c){return a&&12<d||!a&&(24<d||24==d&&0<b+g)?!1:59>=b||59>=g||59>=c};this.compare=function(a){return"string"==typeof a?this.compare_string(a):this.compare_date(a)};this.compare_string=function(a){return this.compare_date((new gx.date.gxdate(a)).Value)};
this.compare_date=function(a){a=a instanceof gx.date.gxdate?a.Value:a;return this.HasTimePart?this.Value-a:this.Value.getFullYear()>a.getFullYear()?1:this.Value.getFullYear()<a.getFullYear()?-1:this.Value.getMonth()>a.getMonth()?1:this.Value.getMonth()<a.getMonth()?-1:this.Value.getDate()>a.getDate()?1:this.Value.getDate()<a.getDate()?-1:0};this.TimeFmt=gx.timeFormat||12;this.SFmt=b||gx.dateFormat;this.FYearOfCentury=gx.centuryFirstYear||40;"string"==typeof d?this.assign_string(d,this.SFmt):this.assign_date(d)},
isANSIDateTime:function(a){return"string"==typeof a&&c.test(a)?!0:!1},isANSIDate:function(a){return"string"==typeof a&&e.test(a)?!0:!1},isLeapYear:function(a){return 0===a%400?!0:0===a%100?!1:0===a%4?!0:!1},dateObject:function(a){return a instanceof this.gxdate?a.Value:"string"==typeof a?(new this.gxdate(a,this.isANSIDate(a)?"Y4MD":void 0)).Value:a instanceof Date?a:new Date},gxdateObject:function(a){if(a instanceof this.gxdate)return a;if("string"==typeof a)return new this.gxdate(a,this.isANSIDate(a)?
"Y4MD":void 0);if(a instanceof Date){var b=new this.gxdate("");b.assign_date(a);return b}return new this.gxdate("")},clonedDate:function(a,b){var c=new this.gxdate("");c.assign_date(b);a instanceof this.gxdate&&(c.SFmt=a.SFmt,c.HasTimePart=a.HasTimePart);return c},nullDate:function(){return(new this.gxdate("")).Value},now:function(){var a=this.today();a.HasTimePart=!0;return a},today:function(){var a=new this.gxdate("");a.assign_date(new Date);return a},ctot:function(a,b){return new this.gxdate(a,
b)},ctod:function(a,b){var c=new this.gxdate(a,b);c.Value.setHours(0,0,0,0);return c},ymdtod:function(a,b,c){a=new this.gxdate(a+"/"+b+"/"+c,"ANSI");a.Value.setHours(0,0,0,0);return a},ymdhmstot:function(a,b,c,e,f,k){return new this.gxdate(a+"/"+b+"/"+c+" "+e+":"+f+":"+k,"ANSI")},hour:function(a){return(new this.gxdate(a)).Value.getHours()},minute:function(a){return(new this.gxdate(a)).Value.getMinutes()},second:function(a){return(new this.gxdate(a)).Value.getSeconds()},millisec:function(a){return 864E5*
a},day:function(a){return(new this.gxdate(a)).Value.getDate()},month:function(a){return(new this.gxdate(a)).Value.getMonth()+1},year:function(a){return(new this.gxdate(a)).Value.getFullYear()},addDays:function(a,b){return this.addMill(a,this.dayToMillisec(b))},addSec:function(a,b){return this.addMill(a,this.secToMillisec(b))},addMill:function(a,b){var c=this.dateObject(a).clone(),e=new this.gxdate;e.assign_date(c);var f=c.getMilliseconds();c.setMilliseconds(f+b);return e.getString(this.isANSIDate(a)?
"Y4MD":void 0)},secDiff:function(a,b){return this.millisecToSec(this.milliDiff(a,b))},daysDiff:function(a,b){return this.millisecToDay(this.milliDiff(a,b))},milliDiff:function(a,b){var c=this.gxdateObject(a),e=this.gxdateObject(b),a=c.Value.valueOf(),b=e.Value.valueOf();return a-b},dayToMillisec:function(a){return 864E5*a},secToMillisec:function(a){return 1E3*a},millisecToDay:function(a){return a/24/60/60/1E3},millisecToSec:function(a){return a/1E3},dateParm:function(a){return"string"==typeof a?new this.gxdate(a):
a},urlDate:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),2,"0"):""},urlDateTime:function(a,b){var c=new this.gxdate("undefined"!=typeof a.value?a.value:gx.dom.spanValue(a)||a,b);return!this.isNullDate(c)?c.Value.getFullYear().toString()+gx.text.padr((c.Value.getMonth()+1).toString(),2,"0")+gx.text.padr(c.Value.getDate().toString(),
2,"0")+gx.text.padr(c.Value.getHours().toString(),2,"0")+gx.text.padr(c.Value.getMinutes().toString(),2,"0")+gx.text.padr(c.Value.getSeconds().toString(),2,"0"):""},isNullDate:function(a){a instanceof this.gxdate&&(a=a.Value);var b=this.nullDate();return b.getFullYear()!=a.getFullYear()||b.getMonth()!=a.getMonth()||b.getDate()!=a.getDate()||b.getHours()!=a.getHours()||b.getMinutes()!=a.getMinutes()||b.getSeconds()!=a.getSeconds()?!1:!0},dtoc:function(a,b,c){return(new this.gxdate(a,this.isANSIDate(a)?
"Y4MD":void 0)).gxdtoc(b,c)},dttoc:function(a,b,c){var a=new this.gxdate(a,this.isANSIDateTime(a)?"Y4MD":void 0),e=gx.dateFormat,f="";0<b&&(8<b&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),f=a.getStringWithFmt(e)+" ");return 0<c?f+a.getTimeString(3<c,8==c,1<c):f},nulldate_toc:function(a,b){var c=new this.gxdate("");c.HasTimePart=!0;var e=gx.dateFormat,f="";0<a&&(8<a&&-1==e.indexOf("Y4")&&(e=e.replace("Y","Y4")),f=c.getStringWithFmt(e)+" ");return 0<b&&!gx.blankWhenEmpty?f+c.getTimeString(1<b,8==
b,3<b):f},addyr:function(a,b){return this.addmth(a,12*b)},addmth:function(a,b){var c=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),b=b+a.getMonth(),e=parseInt(b/12,0),f=parseInt(b%12,0);a.setMonth(f);e=a.getFullYear()+e;1==f&&(29==a.getDate()&&!this.isLeapYear(e))&&a.setDate(28);a.setFullYear(e);return this.clonedDate(c,a)},dtadd:function(a,b){var c=this.gxdateObject(a),a=new Date(a.getTime()),b=1E3*b,a=this.dateObject(a),e=a.getMilliseconds();a.setMilliseconds(e+b);return this.clonedDate(c,
a)},dtdiff:function(a,b){a=this.dateObject(a);b=this.dateObject(b);return(a-b)/1E3},maxDays:function(a,b){switch(a){case 0:return 31;case 1:return 0!==b%100&&0===b%4||0===b%400?29:28;case 2:return 31;case 3:return 30;case 4:return 31;case 5:return 30;case 6:return 31;case 7:return 31;case 8:return 30;case 9:return 31;case 10:return 30;case 11:return 31}},eom:function(a){var b=this.gxdateObject(a),a=this.dateObject(a),a=new Date(a.getTime()),c=this.maxDays(a.getMonth(),a.getFullYear());a.setDate(c);
return this.clonedDate(b,a)},dow:function(a){a=this.dateObject(a);return a.equalsNoTime(this.nullDate())?0:a.getDay()+1},age:function(a,b){var c,e,f;e=this.dateObject(a);c=this.dateObject(b);f=this.nullDate();if(e.equalsNoTime(f)||c.equalsNoTime(f)||e.equalsNoTime(c))return 0;if(c>=e){f=36E5*c.getUTCHours()+6E4*c.getUTCMinutes()+1E3*c.getUTCSeconds()-(36E5*e.getUTCHours()+6E4*e.getUTCMinutes()+1E3*e.getUTCSeconds());if(c.getUTCDate()>e.getUTCDate()||c.getUTCDate()==e.getUTCDate()&&0<=f)f=new Date(Date.UTC(c.getUTCFullYear(),
c.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));else{f=new Date(Date.UTC(c.getUTCFullYear(),c.getUTCMonth()-1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()));c=c.getUTCMonth()-1;for(-1==c&&(c=11);f.getUTCMonth()!=c;)f.setUTCDate(f.getUTCDate()-1)}return e=f.getUTCMonth()>=e.getUTCMonth()?f.getUTCFullYear()-e.getUTCFullYear():f.getUTCFullYear()-1-e.getUTCFullYear()}return 0},valid_date:function(a,g,c,e,f,k,m,l){var q=m||!1,o=!1,k="",m=c,p="",
p="^[ ]*(",r=0<g?"GXM_invaliddate":"GXM_invalidtime",k=a.value,k=k.split("\n")[0],c="YMD"==c?1:0,f=12==f?1:0;b.test(k)&&(o=!0,k="");p=0<g?8==g?p+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2})":0===c?q?p+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{4})":p+"([0-9]{1,2})[/|-]?([0-9]{1,2})[/|-]?([0-9]{2,4})":q?p+"([0-9]{4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":p+"([0-9]{2,4})[/|-]?([0-9]{1,2})[/|-]?([0-9]{1,2})":p+"( )?( )?( )?";0<e&&(p+="(",0<g&&(p+="[ ]*"),p+="([0-9]{1,2})",p=2<e?p+"(:?([0-9]{1,2}))?":
p+"(( )?)?",p=5<e?p+"(:?([0-9]{1,2}))?":p+"(( )?)?",p=(1==f?p+"[ ]*(a|am|p|pm)?":p+"(( )?)?")+")?");c=RegExp(p+")?[ ]*$","i");if(c.test(k)){c=k.match(c);0<g?(p="/",0<k.indexOf("-")&&(p="-"),c[2]?p=c[2]+p+c[3]+p+c[4]:(p=1==l?"        ":"  "+p+"  "+p+"  ",10==g&&(p+="  "))):p="";0<e&&(0<g&&(p+=" "),1==l&&!c[6]&&!c[8]&&!c[10]?p+="        ":(c[6]?p+=c[6]:o?(l=k.match(b),p=l[4]?p+l[4]:p+(1==f?"12":"00")):p+=1==f?"12":"00",2<e&&(p=c[8]?p+":"+c[8]:p+":00"),5<e&&(p=c[10]?p+":"+c[10]:p+":00"),1==f&&(p="p"==
(c[11]?c[11].substr(0,1):"a").toLowerCase()?p+" PM":p+" AM")));f=new this.gxdate("",m);try{f.assign_string(p,m,0>=e,!0),""!==gx.text.trim(p)&&(p=this.formatDateTime(e,g,m,f))}catch(s){return gx.fn.alert(a,gx.getMessage(r)),gx.csv.setFormatError(a),!1}if(p!=k){a.value=p;if(-1!=navigator.userAgent.indexOf("Firefox/2"))a.onchange();(g=gx.O.getValidStructFld(a))&&gx.O.refreshDependantGrids(g)}gx.csv.setFormatError(a,!1);return!0}gx.fn.alert(a,gx.getMessage(r));gx.csv.setFormatError(a);return!1},formatDateTime:function(a,
b,c,e){var f="";0<a&&e.HasTimePart&&(f=e.getTimeString(4<=a,8<=a));a=c;8<b&&-1==a.indexOf("Y4")&&(a=a.replace("Y","Y4"));return 0<b?e.getStringWithFmt(a)+(e.HasTimePart?" "+f:""):e.HasTimePart?f:""},_init:function(){Date.prototype.equalsNoTime=this.equalsNoTime;Date.prototype.clone=this.clone;Date.prototype.json=this.toJson}}}();
gx.text={stringBuffer:function(c){this.capacity=c||10;this.buffer=[];this.append=function(c){this.buffer.push(c);return this};this.clear=function(){delete this.buffer;this.buffer=[]};this.toString=function(){return 0===this.buffer.length?"":this.buffer.join("")};this.length=function(){return this.toString().length}},format:function(){for(var c=arguments[0],f=arguments.length,e=1;e<f;e++)c=c.replace("%"+e,gx.text.trim(arguments[e].toString()));return c},formatString:function(c,f,e){return e?gx.text.padl("",
f,"*"):c},replaceAll:function(c,f,e){return-1!=c.toString().indexOf(f)?(""+c).split(f).join(e):c},charReplace:function(c,f,e){for(var b="",a=c.length,d=0;d<a;d++){for(var g=!1,n=f.length,h=0;h<n;h++)if(c.charAt(d)==f[h]&&h<e.length){b+=e[h];g=!0;break}!1===g&&(b+=c.charAt(d))}return b},endsWith:function(c,f){return-1!==c.indexOf(f,c.length-f.length)},length:function(c){return c.length},upper:function(c){return c.toUpperCase()},lower:function(c){return c.toLowerCase()},padr:function(c,f,e){f-=c.length;
if(1>f)return c;for(var b="",a=0;a<f;a++)b+=e;return b+c},padl:function(c,f,e){f-=c.length;if(1>f)return c;for(var b="",a=0;a<f;a++)b+=e;return b+c},ltrim:function(c){return c.toString().replace(/^ */,"")},rtrim:function(c){return c.toString().replace(/ *$/,"")},trim:function(c){return this.rtrim(this.ltrim(c))},chr:function(c){return String.fromCharCode(c)},concat:function(c,f,e){return this.rtrim(c)+e+f},space:function(c){for(var f="",e=0;e<c;e++)f+=" ";return f},substring:function(c,f,e){return c.toString().substring(f-
1,f-1+e)},tostring:function(c){return c.toString()},toformattedstring:function(c){return c.toString()},newline:function(){return"\n"},escapeMapping:{"":"\\b","\t":"\\t","\n":"\\n","":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},escapeRegex:{start:/["\\\x00-\x1f]/,end:/([\x00-\x1f\\"])/g},escapeFn:function(c,f){var e=gx.text.escapeMapping[f];if(e)return e;e=f.charCodeAt();return"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16)},escapeString:function(c){return this.escapeRegex.start.test(c)?'"'+
c.replace(this.escapeRegex.end,this.escapeFn)+'"':'"'+c+'"'},indexOf:function(c,f,e){if(e>c.length)return 0;0>=e&&(e=1);return c.indexOf(f,e-1)+1},lastIndexOf:function(c,f,e){if(e>c.length)return 0;0>=e&&(e=c.length);return c.lastIndexOf(f,e-1)+1}};
gx.num=function(){var c=function(c,e,b,a){var d=gx.lang.instanceOf,g="undefined"==typeof gx.num.dec?null:gx.num.dec.bigDecimal,n=gx.thousandSeparator,h=gx.decimalPoint;"string"==typeof b&&(b=gx.num.parseFloat(b,n,h));"string"==typeof a&&(a=gx.num.parseFloat(a,n,h));return d(b,g)&&d(a,Number)?b[c](new g(a.toString())).toString():d(b,Number)&&d(a,g)?(new g(b.toString()))[c](a).toString():d(b,Number)&&d(a,Number)||"undefined"==typeof gx.num.dec?e(b,a):b[c](a)};return{str:function(c,e,b){"undefined"==
typeof e&&(e=10);if("undefined"==typeof b||e-1<=b)b=0;c=this.round(c,b);if(0===b)return c=c.toString(),c.length>e?gx.text.padr("",e,"*"):gx.text.padr(c,e," ");var c=c.toString(),a=c.indexOf(".");0<b&&(c=0>a?c+("."+gx.text.padr("",b,"0")):(0===a?"0":c.substring(0,a))+gx.text.padr(c.substring(a),b+1,"0"));if(c.length<=e)return gx.text.padr(c,e," ");a=c.indexOf(".");return 0<a&&c.substring(0,a).length<=e?gx.num.str(gx.num.val(c),e,0):gx.text.padr("",e,"*")},maxNumericPrecision:function(){return 15},
extractValue:function(c,e){if(gx.lang.instanceOf(e,Number)||this.overflowNumber(e))return e;var b,a=void 0===e?"":e;if(c){b="+"==c.charAt(0)||"-"==c.charAt(0)?c.replace(/[\+\-\d,*\.*Z*\s]+/,""):c.replace(/[\d,*\.*Z*\s]+/g,"");c.lastIndexOf(".")!=c.indexOf(".")&&(a=gx.text.replaceAll(a,".",""));for(var d=0;d<b.length;d++)a=a.replace(b.charAt(d),"")}return gx.text.trim(a)},formatNumber:function(c,e,b,a,d,g){gx.lang.emptyObject(c)&&(c="0");var n=-1!=b.indexOf(",")?gx.thousandSeparator:"",h=gx.decimalPoint,
j=!1;"string"==typeof c&&n&&(c=gx.text.replaceAll(c,n,""));"string"==typeof c&&(c=c.replace(h,"."));if(gx.num.overflowNumber(c))return c;try{c=gx.num.setScale(c,e)}catch(k){c=c.toString()}var m=c.split(".");m[0]||(m[0]="0");m[1]||(m[1]="");if(g){if(m[1].length>e&&m[1].replace(/0*$/,"").length>e)throw"InvalidNumber";a=0===e?a:a-e-1;if(d&&"-"==m[0].charAt(0)&&m[0].replace(/0*/,"").length>a||!d&&"-"==m[0].charAt(0)||m[0].replace(/[+]?0*/,"").length>a)throw"InvalidNumber";}0>c&&(d=!0);if(m[1].length<
e){a=m[1];for(c=m[1].length+1;c<=e;c++)a+="0";m[1]=a}a="";d&&"-"==m[0].charAt(0)&&(a="-",m[0]=m[0].substring(1));if(n&&3<m[0].length){g=m[0];m[0]="";for(d=3;d<g.length;d+=3)c=g.slice(g.length-d,g.length-d+3),m[0]=n+c+m[0]+"";d=g.substr(0,0===g.length%3?3:g.length%3);m[0]=d+m[0]}h=!m[1]?"":h;0<e?(d=b.split("."),d[1]==gx.text.padr("",e,"Z")&&(j=!0)):(d=Array(b),0<d.length&&0===gx.text.replaceAll(gx.text.replaceAll(d[0],",",""),"Z","").length&&(j=!0));e=0;b="";if(1<d.length){g=d[1];for(c=0;c<g.length;c++){var l=
g.charAt(c);"9"==l||"Z"==l?m[1].length>e?(b+=m[1].charAt(e),e++):b+="0":"."!=l&&","!=l&&(b+=l)}}g="";d=d[0];e=m[0].length-1;for(c=d.length-1;0<=c;c--)l=d.charAt(c),"9"==l||"Z"==l?0<=e?(g=m[0].charAt(e)+g,e--):g=("9"==l?"0":"")+g:"Z"!=l&&","!=l?g=l+g:","==l&&m[0].charAt(e)==n&&(g=m[0].charAt(e)+g,e--);return j&&"0"==g&&0===b.replace(/0+$/,"").length?"":a+g+(!b?"":h+b)},add:function(f,e){return c("add",function(b,a){return b+a},f,e)},subtract:function(f,e){return c("substract",function(b,a){return b-
a},f,e)},multiply:function(f,e){return c("multiply",function(b,a){return b*a},f,e)},divide:function(f,e){return c("divide",function(b,a){return b/a},f,e)},negate:function(c){return gx.lang.instanceOf(c,Number)||"undefined"==typeof gx.num.dec?-c:c.negate()},pow:function(f,e){return c("pow",function(b,a){return b^a},f,e)},mod:function(f,e){return c("remainder",function(b,a){return b%a},f,e)},setScale:function(c,e){if(gx.lang.instanceOf(c,Number))return c.toFixed(e);"string"==typeof c&&(c=gx.text.trim(c));
if(c.length<this.maxNumericPrecision()||"undefined"==typeof gx.num.dec){if(0===c.length&&0===e)return"0";var b=c.split("."),a;b[1]||(b[1]="");if(b[1].length<e){var d=b[1];for(a=b[1].length+1;a<=e;a++)d+="0";b[1]=d;return b[0]+(""===b[1]?"":".")+b[1]}return Number(parseFloat(c)).toFixed(e)}return(new gx.num.dec.bigDecimal(c)).setScale(e,gx.num.dec.ROUND_UP).toString()},parseFloat:function(c,e,b){if(gx.lang.instanceOf(c,Number)||this.overflowNumber(c))return c;c=this.toInvariant(c,e,b);return c.length>
this.maxNumericPrecision()&&"undefined"!=typeof gx.num.dec?new gx.num.dec.bigDecimal(c):parseFloat(c)},toInvariant:function(c,e,b){return"number"==typeof c||"undefined"!=typeof gx.num.dec&&c instanceof gx.num.dec.bigDecimal?c:gx.text.replaceAll(c,e,"").replace(b,".")},parseInt:function(c,e,b){if("number"==typeof c)return c;var a=c,a=gx.text.replaceAll(c,b,"");return parseInt(a,e)},overflowNumber:function(c){return/\*(\**)/.test(c)},urlDecimal:function(c,e,b){return"undefined"!=typeof c?(c="undefined"!=
typeof c.value?c.value:c,c=this.parseFloat(c,e,b),c.toString()):""},random:function(){return Math.random()},intval:function(c){var e=0,c="undefined"!=typeof c?c.toString():"",e=c.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?parseInt(c,0):(new gx.num.dec.bigDecimal(c)).setScale(0,gx.num.dec.ROUND_UP);isNaN(e)&&(e=0);return e},val:function(c){c=gx.text.trim(c).replace(",",".");c=this.parseFloat(c);isNaN(c)&&(c=0);return c},trunc:function(c,e){var b=c,c=c.toString(),a=c.length,
d=c.indexOf(".");if(-1!=d){b=c.substring(0,d);if(0===e)return b;var g="";d+e<=a&&(g=c.substring(d+1,d+1+e));b=gx.num.parseFloat(b+"."+g);isNaN(b)&&(b=0)}return b},round:function(c,e){var c=c.toString(),b=c.indexOf("."),a="",d="",d=0,a="."+"0000000000000000000000".substring(1,parseInt(e,0)+1)+"5",d=parseFloat(a);if(-1==b)d="0000000000000000000000",a=""+c;else if(0===b)a="0",d=0+parseFloat(c)+parseFloat(d),c=d+"0000000000000000000000",d=""+c.substring(1,c.length);else{if(0===e){a=c.substring(0,b);a=
parseInt(a,0);b=parseInt(c.substring(b+1,b+2),0);if(isNaN(a))return 0;!isNaN(b)&&5<=b&&a++;return a}d=parseFloat(c)+d;a=d.toString().substring(0,b);d=""+(""+d+"0000000000000000000000").substring(b+1,b+1+parseInt(e,0))}d=d.substring(0,parseInt(e,0));a=parseFloat(a+"."+d);isNaN(a)&&(a=0);return a},valid_decimal:function(c,e,b,a){var d=c.value,g=d.lastIndexOf(b),n=!0;","==b&&(-1==g&&d.lastIndexOf(".")==d.indexOf("."))&&(d=d.replace(".",b));var h=gx.O.getValidStructFld(c);gx.lang.emptyObject(h)||(d=gx.num.extractValue(h.pic,
d));g=RegExp("^[ ]*([+-]?[0-9]*(\\"+e+"[0-9]{3})*(\\"+b+"[0-9]*)?)?[ ]*$");if(d)if(g.test(d)){var g=d.lastIndexOf(b),j=d;-1!=g&&(j=d.slice(0,g+parseInt(a,10)+1));try{gx.lang.emptyObject(h)||(j=gx.num.formatNumber(j,h.dec,h.pic,h.len,h.sign,!0)),"."!=b&&"SELECT"==c.tagName&&(j=gx.num.toInvariant(j,e,b))}catch(k){n=!1}if(n&&j!=gx.text.trim(c.value)&&(c.value=j,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else n=!1;else n=!0;n?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),gx.fn.alert(c,
gx.getMessage("GXM_badnum")))},valid_integer:function(c,e){var b,a,d,g=gx.O.getValidStructFld(c),n=gx.lang.emptyObject(g);a=c.value;n||(a=gx.num.extractValue(g.pic,a));b=!n&&-1!=g.pic.indexOf(",")?RegExp("^[ ]*([+-]?[0-9]*(\\"+e+"[0-9]{3})*)?[ ]*$"):/^[ ]*([+-]?[0-9]*([0-9]{3})*)?[ ]*$/;d=!0;if(a)if(b.test(a)){try{n||(a=gx.num.formatNumber(a,g.dec,g.pic,g.len,g.sign,!0))}catch(h){d=!1}if(a!=gx.text.trim(c.value)&&(c.value=a,-1!=navigator.userAgent.indexOf("Firefox/2")))c.onchange()}else d=!1;else d=
!0;d?gx.csv.setFormatError(c,!1):(gx.csv.setFormatError(c),gx.fn.alert(c,gx.getMessage("GXM_badnum")))}}}();
gx.color={rgb:function(c,f,e){return 65536*c+256*f+e},css:function(c){return"rgb"==c.substring(0,3)?eval(c):"#"==c.charAt(0)?parseInt(c.substring(1),16):0},html:function(c){c=this.toHex(c);gx.lang.emptyObject(c)&&(c="000000");var c=gx.text.padr(c,6,"0"),f={};f.Hexa=c;f.Html="#"+c;f.R=parseInt(c.substring(0,2),16);f.G=parseInt(c.substring(2,4),16);f.B=parseInt(c.substring(4,6),16);return f},fromRGB:function(c,f,e){var b={};"undefined"!=typeof c&&("undefined"!=typeof f&&"undefined"!=typeof e)&&(b.Hexa=
this.toHex(c)+this.toHex(f)+this.toHex(e),b.Html="#"+b.Hexa,b.R=c,b.G=f,b.B=e);return b},ARGBToHex:function(c){var f=this.toHex(c>>16&255),e=this.toHex(c>>8&255),c=this.toHex(c&255);return f+e+c},toHex:function(c){if(void 0===c)return"000000";if(0>c)return gx.color.ARGBToHex(c);if(0===c)return c+"0";for(var f=0,e="";0!==c;)f=c%16,c=(c-f)/16,e="0123456789ABCDEF".charAt(f)+e;0!==e.length%2&&(e="0"+e);return e}};
gx.popup=function(){return{lvl:-1,currentPopup:null,currentPrompt:null,showParentPopups:!1,Dialog:function(){this.id="";this.autoresize=1;this.left=this.top=this.position=this.height=this.width=0;this.zindex=1E3;this.lvl=-1;this.InternalPopup=this.Opener=this.document=this.window=this.parentPopup=null;this.state="created";this.callbacks={};this.open=function(c){this.state="opening";this.id=c.id||"gxdialog";this.callbacks=c.callbacks;gx.popup.ext.window(this,!1,0,0,c.w,c.h,c.contentHtml,"white",c.title,
"black","black","black","black",!0,!0,!0,void 0===c.resizable||c.resizable,!1,gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader","PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",c.showParentPopups,!1,c.callbacks,c.parentElement);gx.popup.ext.win.gx.popup.setPopup(this);this.state="opened"};this.close=function(){this.state="closing";gx.popup.ext.close(this,this.callbacks.beforeClose);this.cleanup();this.state="closed"};this.cleanup=function(){delete this.InternalPopup;delete this.window;
delete this.document;delete this.Opener;delete this.parentPopup;delete this.InternalPopup;delete this.callbacks};this.isActive=function(){return!("closed"==this.state||"closing"==this.state)};this.getEl=function(){return gx.dom.byId(this.id+"_b")}},Popup:function(c,f){this.url="";this.frameWindow=this.frameDocument=null;this.ReturnParms=[];this.RawReturnedParms=[];this.ModifCtrl=null;this.IsPrompt=f?f:!1;this.PromptIsGet=!1;this.OncloseCmds=[];this.CustomRenderGrid=null;this.setPopupData=function(){if(gx.lang.isArray(c))this.url=
c[0],this.autoresize=c[1],this.width=c[2],this.height=c[3],this.position=c[4],this.top=c[5],this.left=c[6],this.OncloseCmds=c[7]||[],this.ReturnParms=c[8]||[];else if(c&&c.Url&&(this.url=c.Url,"undefined"!=typeof c.Autoresize&&(this.autoresize=c.Autoresize),"undefined"!=typeof c.Width&&(this.width=c.Width),"undefined"!=typeof c.Height&&(this.height=c.Height),"undefined"!=typeof c.Position&&(this.position=c.Position),"undefined"!=typeof c.Top&&(this.top=c.Top),"undefined"!=typeof c.Left&&(this.left=
c.Left),"undefined"!=typeof c.OncloseCmds&&(this.OncloseCmds=c.OncloseCmds),"undefined"!=typeof c.ReturnParms))this.ReturnParms=c.ReturnParms};this.open=function(){this.state="opening";var c=gx.popup.gxOpener();this.lvl=-1;this.lvl=c&&c.gx&&c.gx.popup.ext.win&&c.gx.popup.ext.win.gx?c.gx.popup.ext.win.gx.popup.lvl:gx.popup.lvl;null!=document.gxPopup?(this.parentPopup=document.gxPopup,this.zindex=gx.popup.ext.zdx+document.gxPopup.zindex):this.zindex=gx.popup.ext.zdx;c=this.url;if(this.IsPrompt){gx.popup.currentPrompt=
this;for(var b="?",a="",d="",g=this.ReturnParms.length,f=0;f<g;f++){if(gx.lang.emptyObject(this.ReturnParms[f].Ctrl))if("string"==typeof this.ReturnParms[f])a=gx.util.urlValue(this.ReturnParms[f])+",";else if("number"==typeof this.ReturnParms[f])a=gx.util.urlValue(this.ReturnParms[f].toString())+",";else if(this.CustomRenderGrid)d=this.CustomRenderGrid.grid.getCellValue(this.ReturnParms[f].id),gx.lang.emptyObject(d)||(a=gx.util.urlValue(d+"")+",");else if(gx.lang.emptyObject(this.ReturnParms[f].id))continue;
else d=gx.fn.getHidden(this.ReturnParms[f].id),gx.lang.emptyObject(d)||(a=gx.util.urlValue(d)),a+=",";else a=gx.util.urlValue(this.ReturnParms[f].Ctrl)+",";b="out"==this.ReturnParms[f].IOType?b+",":b+a;this.ReturnParms[f].isLastKey&&(gx.fn.isOutputParm(this.ReturnParms[f])&&!this.PromptIsGet)&&(gx.fn.setControlValue("_EventName",this.Opener.CmpContext),this.PromptIsGet=!0)}null!=this.ModifCtrl&&(this.ModifCtrl.value=1);c+=b}b=document.activeElement;b==document.body&&gx.csv.lastControl&&(b=gx.csv.lastControl);
b&&(b&&(this.callerActiveElement=b),b.blur&&b.blur());this.InternalPopup=gx.popup.Impl(this,c,this.autoresize,this.width,this.height,this.position,this.top,this.left)};this.getOutputParms=function(){var c=[];if(this.IsPrompt)for(var b=this.ReturnParms.length,a=0;a<b;a++){var d=this.ReturnParms[a];gx.fn.isOutputParm(d)&&c.push(d)}else return this.ReturnParms;return c};this.close=function(c){var b;this.state="closing";c&&(this.RawReturnedParms=c);var a=window;gx.popup.ext.win?(a=gx.popup.ext.win,gx.ajax.windowClosed(gx.popup.ext.win.gx.popup.lvl),
gx.popup.ext.win.gx.popup.lvl--):(gx.ajax.windowClosed(gx.popup.lvl),gx.popup.lvl--);var d=function(){if(!this.isPdf&&this.frameWindow&&this.frameWindow.gx){if(this.IsPrompt)this.parentPopup==null?gx.popup.currentPrompt=null:this.parentPopup.frameWindow.gx.popup.currentPrompt=null;this.frameWindow.gx.evt.onunload.call(this.frameWindow);this.frameWindow=this.frameDocument=this.frameDocument.gxPopup=null}gx.popup.ext.close(this);var a=this.getOutputParms();if(c!=null&&this.IsPrompt){var d=c.length,
f=gx.popup.assignPromptField,j=gx.popup;if(!gx.lang.emptyObject(this.CustomRenderGrid)){f=this.CustomRenderGrid.grid.setCellValue;j=this.CustomRenderGrid.grid}for(b=0;b<d;b++)f.apply(j,[a[b],c[b]]);f=null;d=a.length;for(b=0;b<d;b++){j=a[b].Ctrl;gx.fn.isAccepted(j)&&(f=j)}if(f&&gx.TabOnPrompSelect){a=gx.fn.getControlIndex(f);a!=-1&&(f=gx.fn.searchFocus(a+1,true))}gx.fn.setFocus(f);if(this.PromptIsGet){gx.csv.loadScreen();gx.fn.setFocus(f)}else try{gx.evt.ctrlOnchange(gx.fn.getControlValue(this.Opener.CmpContext+
"Mode"),gx.fn.getControlValue(this.Opener.CmpContext+"IsConfirmed"),typeof window.GXPkIsDirty=="undefined"?false:window.GXPkIsDirty,null,"eng")}catch(k){gx.dbg.logEx(k,"gxpopup.js","close")}}else c&&a&&(a instanceof Array&&a.length>0)&&gx.fn.setReturnParms(this.Opener,a,c);gx.ajax.dispatchCommands(this.OncloseCmds);this.cleanup();this.state="closed"};gx.util.browser.isFirefox()?a.setTimeout(d.closure(this),10):d.call(this)};this.setFocusFirst=function(){this.frameWindow.gx&&this.frameWindow.gx.fn.setFocusOnload()};
this.cleanup=function(){try{this.OncloseCmds=[],this.ReturnParms=[],this.PromptIsGet=!1,this.parentPopup=this.Opener=this.document=this.window=this.InternalPopup=null,this.RawReturnedParms=[],this.CustomRenderGrid=this.InternalPopup=this.ModifCtrl=null}catch(c){gx.dbg.logEx(c,"gxpopup.js","popupObj.cleanup")}};this.setPopupData()},gxOpener:function(){var c=null;try{parent.gxTestAvailable=1,c=parent}catch(f){}return c},setFocus:function(){var c=this.getPopup();c&&c.window.frames[0].focus()},ispopup:function(){return null!=
this.getPopup()},popupurl:function(){return this.getPopup().url},waitCallback:function(c){var f=gx.popup.getPopup();f?"opened"==f.state?c():gx.lang.doCallTimeout(gx.popup.waitCallback,gx.popup,[c],50):c()},getPopup:function(){var c=this.gxOpener();try{if(!gx.lang.emptyObject(c)&&!gx.lang.emptyObject(c.gx))return c.gx.popup.currentPopup}catch(f){}return null},setPopup:function(c){this.currentPopup=c},open:function(c){return this.openPopup(c)},openUrl:function(c,f,e){var b=1,a=0,d=0,g=0,n=0,h=0;e&&
(b=e[0],a=e[1],d=e[2],g=e[3],n=e[4],h=e[5]);return this.openPopup([c,b,a,d,g,n,h,[],f])},openPopup:function(c){c=new this.Popup(c,!1);c.Opener=gx.O;c.open();return c},openDialog:function(c){var f=new this.Dialog;f.Opener=gx.O;f.open(c);return f},openPrompt:function(c,f,e,b,a,d){if(null==gx.popup.currentPrompt){var g=f[0].Ctrl,n=!1,h,j;if(g)h=gx.fn.rowGridId(g),g=gx.fn.controlRowId(g),!gx.lang.emptyObject(h)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=h,gx.fn.setCurrentGridRow(h,g));else if(h=gx.O.getValidStructFld(f[0].id),
!gx.lang.emptyObject(h)&&(j=gx.O.getGridById(h.grid)))if(n=j.isUsercontrol)h=j.gridId+"",g=!gx.lang.emptyObject(j.grid.getSelectedRow)?gx.text.padl(j.grid.getSelectedRow()+"",4,"0"):void 0,!gx.lang.emptyObject(h)&&!gx.lang.emptyObject(g)&&(gx.csv.lastGrid=h,gx.fn.setCurrentGridRow(h,g));if(d||this.outParmsAccepted(f)||n)c=new this.Popup([c,1,0,0,0,0,0,[],f],!0),c.IsMod=e,c.Opener=gx.getObj(b,a),c.CustomRenderGrid=j,c.open()}},outParmsAccepted:function(c){for(var f=c.length,e=!1,b=0;b<f;b++){var a=
c[b];gx.fn.isOutputParm(a)&&(e=!0);if(gx.fn.isOutputParm(a)&&a.Ctrl&&gx.fn.isAccepted(a.Ctrl))return!0}return!e},gxReturn:function(c){gx.fn.closeWindow(c)},parmId:function(c){c=gx.dom.id(c);0===c.indexOf("span_")&&(c=c.substring(5));return c},popuplvl:function(){var c=gx.popup.getPopup();return!c||!c.window?-1:c.window.gx.popup.lvl},assignPromptField:function(c,f){if(!gx.lang.emptyObject(c)&&(gx.csv.pkDirty=c.isKey,c.Ctrl)){"checkbox"==c.Ctrl.type&&c.Ctrl.value!=f&&(c.Ctrl.checked=!c.Ctrl.checked);
c.Ctrl.value!=f&&c.isKey&&(gx.popup.gxOpener().GXPkIsDirty=!0);var e=gx.csv.ctxControlId(this.parmId(c.Ctrl)),b=gx.O.getValidStructFld(e),a;if(!gx.lang.emptyObject(b)&&(a=gx.O.getValidStructId(b.fld)))a>gx.O.toValid&&(gx.O.toValid=a),gx.csv.validateAll();!gx.lang.emptyObject(b)&&!gx.lang.emptyObject(b.v2c)&&("date"==b.type||"dtime"==b.type)?(b.v2v(f),b.v2c()):gx.fn.setControlValue(this.parmId(c.Ctrl),f,0);c.Ctrl.setAttribute("gxvalid","0");gx.evt.execOnchange(c.Ctrl);var d=gx.dom.byId("span_"+c.Ctrl.name);
null!=d&&(0===d.childNodes.length&&d.appendChild(gx.popup.gxOpener().document.createTextNode("")),d.childNodes[0].nodeValue=f);b&&b.gxgrid&&b.gxgrid.updateControlValue(b,!1);gx.util.balloon.clear(e);a&&(gx.O.toValid=a,gx.csv.validateAll())}},autofit:function(){var c=this.getPopup();!gx.lang.emptyObject(c)&&"opened"==c.state&&this.ext.autofit(c,null,!1)},Impl:function(c,f,e,b,a,d,g,n){return new this.ext.popUp(c,e,d,n,g,b,a,"gxp",f,"white","#00385c","16pt serif","GxPopup","#00385c","white","lightgrey",
"#00568c","black",!0,!1,!0,!0,!0,!0,!1,"min.gif","max.gif","close.gif",gx.ajax.getImageUrl(gx,"resizeImage"),"PopupHeader","PopupHeaderButton","PopupContent","PopupBorder","PopupShadow",void 0)},setZIndex:function(c){c=gx.dom.getStyle(c,"zIndex");isNaN(c)&&(c=999);c++;this.zindex=c;this.ext.zdx=c},ext:{w3c:gx.util.browser.w3c,ns4:gx.util.browser.ns4,ie5:gx.util.browser.ie5,ns6:gx.util.browser.ns6,isFF:gx.util.browser.isFirefox(),currIDb:null,xoff:0,yoff:0,currRS:null,rsxoff:0,rsyoff:0,zdx:1E3,sdiff:5,
win:null,doc:null,hide:function(c){if(this.w3c){var f=gx.dom.byId;f(c+"_t").style.visibility="hidden";f(c+"_c").style.visibility="hidden";f(c+"_rs").style.visibility="hidden";f(c+"_b").style.visibility="hidden";f(c+"_s").style.visibility="hidden"}},show:function(c){var f=gx.dom.byId;f(c+"_t").style.visibility="visible";f(c+"_c").style.visibility="visible";f(c+"_rs").style.visibility="visible";f(c+"_b").style.visibility="visible";f(c+"_s").style.visibility="visible"},close:function(c,f){if(!f||!("function"==
typeof f&&!1===f())){gx.popup.ext.win=null;gx.popup.ext.doc=null;gx.popup.ext.currIDb=null;gx.popup.ext.currIDs=null;gx.popup.ext.currRS=null;var e=c.id,b=document.getElementById(e+"_s"),a=document.getElementById(e+"_b");gx.dom.removeControlSafe(b);e=document.getElementById(e+"_ifrm");gx.popup.ext.deinitmodal(c);gx.popup.setPopup(c.parentPopup);(b=c.callerActiveElement)&&b.focus&&b.focus();c.parentPopup?c.parentPopup.frameWindow.gx.fx.obs.notify("popup.close",[c]):gx.fx.obs.notify("popup.close",[c]);
e&&(e.src=gx.util.getIFrameEmptySrc());gx.util.browser.isIE()&&7==gx.util.browser.ieVersion()?a.parentNode.removeChild(a):gx.dom.removeControlSafe(a)}},move:function(c,f,e){if(this.w3c){var b=gx.dom.byId,a=b(c+"_b"),d=b(c+"_c"),c=b(c+"_s");a.style.left=f+"px";c.style.left=f+this.sdiff+"px";a.style.top=e+"px";c.style.top=e+this.sdiff+"px";d.style.overflow="hidden"}},resize:function(c,f,e){if(this.w3c){var b=gx.dom.byId;if(b(c+"_rs").rsEnable){var a=b(c+"_extWA"),d=b(c+"_rs"),g=b(c+"_b"),n=b(c+"_t"),
h=b(c+"_s"),c=b(c+"_c"),b=this.ie5;a.style.display="block";d.style.left=Math.max(f,b?88:92)+"px";d.style.top=Math.max(e,b?68:72)+"px";g.style.width=Math.max(f+(b?12:8),100)+"px";g.style.height=Math.max(e+(b?12:8),80)+"px";n.style.width=Math.max(f+(b?4:3),this.ns6?95:92)+"px";h.style.width=Math.max(f+12,b?100:104)+"px";h.style.height=Math.max(e+(b?12:13),b?80:86)+"px";c.style.width=Math.max(f-(b?-5:5),b?92:87)+"px";c.style.height=Math.max(e-(b?24:28),44)+"px";c.style.overflow="hidden"}}},ns6bugfix:function(){0<
navigator.userAgent.indexOf("Netscape/6")&&setTimeout("self.resizeBy(0,1); self.resizeBy(0,-1);",100)},movepopup:function(){null!=this.currIDb&&this.w3c&&this.move(this.currIDb.cid,gx.evt.mouse.x+this.xoff,gx.evt.mouse.y+this.yoff);null!=this.currRS&&this.w3c&&this.resize(this.currRS.cid,gx.evt.mouse.x+this.rsxoff,gx.evt.mouse.y+this.rsyoff);return!1},stopRS:function(c,f){document.getElementById(f.cid+"_extWA").style.display="none";gx.popup.ext.currRS=null},startRS:function(c,f){var e=gx.popup.ext,
b=e.ie5?event.clientX+gx.dom.documentScroll().scrollLeft:c.pageX,a=e.ie5?event.clientY+gx.dom.documentScroll().scrollTop:c.pageY;e.rsxoff=parseInt(f.style.left,0)-b;e.rsyoff=parseInt(f.style.top,0)-a;e.currRS=f;e.ns6&&(document.getElementById(f.cid+"_c").style.overflow="hidden");return!1},changez:function(c){var c=null!=c?c:this,f=gx.popup.ext,e=gx.dom.byId;f.ns6&&(e(c.cid+"_c").style.overflow="hidden");e(c.cid+"_s").style.zIndex=++f.zdx;c.style.zIndex=++f.zdx;e(c.cid+"_rs").style.zIndex=++f.zdx},
stopdrag:function(c,f){var e=gx.popup.ext;e.currIDb=null;document.getElementById(f.cid+"_extWA").style.display="none";e.ns6bugfix()},grab_id:function(c,f){var e=gx.popup.ext,b=gx.dom.byId,a=gx.util.browser;gx.evt.mouse.update(c);var d=gx.evt.mouse.x,g=gx.evt.mouse.y;e.xoff=parseInt(b(f.cid+"_b").style.left,0)-d;e.yoff=parseInt(b(f.cid+"_b").style.top,0)-g;e.currIDb=b(f.cid+"_b");e.currIDs=b(f.cid+"_s");a.isIE()&&10>a.ieVersion()&&(b(f.cid+"_extWA").style.display="block");return!1},subBox:function(c,
f,e,b,a,d){a=document.createElement("div");a.setAttribute("id",d);a.style.position="absolute";a.style.left=c+"px";a.style.top=f+"px";a.style.width=e+"px";a.style.height=b+"px";a.style.visibility="visible";a.style.padding="0px";return a},window:function(c,f,e,b,a,d,g,n,h,j,k,m,l,q,o,p,r,s,u,t,x,A,y,w,v,D,F,E){var v=void 0!==v?v:gx.popup.showParentPopups,B=c.id;this.win||(this.win=window);this.doc||(this.doc=this.win.document);var G=this.win.gx.dom.byId.closure(this.win.gx.dom),a=Math.max(a,100),d=
Math.max(d,80),f=new this.subBox(a-(this.ie5?12:8),d-(this.ie5?12:8),7,7,"",B+"_rs");r&&(f.innerHTML='<img src="'+u+'" width="7" height="7">',f.style.cursor="se-resize");f.rsEnable=r;var u=this.ie5?a:a+4,H=this.ie5?d:d+6,l=new this.subBox(e+this.sdiff,b+this.sdiff,u,H,l,B+"_s");l.className=w;this.ie5?l.style.filter="alpha(opacity=50)":l.style.MozOpacity=0.5;l.style.zIndex=++this.zdx;o||(l.style.visibility="hidden");e=new this.subBox(e,b,a,d,k,B+"_b");e.className=y;e.style.display="block";e.style.zIndex=
++this.zdx;o||(e.style.visibility="hidden");u=this.ie5?a-8:a-5;H=this.ie5?d+4:d-4;y=new this.subBox(2,2,u,20,j,B+"_t");y.style.overflow="hidden";y.className=t;o||(y.style.visibility="hidden");y.innerHTML='<span id="'+B+'_gxtitle" class="PopupTitle" style="white-space:nowrap;position:absolute;padding: 2px;">'+h+'</span><span class="'+x+'" style="z-index:'+ ++this.zdx+';" id="'+B+'_cls"></span>';u=this.ie5?a-7:a-13;a=new this.subBox(2,24,u,d-36,n,B+"_c");a.className=A;"string"==typeof g?a.innerHTML=
g:a.appendChild(g);a.style.overflow="hidden";o||(a.style.visibility="hidden");o||(e.style.visibility="hidden");g=new this.subBox(2,24,0,0,"",B+"_extWA");g.style.display="none";g.style.width="100%";g.style.height="100%";e.appendChild(y);e.appendChild(a);e.appendChild(g);e.appendChild(f);E=gx.dom.el(E)||this.doc.body;E.appendChild(l);E.appendChild(e);o||this.hide(B);o=G(B+"_b");o.cid=B;o.isExt=s?!0:!1;s=G(B+"_t");s.cid=B;r&&(E=G(B+"_rs"),E.cid=B,gx.evt.attach(E,"mousedown",this.startRS.closure(this,
[E],!0)),gx.evt.attach(E,"mouseup",this.stopRS.closure(this,[E],!0)));B=G(B+"_cls");o.activecolor=j;o.inactivecolor=m;gx.evt.attach(B,"click",F.close||this.close.closure(this,[c,F.beforeClose]));p&&(gx.evt.attach(s,"mousedown",this.grab_id.closure(this,[s],!0)),gx.evt.attach(s,"mouseup",this.stopdrag.closure(this,[s],!0)),r&&gx.evt.attach(f.firstChild,"dragstart",function(a){gx.evt.cancel(a,true)},!0));(q||v)&&this.initmodal(c,v,D)},popUp:function(c,f,e,b,a,d,g,n,h,j,k,m,l,q,o,p,r,s,u,t,x,A,y,w,v,
D,F,E,B,G,H,L,z,C,I){k=gx.popup.ext;null!=c.parentPopup?(m=c.parentPopup.window,k=m.gx.popup.ext,k.win=m,k.doc=m.document,gx.popup.ext=k):(k.win=window,k.doc=k.win.document);k.win.gx.popup.setPopup(c);c.window=k.win;c.document=k.doc;k.win.gx.popup.lvl++;n+=k.win.gx.popup.lvl;c.id=n;!c.IsPrompt&&!gx.util.sameAppUrl(h)?(gx.popup.setPopup(null),c=new Date,c=c.getTime(),n="",1==e&&(n=k.ns4?"screenX="+b+",screenY="+a:"left="+b+",top="+a),b="",f||(b=",width="+d+",height="+g),window.open(w?h:"","gx"+c,"status=no,menubar=no"+
b+",resizable="+(A?"yes":"no")+",scrollbars=yes,"+n)):(h+=-1!=h.indexOf("?")?",":"?",h+=encodeURIComponent("gxPopupLevel="+k.win.gx.popup.lvl+";"),h='<iframe id="'+n+'_ifrm" src="'+h+'" width="100%" height="100%" frameborder="0" '+(gx.HTML5?"":'scrolling="off"')+' style="overflow:auto;"></iframe>',e={close:c.close.closure(c)},k.window(c,f,b,a,d,g,h,j,l,q,p,r,s,u,t,x,A,w,B,G,H,L,z,C,I,!0,e),f=k.win.gx.dom.el(n+"_ifrm"),gx.lang.doCallTimeout(k.showIfLoaded,k,[c,f,1],50))},initmodal:function(c,f,e){c.showParentPopups=
f;null==c.parentPopup?gx.ajax.disableForm(e):f?(f=gx.http.notification.node(),c=gx.dom.el(c.id+"_b"),f&&c&&(f.style.zIndex=parseInt(c.style.zIndex,0)-1)):this.hide(c.parentPopup.id)},deinitmodal:function(c){if(null==c.parentPopup)gx.ajax.enableForm();else{if(c.showParentPopups){var f=gx.http.notification.node(),e=gx.dom.el(c.parentPopup.id+"_b");f&&e&&(f.style.zIndex=parseInt(e.style.zIndex,0)-1)}this.show(c.parentPopup.id);(f=c.parentPopup.frameWindow)&&f.gx&&c.parentPopup.frameWindow.gx.ajax.enableForm()}},
isPDFPopup:function(c,f){if(void 0===f.isPdf){var e=c.src;if(gx.util.getContentTypeFromExt(e)==gx.util.contentTypes.pdf)return f.isPdf=!0;var b=!0;try{if(b=c.contentDocument,b=c.contentWindow.document,b.contentType==gx.util.contentTypes.pdf)return f.isPdf=!0}catch(a){b=!1}if(!1===b){var d,b={};b.url=e;b.method="HEAD";b.sync=!0;b.handler=function(a,b,c){d=c.getResponseHeader("Content-Type")};b.obj=!0;gx.http.doCall(b);if(d&&0<=d.indexOf(gx.util.contentTypes.pdf))return f.isPdf=!0}return!1}return f.isPdf},
showIfLoaded:function(c,f,e){try{if(c.isActive()&&(this.docReady(f,e)||10<e&&this.isPDFPopup(f,c))){var b=gx.dom.iFrameDoc(f),a=!1;try{a=b&&"about:blank"!=b.URL}catch(d){}var g=this.isPDFPopup(f,c);if(a||g){c.state="opened";this.autofit(c,b,!0);return}}}catch(n){gx.dbg.logEx(n,"gxpopup.js","showIfLoaded")}e++;gx.lang.doCallTimeout(gx.popup.ext.showIfLoaded,gx.popup.ext,[c,f,e],50*e)},docReady:function(c,f){if("complete"==c.readyState)return!0;var e=gx.dom.iFrameDoc(c);if(e){var b;try{b="undefined"!=
typeof e.gxReadyState?e.gxReadyState:e.readyState}catch(a){return!0}if("complete"==b)return!0}return!gx.util.browser.isIE()&&10<=f&&e&&e.body&&0!==e.body.childNodes.length?!0:!1},autofit:function(c,f,e){if(!gx.lang.emptyObject(c)){var b=document;c.zindex=null!=b.gxPopup?this.zdx+b.gxPopup.zindex:this.zdx;var a=c.id,d=c.isPdf;this.doc||(this.doc=c.document);var b=this.doc,g=b.getElementById(a+"_ifrm");!f&&gx.popup.ispopup()&&(f=gx.dom.iFrameDoc(g));c.frameDocument=f;c.frameWindow=g.contentWindow;f&&
!d&&(f.gxPopup=c);var g=b.getElementById(a+"_rs"),n=b.getElementById(a+"_s"),h=b.getElementById(a+"_t"),j=b.getElementById(a+"_b"),k=b.getElementById(a+"_c"),m=b.getElementById(a+"_gxtitle"),l=gx.dom.getComputedStyle(k),q=gx.dom.getComputedStyle(h),o=gx.dom.getComputedStyle(j),p=gx.dom.getComputedStyle(g),r=parseInt(l.height,0),s=parseInt(l.width,0),u,t,x,A,y=0,w=0;u=gx.util.getWindowInfo().canAccessFrame;m.innerHTML=f&&!d?f.title:"";if(!u||window==window.top||gx.lang.emptyObject(window.top))u=window.innerWidth||
b.documentElement.clientWidth||b.body.offsetWidth,t=window.innerHeight||b.documentElement.clientHeight||b.body.offsetHeight,x=gx.dom.documentScroll(b).scrollTop,A=gx.dom.documentScroll(b).scrollLeft;else{var v=gx.dom.position(window.frameElement);window.top.document.body.clientHeight>b.body.clientHeight?t=b.body.clientHeight:(t=window.top.document.body.clientHeight,w=v.y);x=b.body.scrollTop;A=b.body.scrollLeft;u=Math.min(window.top.document.body.clientWidth,b.body.clientWidth);window.top.document.body.clientWidth>
b.body.clientWidth?u=b.body.clientWidth:(u=window.top.document.body.clientWidth,y=v.x)}v=gx.dom.dimensions(j);c.autoresize||(r=c.height-r+v.h,s=c.width-s+v.w);var D=c.width-s,F=c.height-r;c.autoresize&&(!d&&f&&f.body?(D=f.body.scrollWidth+30-u,b=f.body.scrollHeight+30-t,d=0,f.body.scrollWidth>u&&(F=f.body.scrollWidth-f.body.clientWidth,d+=e&&0<F?F:0),D=Math.max(f.body.scrollWidth,m.clientWidth+15)-s-(0<D?D:0)+d,F=f.body.scrollHeight-r-(0<b?b:0)):d&&(D=b.body.clientWidth/2,F=b.body.clientHeight/2));
f=parseInt(c.top,0);r=parseInt(c.left,0);if(!c.position&&(f=(t-F)/2-v.h/2+x-w,r=(u-D)/2-v.w/2+A-y,0>f&&(f=5,F-=5),0>r))r=5,D-=5;j.style.top=parseInt(f,0)+"px";j.style.left=parseInt(r,0)+"px";n.style.top=parseInt(f,0)+this.sdiff+"px";n.style.left=parseInt(r,0)+this.sdiff+"px";c.autoresize?(c=function(a,d){var b=parseInt(a,0)+d;return b>0?b:a},h.style.width=c(q.width,D)+"px",j.style.height=c(o.height,F)+"px",j.style.width=c(o.width,D)+"px",k.style.height=c(l.height,F)+"px",k.style.width=c(l.width,D)+
"px",h=gx.util.browser.isIE()?0:4,n.style.height=parseInt(o.height,0)+h+"px",n.style.width=parseInt(o.width,0)+h+"px",h=gx.util.browser.isIE()?4:2,g.style.top=parseInt(o.height,0)-parseInt(p.height,0)-h+"px",g.style.left=parseInt(o.width,0)-parseInt(p.width,0)-h+"px"):(r=c.height,s=c.width,o=this.ie5,g.style.left=Math.max(s,o?88:92)+"px",g.style.top=Math.max(r,o?68:72)+"px",j.style.width=Math.max(s+(o?12:8),100)+"px",j.style.height=Math.max(r+(o?12:8),80)+"px",h.style.width=Math.max(s+(o?4:3),this.ns6?
95:92)+"px",n.style.width=Math.max(s+12,o?100:104)+"px",n.style.height=Math.max(r+(o?12:13),o?80:86)+"px",k.style.width=Math.max(s-(o?-5:5),o?92:87)+"px",k.style.height=Math.max(r-(o?24:28),44)+"px");gx.util.browser.isIPad()||gx.util.browser.isIPhone()?(k.style["overflow-y"]="auto",k.style["-webkit-overflow-scrolling"]="touch"):k.style.overflow="hidden";e&&this.show(a)}},_init:function(){this.w3c=gx.util.browser.w3c;this.ns4=gx.util.browser.ns4;this.ie5=gx.util.browser.ie5;this.ns6=gx.util.browser.ns6;
setInterval(gx.popup.ext.movepopup.closure(gx.popup.ext),40)}},_init:function(){gx.lang.inherits(this.Popup,this.Dialog);this.ext._init();var c=this.getPopup();if(c){try{c.frameDocument&&(c.frameDocument.gxPopup=c)}catch(f){c.frameDocument=c.frameWindow.document,gx.dbg.logEx(f,"gxpopup.js","_init")}c=c.window.gx.popup;gx.fx.obs.addObserver("gx.onload",c,function(){this.autofit()}.closure(c));gx.fx.obs.addObserver("grid.onafterrefresh",c,function(c,b,a){b<a&&this.autofit()}.closure(c));gx.fx.obs.addObserver("gx.onafterevent",
c,function(){this.autofit()}.closure(c))}}}}(gx.$);
gx.ajax=function(c){var f=/\?(.*)/;return{reqHeader:"GxAjaxRequest",resourceProvider:"",dfTimer:null,resolveParmKey:function(c){var b=!1;c.av?b=c.av:c.ctrl&&c.prop?b=c.ctrl+c.prop:c.ctrl&&(b=c.ctrl);return b},serviceUrl:function(c,b){var a=gx.ajax.selfUrl();b&&(a=f.test(a)?a.replace(f,"?"+b+",$1"):a+("?"+b));return a},message:function(e,b,a,d,g){var f;return{gxO:b,grid:a,row:d,methods:[e],addMethod:function(a){this.methods.push(a)},gridsData:function(){var a=this.gxO.getGridById(this.grid,this.row),
d=a,b={};if(a){var g=function(a,d,b){c.each(a.childGrids,function(a,c){var e=b.gxO.getGridById(c.gridId,b.row);d[e.gridName]={id:e.gridId,lastRow:e.lastRowId};return g(e,d)})};g(a,b,this)}else for(c.each(this.gxO.Grids,function(a,d){b[d.gridName]={id:d.gridId,lastRow:d.lastRowId}});d;)b[a.gridName]={id:a.gridId,lastRow:a.lastRowId},d=d.parentGrid;return b},to_json:function(){var a={MPage:this.gxO.IsMasterPage,cmpCtx:this.gxO.CmpContext,parms:this.parms,hsh:this.hashedParms,objClass:this.gxO.ServerClass,
pkgName:this.gxO.PackageName||"",events:this.methods};this.fullPost&&(a.fullPost=this.fullPost);this.addGXStateParms(a);this.grid&&(a.grid=this.grid);a.grids=this.gridsData();this.row&&(a.row=this.row.substring(this.row.length-4));return gx.json.serializeJson(a)},getParmsMetadata:function(a){for(var d=[],b={},c=0,g=this.methods.length;c<g;c++){var e=this.methods[c];if(this.gxO.EvtParms[e])for(var e=this.gxO.EvtParms[e]["input"==a?0:1],f=0;f<e.length;f++)if(e[f].postForm||e[f].sPrefix||e[f].sSFPrefix||
e[f].sCompEvt)d.push(e[f]);else{var n=gx.ajax.resolveParmKey(e[f]);n&&(void 0===b[n]?(b[n]=d.length,d.push(e[f])):void 0===d[b[n]].grid&&void 0!==e[f].grid&&(d[b[n]]=e[f]))}}return d},getInputParms:function(){for(var a=this.getParmsMetadata("input"),d=[],b=[],c,g,e,f,n=0,r=a.length;n<r;n++)if(c=a[n],c.postForm){c={};c.formNode=this.gxO.getContainer()||gx.dom.form();this.fullPost=gx.http.getPostData(c,gx.http.postDataFormat.JSON);for(var s in gx.http.viewState)this.fullPost[s]||(this.fullPost[s]=gx.http.viewState[s])}else if(c.sPrefix)d.push(this.gxO.sPrefix());
else if(c.sSFPrefix)d.push("");else if(c.sCompEvt)d.push(gx.fn.getHidden("_EventName").replace(this.gxO.sPrefix(),""));else if(c.ctrl)c.prop?g=gx.fn.getCtrlProperty(c.ctrl,c.prop):(e=this.gxO.getValidStructFld(c.ctrl),null!=e&&gx.html.controls.isMultiSelection(e.ctrltype)&&(c=gx.fn.getControlGridRef(e.fld,e.grid),(c=gx.dom.comboBoxToObj(c,g))&&(g=c))),d.push(g);else{(e=c.fld?this.gxO.getValidStructFld(c.fld):null)&&"function"==typeof e.c2v&&e.c2v();g="function"==typeof this.gxO[c.av]?this.gxO[c.av](this.row):
void 0===this.gxO[c.av]?"":this.gxO[c.av];if(void 0!==c.grid&&e){g={c:[],v:g};f=gx.fn.currentGridRowImpl(e.grid);for(var u=1;u<=e.gxgrid.lastRowId;u++)gx.fn.setCurrentGridRow(e.grid,e.gxgrid.getPaddedRowId(u)),g.c.push(e.val());gx.fn.setCurrentGridRow(e.grid,f)}d.push(g);c.hsh&&b.push(gx.fn.getHash(this.gxO.CmpContext,c.fld))}return{input:d,hashed:b}},addGXStateParms:function(a){var d={};gx.webSocket.initialized&&gx.fn.getHidden("GX_WEBSOCKET_ID")&&(d.GX_WEBSOCKET_ID=gx.fn.getHidden("GX_WEBSOCKET_ID"));
gx.lang.emptyObj(d)||(a.gxstate=d)},call:function(){f=c.Deferred();var a=gx.O;gx.setGxO(this.gxO);var d;this.grid&&this.row&&(d=gx.fn.currentGridRowImpl(this.grid),gx.fn.setCurrentGridRow(this.grid,this.row));if(g){var b=this.getInputParms();this.parms=b.input;this.hashedParms=b.hashed;this.doFullAjaxCall(!1)}else this.doClientSideCall();this.grid&&this.row&&gx.fn.setCurrentGridRow(this.grid,d);gx.setGxO(a);return f.promise()},doFullAjaxCall:function(a){var d=this.to_json();gx.evt.setProcessing(!0);
this.gxO.startFeedback();gx.fx.obs.notify("gx.onbeforeevent",[d,a]);a=gx.ajax.getPostInfo(this.gxO,d,a);a.handler=this.postHandlerFullAjax.closure(this);a.handleAllStatusCodes=!0;a.url=gx.ajax.serviceUrl(gx.pO,gx.ajax.encryptParms(this.gxO,"gxfullajaxEvt"));a.reqData=d;a.always=this.callback;a.contentType="application/json";gx.http.doCall(a)},doClientSideCall:function(){this.callback();f.resolve()},postHandlerFullAjax:function(a,d,b){gx.evt.enter=!1;gx.csv.lastEvtResponse=null;var c;b.status==gx.http.STATUS_FORBIDDEN?
alert(gx.getMessage("GXM_runtimeappsrv")+" ("+b.status+")"):200>b.status||299<b.status?gx.dom.write(b.responseText):(c=gx.json.evalJSON(d),null==c?gx.dom.write(d.toString()):(gx.csv.lastEvtResponse=c,gx.ajax.setJsonResponse(c,!0,null,this.gxO,this.grid,this.row)));gx.evt.setProcessing(!1);f.resolve();gx.fx.obs.notify("gx.onafterevent",[c])}}},timeoutActions:{ignore:0,warn:1},maxGETLength:function(c){return c.AjaxSecurity?600:1350},getImageUrl:function(c,b){var a=c[b];if(gx.lang.emptyObject(a))return"";
"object"==typeof a&&(c[b]=gx.ajax.imageGuidToUrl(a.guid));return gx.util.resourceUrl(gx.basePath+gx.staticDirectory+c[b],!0)},imageGuidToUrl:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider)){var b=gx.ajax.objectUrl(this.resourceProvider)+"?image,"+encodeURIComponent(c)+",,"+encodeURIComponent(gx.theme);gx.http.callBackend("",b,")",!0,gx.http.modes.none,!0,"GET",null,!0);return gx.http.lastResponse}}catch(a){gx.dbg.logEx(a,"gxcallrpc.js","getImageUrl")}return c},sendHeader:function(c){try{if(!gx.lang.emptyObject(this.resourceProvider))return gx.http.callBackend("",
location.href,")",!0,gx.http.modes.none,!0,"HEAD",null,!0,!0,c),!0}catch(b){}return!1},encryptParms:function(c,b){return c.AjaxSecurity?gx.sec.encrypt(b):b},doPost:function(c,b,a,d){if(!gx.evt.processing||gx.csv.validating)gx.evt.setProcessing(!0),!1!==a&&gx.O.startFeedback(),gx.fx.obs.notify("gx.onbeforeevent",[c,b]),gx.fn.objectOnpost(),gx.http.saveState(),gx.fn.forceEnableControls(!1),b=this.getPostInfo(gx.O,c,b),b.url=gx.ajax.serviceUrl(gx.O,c),b.onReady=function(){gx.evt.setProcessing(!1)},b.always=
d,gx.http.doCall(b)},getPostInfo:function(c,b,a){b={};b.formNode=gx.dom.form();b.method="POST";b.encoding="UTF-8";b.useCash=!1;b.gxO=c;!0===a&&(b.sync=!0);b.handler=gx.http.postHandler;this.multipartInfo(b);return b},multipartInfo:function(c){gx.dom.hasSelectedFile()&&(c.multipart=!0,c.mimetype="text/html",c.formNode.encoding="multipart/form-data")},dispatchCommands:function(c,b){b=b||gx.O;if(c&&0<c.length)for(var a=c.length,d=0;d<a;d++){var g=c[d];g.print&&gx.printing.print(g.print);if(g.close){var f=
[];g.close instanceof Array&&(f=g.close);gx.fn.closeWindow(f)}"undefined"!=typeof g.refresh&&("GET"==g.refresh?gx.http.reload(!0):(f="RFR",b.IsMasterPage&&(f+="_MPAGE"),gx.pO.executeServerEvent(f,!0,null,!0)));g.redirect&&(g.redirect.url=gx.ajax.removeGXParms(g.redirect.url),gx.http.redirect(g.redirect.url,g.redirect.forceDisableFrm));g.cmp_refresh&&(f=gx.pO.getWebComponent(g.cmp_refresh),gx.evt.dispatcher.dispatch("REFRESH",f));if(g.popup){b.endFeedback();c.length>d+1&&(g.popup[7]=c.slice(d+1));
gx.popup.open(g.popup);break}if(g.ucmethod){var h=gx.getObj(g.ucmethod.CmpContext,g.ucmethod.IsMasterPage);h&&(f=gx.O,gx.setGxO(h),(h=gx.O.getUserControl(g.ucmethod.Control))&&"function"==typeof h[g.ucmethod.Method]&&h[g.ucmethod.Method].apply(h,g.ucmethod.Parms),gx.setGxO(f))}}},ROW_ID_REGEXP:/[0-9]{4}$/,dispatchPreCommands:function(c,b,a,d,g,f,h,j){b=b||gx.O;if(c&&0<c.length){a=c.length;for(g=0;g<a;g++)if(f=c[g],f.load){if(d=b.getGridById(f.load.grid,j))f.load.props.values=f.load.values,d.loadNewRows(f.load.props)}else f.addlines&&
(d=b.getGridById(f.addlines.grid,j))&&d.getNewRows(f.addlines.count)}},willLeavePage:function(c){if(c)for(var b=c.length,a=0;a<b;a++)if(c[a].close)return!0;return!1},hasRedirectCommand:function(c){if(c)for(var b=c.length,a=0;a<b;a++){var d=c[a];if(d.popup)break;if(d.redirect)return!0}return!1},saveJsonResponse:function(c){this.lastJsonResponse=c},clearJsonResponse:function(){delete this.lastJsonResponse},getJsonResponse:function(){return this.lastJsonResponse},setPostResponse:function(c){return this.setJsonResponse(c,
!0,null,gx.O)},setJsonResponse:function(c,b,a,d,g,f){var h=gx.fn,j=gx.lang.doCall,k,m,l=this.willLeavePage(c.gxCommands);d&&(k=gx.O,gx.O=d);g&&f&&(m=gx.fn.currentGridRow(g),gx.fn.setCurrentGridRow(g,f));gx.evt.srvCommand?(gx.evt.srvCommand=!1,j(gx.ajax.dispatchCommands,c.gxCommands,d)):this.hasRedirectCommand(c.gxCommands)?j(gx.ajax.dispatchCommands,c.gxCommands,d):l?j(gx.ajax.dispatchCommands,c.gxCommands,d):(j(gx.ajax.dispatchPreCommands,c.gxCommands,d,c.gxComponents,c.gxHiddens,c.gxValues,c.gxGrids,
c.gxProps,f),j(h.clearCompontHiddens,c.gxComponents),j(h.setJsonHiddens,c.gxHiddens),j(h.setJsonComponents,c.gxComponents,c.DynComponentMap,c.gxHiddens,function(){gx.http.loadStyles();gx.updateTheme();b&&gx.fn.installComponents(false);typeof a=="function"&&a();if(k)gx.O=k;var l=j(h.setJsonValues,c.gxValues),o=j(h.setJsonProperties,c.gxProps,f);gx.util.balloon.clearAll();h.enableDisableDelete();b&&j(h.loadJsonGrids,c.gxGrids,b);j(h.setErrorViewer,c.gxMessages);if(b){var p;gx.pO.supportAjaxEvents&&
(p=gx.lang.arrayUnique(o.concat(l)));h.objectPostback(p);h.setFocusAfterLoad();gx.dom.indexElements()}gx.popup.currentPopup||d.endFeedback();j(gx.ajax.dispatchCommands,c.gxCommands,d);m&&gx.fn.setCurrentGridRow(g,m)},b));return l},swallowKeys:function(c){c.cancel=!0},disableForm:function(c){c=void 0===c||c;gx.pO.startFeedback();c&&gx.fx.obs.addObserver("gx.keypress",this,this.swallowKeys)},enableForm:function(){gx.pO&&gx.pO.endFeedback();gx.fx.obs.deleteObserver("gx.keypress",this,this.swallowKeys)},
isFormEnabled:function(){return!gx.http.notification.isVisible()},executeCliEvent:function(c,b){try{var a,d=gx.lang.emptyObject;if(!d(b)){var g=gx.fn.rowGridId(b);if(!d(g)){var f=gx.fn.getGridObj(g);d(f)||(a=gx.fn.controlRowId(b)||gx.fn.currentGridRowImpl(g)||"0001",f.instanciateRow(a))}}gx.O[c].call(gx.O,a)}catch(h){gx.dbg.logEx(h,"gxcallrpc.js","executeCliEvent")}},suggest:function(c,b,a,d,g,f){c=new gx.fx.suggestProvider(c,b,a);return new gx.fx.autoSuggestControl(gx.fn.screen_CtrlRef(b),c,b,d,
g,f)},hideCode:function(c,b,a){for(var a="gx.fn.setVarValues("+gx.lang.arrayToSource(a)+",",d=this.objectUrl()+"?",b="gxajaxHideCode_"+b,g=c.length,f=0;f<g;f++)b+=","+encodeURIComponent(eval(c[f]));d+=gx.ajax.encryptParms(gx.O,b);gx.http.callBackend(a,d,")",!0,gx.http.modes.retval);return this.lastStatus},callCrl:function(c,b,a){var d=a?"gx.fn.setGridComboValues":"gx.fn.setComboValues",a=a?b:gx.fn.screen_CtrlRef(b).name,d=d+"('"+a+"',",a=this.objectUrl()+"?",c="gxajaxCallCrl_"+b+","+this.arrayToUrl(c),
a=a+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(d,a,")",!0,gx.http.modes.retval)},refreshGrid:function(c,b){var a=gx.O;gx.setGxO(c.parentObject);var d="GET",g=this.objectUrl()+"?",f="gxajaxGridRefresh_"+c.gridName+","+b,h;gx.fx.obs.notify("grid.onbeforerefresh",[c]);c.autoRefreshing=!0;gx.csv.autoRefreshing=c;var j=c.grid.rows.length;c.setPagingVars(0,0);if(f.length>gx.ajax.maxGETLength(gx.O)){d="POST";h=["GXEvent="+gx.ajax.encryptParms(gx.O,"gxajaxGridRefresh_"+c.gridName)];for(var f=b.split(","),
k=0,m=f.length;k<m;k++)h.push("GXParm"+k+"="+f[k])}else g+=gx.ajax.encryptParms(gx.O,f);c.grid.mask();gx.http.doCall({method:d,url:g,reqData:h,handler:function(a,d){gx.http.postHandler(a,d,{status:200,responseText:""});gx.fx.obs.notify("grid.onafterrefresh",[c,j,c.grid.rows.length])},always:function(){gx.csv.autoRefreshing=null;c.autoRefreshing=!1;c.grid.unmask();gx.setGxO(a)}})},newRows:function(c,b,a,d,g,f,h,j){var k="gx.fn.gridObj('"+c+"','"+a+"',"+b.toString()+"').setNewRows(",m=this.objectUrl()+
"?",d="gxajaxNewRow_"+a+","+d+","+g+","+f,c=gx.fn.gridObj(c,h?a+"_"+h:a,b);gx.O.IsComponent&&(d+=","+gx.O.CmpContext);for(b=0;b<c.postingVariables.length;b++)d+=","+encodeURIComponent(c.parentObject[c.postingVariables[b]]);m+=gx.ajax.encryptParms(gx.O,d);gx.http.callBackend(k,m,")",!0,gx.http.modes.none);if(k=gx.http.lastResponse)k=gx.json.evalJSON(k),j.call(c,k),gx.dom.indexElements()},loadCrl:function(c,b,a){if("1"==gx.fn.getControlValue("IsConfirmed"))this.lastStatus=0;else{var a="gx.fn.setVarValues("+
gx.lang.arrayToSource(a)+",",d=this.objectUrl()+"?",c="gxajaxExecAct_"+c+","+this.arrayToUrl(b),d=d+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(a,d,")",!0,gx.http.modes.retval)}},udp:function(c,b,a){var a="gx.fn.setVarValues("+gx.lang.arrayToSource(a)+",",d=this.objectUrl()+"?",c=c+","+this.arrayToUrl(b),d=d+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(a,d,")",!0,gx.http.modes.retval)},srvEvt:function(c,b,a,d){var d="gx.fn.setVarValues("+gx.lang.arrayToSource(d)+",",g=this.objectUrl()+"?",
c=c+","+b+","+this.arrayToUrl(a),g=g+gx.ajax.encryptParms(gx.O,c);gx.http.callBackend(d,g,")",!0,gx.http.modes.full)},validSrvEvt:function(c,b,a,d){var d="gx.csv.setValidValues("+gx.lang.arrayToSource(a)+","+gx.lang.arrayToSource(d)+",",g=this.objectUrl(),f=c+","+b+","+this.arrayToUrl(a,!0);f.length>this.maxGETLength(gx.O)?this.validAsPost(g,d,c,b,a):(g+="?"+gx.ajax.encryptParms(gx.O,f),gx.http.callBackend(d,g,")",!0,gx.http.modes.call,!gx.ajax.isFormEnabled()))},validAsPost:function(c,b,a,d,g){a=
"GXEvent="+gx.ajax.encryptParms(gx.O,a)+"&GXAction="+d;0<g.length&&(a+="&"+this.getParmsPostData(g));gx.http.callBackend(b,c,")",!0,gx.http.modes.call,!1,"POST",a)},getParmsPostData:function(c){for(var b="",a=0;a<c.length;a++)0<a&&(b+="&"),b+="GXParm"+a+"="+this.parmToUrl(c[a],!0);return b},getCallerUrl:function(c){if(gx.stackSupported()){var c=(c=gx.call_stack_storage.get(gx.stackId(c)))||[],b=1==c.length&&c[0]!=gx.ajax.selfUrl()?c[0]:"";return b=1<c.length?c[c.length-2]:b}return gx.fn.getControlValue("sCallerURL")},
pushReferer:function(c,b){b="undefined"==typeof b?location.href:gx.ajax.absoluteurl(b);if(gx.stackSupported()){"undefined"==typeof c&&(c=gx.popup.popuplvl());var a=gx.call_stack_storage.get(gx.stackId(c)),a=a||[];b!=gx.util.lastArray(a)&&a.push(b);gx.call_stack_storage.set(gx.stackId(c),a)}else{var a=this.objectUrl()+"?",d="dyncall,PushReferer,"+encodeURIComponent(b),a=a+gx.ajax.encryptParms(gx.O,d);gx.http.callBackend("",a,"",!0,gx.http.modes.none,!0)}},windowClosed:function(c){if(gx.stackSupported())if(-1==
c){var b=gx.stackId(gx.popup.popuplvl()),c=(c=gx.call_stack_storage.get(b))||[];c.pop();gx.call_stack_storage.set(b,c)}else gx.call_stack_storage.remove(gx.stackId(c));else b="",b=-1==c?",PopReferer":",DeleteReferer,"+c.toString(),c=this.objectUrl()+"?",c+=gx.ajax.encryptParms(gx.O,"dyncall"+b),gx.http.callBackend("",c,"",!0,gx.http.modes.none,!0)},aggSel:function(c,b,a){var d=this.objectUrl()+"?",c="gxajaxAggSel"+b+"_"+c+","+this.arrayToUrl(a),d=d+gx.ajax.encryptParms(gx.O,c);return gx.http.callBackend(null,
d,"",!1,gx.http.modes.retval)[0]},aggSelDecimal:function(c,b,a,d,g){return gx.num.parseFloat(this.aggSel(c,b,g),a,d)},aggSelInteger:function(c,b,a){return parseInt(this.aggSel(c,b,a),10)},dynComponent:function(e,b,a,d){var g=c.Deferred(),e=e.toLowerCase();gx.gen.isDotNet()&&(e+=".aspx");e=gx.ajax.objectUrl(e);a="GXEvent="+gx.ajax.encryptParms(gx.O,"dyncomponent")+"&GXAction="+encodeURIComponent(a)+"&GXParm0="+encodeURIComponent(d);for(d=0;d<b.length;d++)a+="&GXParm"+(d+1).toString()+"="+encodeURIComponent("function"==
typeof b[d].getUrlVal?b[d].getUrlVal():b[d]);gx.http.doCall({method:"POST",url:e,reqData:a,handler:function(a,d){g.resolve(gx.json.evalJSON(d))},error:function(){g.reject()}});return g.promise()},selfUrl:function(){return location.href.replace(/#[\s\S]*$/,"")},removeGXParms:function(c){return c.replace(/\?gxajaxEvt,?|\?gxportlet,?/,"?")},arrayToUrl:function(c,b){for(var a="",d=c.length,g=0;g<d;g++)a+=this.parmToUrl(c[g],b)+",";return a},parmToUrl:function(c,b){var a=eval(c);if(a instanceof Array&&
2==a.length&&"string"==typeof a[0]&&"string"==typeof a[1]){var d=gx.fn.vStructForVar(a[0]);null!=d&&(a=gx.fn.getGridCtrlProperty(d.grid,d.fld,a[1]))}b&&(d=gx.fn.vStructForVar(gx.unprefixVar(c)),null!=d&&gx.html.controls.isMultiSelection(d.ctrltype)&&(d=gx.fn.getControlGridRef(d.fld,d.grid),(d=gx.dom.comboBoxToObj(d,a))&&(a=d)));"object"==typeof a&&(a=gx.json.serializeJson(a));if("undefined"==typeof a||null==a){d=!1;if(c&&0===c.indexOf("gx.O.")){var c=gx.unprefixVar(c),g=gx.fn.getHidden(gx.O.CmpContext+
c);null!=g&&"undefined"!=typeof g&&(a=g,d=!0)}d||(a="")}return encodeURIComponent(a)},objectUrl:function(c){var b="";c?b=c:(b=gx.csv.cmpCtx?gx.fn.getControlValue(gx.csv.cmpCtx+"_CMPPGM"):gx.ajax.selfUrl(),null!=b&&(b=b.replace(/\?.*/,""),b=b.replace(/#[\s\S]*$/,"")),b=this.objnameFromUrl(b));return this.absoluteurl(this.objToRelativeUrl(b))},objToRelativeUrl:function(c){if(this.isabsoluteurl(c))return c;var b=location.pathname;if(null!=c){for(var a=location.pathname.split("/"),b="",d=a.length,g=1;g<
d-1;g++)b+="/"+a[g];b+="/"+c}return b},isabsoluteurl:function(c){return-1!==c.search("://")},isRelativeToHost:function(c){return"/"==c.substr(0,1)},absoluteurl:function(c){if(!this.isabsoluteurl(c)){if("/"!==c.charAt(0)){for(var b="",a=location.pathname.split("/"),d=1;d<a.length-1;d++)b+="/"+a[d];return location.protocol+"//"+location.host+b+"/"+c}return location.protocol+"//"+location.host+c}return c},objnameFromUrl:function(c){0<=c.indexOf("?")&&(c=c.split("?")[0]);var b=c.split("/"),a=b.length;
return 0===a?c:b[a-1]},_init:function(){this.resourceProvider=gx.fn.getHidden("GX_RES_PROVIDER");if(gx.stackSupported()){var c=gx.json.evalJSON(gx.fn.getHidden("GX_NAV"));if(c)for(var b=0;b<c.length;b++)gx.ajax.pushReferer(gx.popup.popuplvl(),c[b]);gx.ajax.pushReferer(gx.popup.popuplvl(),window.location.toString())}}}}(gx.$);
gx.util.balloon={balloons:{},timerOn:!1,lastLbl:null,impl:function(){this.init=function(c,f){this.id=c;this.balloonid=c+"_Balloon";this.hasMessage=!1;this.messageWar=this.messageErr="";this.isError=!1;this.active=!0;this.errorValue=null;this.quirksCompatMode=gx.csv.compatibleOverlapMode&&gx.csv.overlap&&("top"==gx.csv.messagePosition||"bottom"==gx.csv.messagePosition);this.sourceElements=f||[]};this.clear=function(){this.hasMessage=!1;this.messageWar=this.messageErr="";this.active=!1;this.errorValue=
null;gx.util.balloon.lastLbl=null};this.setMessage=function(c){this.hasMessage||(this.messageWar=c,this.hasMessage=!0)};this.setError=function(c){this.hasMessage||(this.messageErr=c,this.hasMessage=this.isError=!0)};this.create=function(c,f,e,b){var a;a=document.createElement("span");a.id=c;a.className=e;c=document.createElement("div");if(this.quirksCompatMode){var d=gx.dom.position(f);0===d.x&&(0===d.y&&f.parentNode)&&(d=gx.dom.position(f.parentNode));var g=parseInt(d.x,10),d=parseInt(d.y,10);0>=
g&&(g=10);0>=d&&(d=20);c.style.position="absolute";"top"==gx.csv.messagePosition&&(c.style.top=d-gx.dom.dimensions(f).h-4-2+"px",c.style.left=g+"px");"bottom"==gx.csv.messagePosition&&(c.style.top=d+gx.dom.dimensions(f).h+2+"px",c.style.left=g+"px");c.style.zIndex=1}else c.style.position="relative";a.style.display="none";a.style.className=e;e=document.createTextNode(b);a.appendChild(e);c.appendChild(a);this.quirksCompatMode?document.body.appendChild(c):("right"==gx.csv.messagePosition||"bottom"==
gx.csv.messagePosition?(b=(e=f.nextSibling)?e.firstChild:null,e&&(e.id&&e.id=="span_"+this.id)&&(e=e.nextSibling),e&&e.id&&0<e.id.indexOf("dp_trigger")?f=e:e&&("A"==e.nodeName&&b&&"IMG"==b.nodeName&&b.id&&0===b.id.indexOf("PROMPT_"))&&(f=e),f.parentNode.insertBefore(c,f.nextSibling)):f.parentNode.insertBefore(c,f),!0===gx.csv.overlap)?(a.style.position="absolute",a.style.zIndex="1"):a.style.position="relative";return a};this.getControlValue=function(){for(var c=[gx.fn.getControlValue(this.id)],f=
0,e=this.sourceElements.length;f<e;f++)c.push(gx.fn.getControlValue(this.sourceElements[f]));return c.join(";")};this.groupControl=function(c){c=gx.dom.el(c);"INPUT"===c.nodeName&&"radio"===c.type&&(c=c.parentNode&&"SPAN"==c.parentNode.tagName?c.parentNode:gx.dom.findParentByTagName(c,"table"));return c};this.hideBalloon=function(c){try{c&&(c.style.display="none",c.parentNode.style.display="none")}catch(f){gx.dbg.logEx(f,"gxballoon.js","hideBalloon")}};this.showBalloon=function(c){try{var f=gx.dom.el(this.id);
if(this.quirksCompatMode)c.style.display="block","top"==gx.csv.messagePosition&&(!this.quirksCompatMode&&!0===gx.csv.overlap)&&(c.style.top=0-gx.dom.dimensions(c).h+"px"),c.parentNode.style.display="inline";else if(c.style.display="inline",!this.quirksCompatMode)if("right"==gx.csv.messagePosition||"left"==gx.csv.messagePosition)c.parentNode.style.display="inline","left"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(c.parentNode.style.left=0-gx.dom.dimensions(c).w+"px");else{if("bottom"==gx.csv.messagePosition&&
!0===gx.csv.overlap){c.parentNode.style.display="inline";if(!c.parentNode.style.left){var e=0-(gx.dom.position(c).x-gx.dom.position(f).x);c.parentNode.style.left=e-1+"px"}c.parentNode.style.top=gx.dom.dimensions(f).h+"px";c.style.top="0px"}"top"==gx.csv.messagePosition&&!0===gx.csv.overlap&&(c.style.top=0-gx.dom.dimensions(c).h-2+"px")}}catch(b){gx.dbg.logEx(b,"gxballoon.js","showBalloon")}};this.show=function(c){var f,e,b,a,d,g,n,h,j,k;if(!(void 0!==document.readyState&&"complete"!=document.readyState)){try{if(!1===
this.hasMessage)return!0;e=gx.dom.el(this.id);null===e&&null!==gx.csv.validatingUC&&(e=gx.csv.validatingUC.getContainerControl());"hidden"==e.type?(f=gx.dom.el("span_"+this.id),null!==f&&(e=f)):"INPUT"===e.nodeName&&"radio"===e.type&&(h=gx.dom.byName(gx.dom.id(e)),e.parentNode&&"SPAN"==e.parentNode.tagName?e=e.parentNode:(n=h[0],e=gx.dom.findParentByTagName(e,"table")));if(h){f=[];j=0;for(k=h.length;j<k;j++)f.push(h[j]);h=f}else{h=[e];j=0;for(k=this.sourceElements.length;j<k;j++)h.push(gx.dom.el(this.sourceElements[j]))}this.active=
d=!0;0<this.messageErr.length?(b="Error",a=this.messageErr):0<this.messageWar.length&&(b="Warning",a=gx.html.encode(this.messageWar));""!==b&&(f=b+"Messages",gx.dom.addPrefixClass(e,b),(g=gx.dom.byId(this.balloonid))?(g.innerHTML=a,g.className=f,d=!1):g=this.create(this.balloonid,n?n:e,f,a));gx.util.balloon.lastLbl&&gx.csv.oneAtAtime&&this.hideBalloon(gx.util.balloon.lastLbl);gx.util.balloon.lastLbl=g;!0===c?gx.csv.oneAtAtime||this.showBalloon(g):this.showBalloon(g);if(!1===gx.util.balloon.timerOn&&
0<gx.csv.dismissSeconds)gx.util.balloon.timerOn=!0,this.timerId=setTimeout(function(){gx.util.balloon.clearAll()},1E3*gx.csv.dismissSeconds);else if(d){gx.csv.oneAtAtime&&(gx.evt.attach(e,"mouseout",gx.util.balloon.cvsMouseOutHandler.closure(this)),gx.evt.attach(e,"mouseover",gx.util.balloon.cvsMouseOverHandler.closure(this)));k=h.length;for(j=0;j<k;j++)"INPUT"===h[j].nodeName&&"radio"===h[j].type?gx.evt.attach(h[j],"change",gx.util.balloon.cvsHide,this):gx.evt.attach(h[j],"blur",gx.util.balloon.cvsHide,
this)}this.errorValue=this.getControlValue()}catch(m){gx.dbg.logEx(m,"gxballoon.js","show")}return!this.isError}}},cvsHide:function(){var c,f,e;try{c=this.groupControl(this.id),e=this.getControlValue(),e!=this.errorValue&&(this.errorValue=e,f=gx.dom.byId(this.balloonid),null!=f&&(gx.dom.removePrefixClass(c,"Error"),gx.dom.removePrefixClass(c,"Warning"),this.hideBalloon(f),this.active=!1))}catch(b){}},cvsMouseOutHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&(gx.util.balloon.lastLbl?
gx.util.balloon.lastLbl.id!=c.id&&this.hideBalloon(c):this.hideBalloon(c))}},cvsMouseOverHandler:function(){if(this.active){var c=gx.dom.byId(this.balloonid);null!=c&&this.showBalloon(c)}},clearAll:function(){var c,f,e;this.timerOn=!1;for(e in this.balloons)c=this.balloons[e],f=gx.util.balloon.cvsHide.closure(c),c.clear(),f()},clear:function(c){var f,e,b;try{f=gx.csv.ctxControlId(c),this.balloons[f]&&(e=this.balloons[f],b=gx.util.balloon.cvsHide.closure(e),e.clear(),b())}catch(a){gx.dbg.logEx(a,"gxballoon.js",
"clear")}},getNew:function(c,f,e){var e=e||[],b,a,d,g=e.length;"undefined"!=typeof f&&(c=c+"_"+f);try{b=gx.fn.screen_CtrlRef(c);a=gx.dom.id(b);c=gx.csv.ctxControlId(a);for(d=0;d<g;d++)b=gx.fn.screen_CtrlRef(e[d]),a=gx.dom.id(b),e[d]=gx.csv.ctxControlId(a)}catch(n){gx.dbg.logEx(n,"gxballoon.js","getNew")}this.balloons[c]?(f=this.balloons[c],f.sourceElements=e||[],f.clear()):(f=new this.impl,this.balloons[c]=f,f.init(c,e));return f}};
gx.grid={drawAtServer:!1,deleteMethods:{images:0,menu:1,none:2},deletePositions:{left:0,right:1,bottomR:2,bottomL:3,topR:4,topL:5},deleteMethod:null,deleteImage:null,undeleteImage:null,deletePosition:null,deletePositionFree:null,deleteTooltip:null,deleteTitle:null,lastFocusCtrl:null,styles:{none:0,uniform:1,header:2,report:3},getImplClass:function(c,f){if(f){gx.lang.inherits(gx.ui.grid,gx.uc.UserControl,!0);gx.lang.inherits(gx.ui.grid,gx.grid.impl,!0);gx.lang.inherits(f,gx.ui.grid,!0);var e=new f;
c&&(e.ParentObject=c.parentObject,e.ControlName=c.gridName,c.parentObject.setUserControl(e));return e}return c.isResponsive?new gx.grid.responsiveGrid("gx"):new gx.grid.impl("gx")},validGridColsValue:function(c){var f=c,f=void 0!=c?c:1;return 0!=f?f:9999},grid:function(c,f,e,b,a,d,g,n,h,j,k,m,l,q,o,p,r,s,u,t,x,A,y,w,v,D,F,E,B,G,H,L){this.parentObject=c;this.parentObject["sub"+a+"_Rows"]=function(a){a=this.parentObject.getGridById(b,a);return a.grid.pageSize/a.grid.gxGridCols}.closure(this);this.parentObject[d.toUpperCase()+
(h?"_MPAGE":"")+"_nFirstRecordOnPage"]=function(a){return this.parentObject.getGridById(b,a).grid.firstRecordOnPage}.closure(this);this.parentObject[d.toUpperCase()+(h?"_MPAGE":"")+"_nEOF"]=function(a){return this.parentObject.getGridById(b,a).grid.eof}.closure(this);this.gridLvl=f;this.gridLvlName=e;this.gridId=b;this.gridName=a;this.realGridName=d;this.containerName=g||this.gridName+"Container";this.parentName=j||"";this.pagingParms=[];this.lvlKey=k||[];this.isFreestyle=m||!1;this.isResponsive=
H||!1;this.allowHovering=(this.allowSelection=q||!1)&&o||!1;this.allowCollapsing=B||!1;this.collapsed=!1;this.sortable=!0;this.hoverColor=this.selectionColor=null;this.visible=!0;this.refreshTimer=null;this.pageSizeParm=w||!1;this.hasAddlines=v||!1;this.hasForEachLine=D||!1;this.width=void 0!=x?x:0;this.widthUnit=A||"";this.gridCols=void 0!=l?l:1;this.gridCols=0!=this.gridCols?this.gridCols:9999;this.gridRows=void 0!=p?p:5;this.gridResponsiveCols=L||[1,1,1,1];this.usePaging=(this.usePaging=r||!1)&&
!this.isFreestyle;this.eof=1;this.firstRecordOnPage=0;this.defaultDragable=s||!1;this.defaultSetsContext=u||!1;this.boundedCollType=t||"";this.boundedCollName=G||"";this.gxContainerCtrl=this.contextMenu=null;this.lastRefreshParms="";this.gxComponentContext=n;this.isMasterPageGrid=h;this.htmlTags="";this.onLineActivate=E;this.addingRows=!1;this.deleteMethod=gx.grid.deleteMethod;this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.implClass=F;this.grid=
gx.grid.getImplClass(this,F);this.grid.ownerGrid=this;this.grid.parentGxObject=this.parentObject;this.grid.gxLvl=this.gridLvl;this.grid.gxId=this.gridId;this.grid.gxGridName=this.gridName;this.grid.gxGridObject=this.containerName;this.grid.gxParentName=this.parentName;this.grid.gxIsFreestyle=this.isFreestyle;this.grid.gxWidth=this.width;this.grid.gxWidthUnit=this.widthUnit;this.grid.gxHeight=0;this.grid.gxAllowSelection=this.allowSelection;this.grid.gxAllowHovering=this.allowHovering;this.grid.gxAllowCollapsing=
this.allowCollapsing;this.grid.gxCollapsed=this.collapsed;this.grid.gxSortable=this.sortable;this.grid.gxSelectionColor=this.selectionColor;this.grid.gxHoverColor=this.hoverColor;this.grid.gxVisible=this.visible;this.grid.gxGridCols=this.gridCols;this.grid.gxGridResponsiveCols=this.gridResponsiveCols;this.grid.gxCmpContext=this.gxComponentContext;this.grid.gxHtmlTags=this.htmlTags;this.grid.gxIsMasterPageGrid=this.isMasterPageGrid;this.grid.gxDragable=this.defaultDragable;this.grid.gxHasAddlines=
this.hasAddlines;this.grid.gxHasForEachLine=this.hasForEachLine;this.grid.gxOnLineActivate=this.onLineActivate;this.grid.gxNewRowText=void 0!=y?y:"New Row";this.currentBuffer=this.grid.gxBuffer;this.parentGrid=null;this.childGrids=[];this.hiddens=[];this.oldCmps={};this.ColumnPropertiesAfterRender=[];this.isUsercontrol=gx.lang.instanceOf(this.grid,gx.uc.UserControl);this.gxCreateGridCode=function(a){return new gx.grid.grid(this.parentObject,this.gridLvl,this.gridLvlName,this.gridId,this.gridName+
"_"+a,this.gridName,this.containerName+"_"+a,this.gxComponentContext,this.isMasterPageGrid,this.parentName,this.lvlKey,this.isFreestyle,this.gridCols,this.allowSelection,this.allowHovering,this.gridRows,this.usePaging,this.defaulDragable,this.defaulSetsContext,this.boundedCollType,this.width,this.widthUnit,this.grid.gxNewRowText,this.pageSizeParm,this.hasAddlines,this.hasForEachLine,this.implClass,this.onLineActivate,this.allowCollapsing)}.closure(this);this.gxAddColumnsCode=[];this.grid.usePaging=
this.usePaging;this.grid.eof=this.eof;this.grid.firstRecordOnPage=this.firstRecordOnPage;this.postingVariables=[];this.getPaddedRowId=function(a){a=""+a;return"0000".substring(0,4-a.length)+a};this.addColumnDinCode=function(a,d){this.gxAddColumnsCode.push(function(){a.apply(this,d)})};this.addSingleLineEdit=function(a,d,b,c,g,e,f,n,h,j,k,m,l,q,o,p,u,r,t,s,x,w,y){this.addColumnDinCode(this.addSingleLineEdit,arguments);var v=this.newColumn(c,f,m,n);v.visible=u;v.htmlName=b;v.gxId=d;v.gxAttId=a;v.gxAttName=
e;v.gxTooltip=g;v.gxWidthUnit=h;v.gxColSize=k;v.gxSetsContext=t;v.gxCssClass=x;v.gxColumnClass=y;v.gxControl=new gx.html.controls.singleLineEdit;v.gxControl.column=v;v.gxControl.isPassword=s;v.gxControl.visible=v.visible;v.gxControl.dataType=v.type;v.gxControl.clickEvent=l;this.grid.addColumn(v)};this.addPostingVar=function(a){this.postingVariables.push(a)};this.addMultipleLineEdit=function(a,d,b,c,g,e,f,n,h,j,k,m,l,q,o,p,u,r){this.addColumnDinCode(this.addMultipleLineEdit,arguments);var t=this.newColumn(c,
e,l,f);t.visible=o;t.htmlName=b;t.gxId=d;t.gxAttId=a;t.gxAttName=g;t.gxWidthUnit=n;t.gxSetsContext=p;t.gxColumnClass=r;t.gxControl=new gx.html.controls.multipleLineEdit;t.gxControl.column=t;t.gxControl.dataType=t.type;t.gxControl.visible=t.visible;t.gxControl.heightUnit=j;t.gxControl.clickEvent=q;this.grid.addColumn(t)};this.addBlob=function(a,d,b,c,g,e,f,n,h,j,k,m,l,q){this.addColumnDinCode(this.addBlob,arguments);var o=this.newColumn(c,e,"left",h);o.visible=m;o.htmlName=b;o.gxId=d;o.gxAttId=a;o.gxAttName=
g;o.gxWidthUnit=k;o.gxSetsContext=l;o.gxColumnClass=q;o.gxControl=new gx.html.controls.blob;o.gxControl.column=o;o.gxControl.dataType=o.type;o.gxControl.visible=o.visible;o.gxControl.height=n;o.gxControl.width=h;this.grid.addColumn(o)};this.addRadioButton=function(a,d,b,c,g,e,f,n,h,j,k){this.addColumnDinCode(this.addRadioButton,arguments);var m=this.newColumn(c,e,"left","");m.visible=h;m.htmlName=b;m.gxId=d;m.gxAttId=a;m.gxAttName=g;m.gxSetsContext=j;m.gxColumnClass=k;m.gxControl=new gx.html.controls.radio;
m.gxControl.column=m;m.gxControl.dataType=m.type;m.gxControl.vertical=n;m.gxControl.visible=m.visible;m.gxControl.clickEvent=f;this.grid.addColumn(m)};this.addComboBox=function(a,d,b,c,g,e,f,n,h,j,k,m,l){this.addColumnDinCode(this.addComboBox,arguments);var o=this.newColumn(c,e,"left",k);o.visible=h;o.htmlName=b;o.gxId=d;o.gxAttId=a;o.gxAttName=g;o.gxSetsContext=j;o.gxWidthUnit=m;o.gxColumnClass=l;o.gxControl=new gx.html.controls.comboBox;o.gxControl.column=o;o.gxControl.dataType=o.type;o.gxControl.rtEnabled=
1==n;o.gxControl.visible=o.visible;o.gxControl.clickEvent=f;this.grid.addColumn(o)};this.addListBox=function(a,d,b,c,g,e,f,n,h,j,k,m,l,o){this.addColumnDinCode(this.addListBox,arguments);var q=this.newColumn(c,e,"left",k);q.visible=h;q.htmlName=b;q.gxId=d;q.gxAttId=a;q.gxAttName=g;q.gxSetsContext=j;q.gxWidthUnit=m;q.gxColumnClass=l;q.gxControl=new gx.html.controls.listBox;q.gxControl.column=q;q.gxControl.dataType=q.type;q.gxControl.rows=void 0!==o?o:4;q.gxControl.rtEnabled=1==n;q.gxControl.visible=
q.visible;q.gxControl.clickEvent=f;this.grid.addColumn(q)};this.addCheckBox=function(a,d,b,c,g,e,f,n,h,j,k,m,l,o,q){this.addColumnDinCode(this.addCheckBox,arguments);var p=this.newColumn(c,f,"left",l);p.visible=k;p.htmlName=b;p.gxId=d;p.gxAttId=a;p.gxAttName=e;p.gxChecked=n;p.gxUnChecked=h;p.gxSetsContext=m;p.gxWidthUnit=o;p.gxColumnClass=q;p.gxControl=new gx.html.controls.checkBox;p.gxControl.column=p;p.gxControl.checkedValue=n;p.gxControl.uncheckedValue=h;p.gxControl.dataType=p.type;p.gxControl.visible=
p.visible;p.gxControl.clickEvent=j;this.grid.addColumn(p)};this.addBitmap=function(a,d,b,c,g,e,f,n,h,j,k,m){this.addColumnDinCode(this.addBitmap,arguments);var l=this.newColumn(j,"","left",c);l.htmlName=d;l.gxId=b;l.gxAttId=a;l.gxWidthUnit=g;l.gxControl=new gx.html.controls.image;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=g;l.gxControl.height=e;l.gxControl.heightUnit=f;l.gxControl.clickEvent=n;l.gxCssClass=k;l.gxColumnClass=m;this.grid.addColumn(l)};
this.addVideo=function(a,d,b,c,g,e,f,n,h,j,k,m){this.addColumnDinCode(this.addVideo,arguments);var l=this.newColumn(j,"","left",c);l.htmlName=d;l.gxId=b;l.gxAttId=a;l.gxWidthUnit=g;l.gxControl=new gx.html.controls.video;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=g;l.gxControl.height=e;l.gxControl.heightUnit=f;l.gxControl.clickEvent=n;l.gxCssClass=k;l.gxColumnClass=m;this.grid.addColumn(l)};this.addAudio=function(a,d,b,c,g,e,f,n,h,j,k,m){this.addColumnDinCode(this.addAudio,
arguments);var l=this.newColumn(j,"","left",c);l.htmlName=d;l.gxId=b;l.gxAttId=a;l.gxWidthUnit=g;l.gxControl=new gx.html.controls.audio;l.gxControl.column=l;l.gxControl.dataType=l.type;l.gxControl.width=c;l.gxControl.widthUnit=g;l.gxControl.height=e;l.gxControl.heightUnit=f;l.gxControl.clickEvent=n;l.gxCssClass=k;l.gxColumnClass=m;this.grid.addColumn(l)};this.addTextBlock=function(a,d){this.addColumnDinCode(this.addTextBlock,arguments);var b=this.newColumn("","","left");b.htmlName=a;b.gxControl=new gx.html.controls.textBlock;
b.gxControl.column=b;b.gxControl.dataType=b.type;b.gxControl.clickEvent=d;this.grid.addColumn(b)};this.addButton=function(a,d,b,c,g){this.addColumnDinCode(this.addButton,arguments);var e=this.newColumn("","","left");e.htmlName=d;e.gxId=a;e.gxControl=new gx.html.controls.button;e.gxControl.column=e;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.addGrid=function(a){this.addColumnDinCode(this.addGrid,arguments);this.childGrids.push(a);var d=this.newColumn("","","left");d.gxControl=new gx.html.controls.grid;
d.gxControl.column=d;this.grid.addColumn(d)};this.addUsercontrol=function(a,d,b,c,g,e,f,n){this.addColumnDinCode(this.addUsercontrol,arguments);var h="",j=this.parentObject;j.GridUCsProps&&j.GridUCsProps[g]&&(h=j.GridUCsProps[g].title||"");h=this.newColumn(h,"","left");h.gxUCId=a;h.gxUCLastId=d;h.gxUCClassName=b;h.gxUCContainerName=c;h.gxUCControlName=g;h.gxShowFunc=e;h.gxC2VFuncs=f;h.gxV2CFuncs=n;h.gxControl=new gx.html.controls.userControl;h.gxControl.column=h;h.gxControl.dataType=h.type;this.grid.addColumn(h)};
this.startContainer=function(){this.addColumnDinCode(this.startContainer,arguments);var a=this.newColumn("","","left");a.gxControl=new gx.html.controls.userControlContainer;a.gxControl.column=a;a.gxControl.dataType=a.type;this.grid.addColumn(a)};this.endContainer=function(){this.addColumnDinCode(this.endContainer,arguments);this.currentBuffer.append("</div>")};this.addWebComponent=function(a){this.addColumnDinCode(this.addWebComponent,arguments);var d=this.newColumn("","","left");d.gxControl=new gx.html.controls.webComponent;
d.gxControl.column=d;d.gxControl.dataType=d.type;this.grid.addColumn(d)};this.addEmbeddedPage=function(a){this.addColumnDinCode(this.addEmbeddedPage,arguments);var d=this.newColumn("","","left");d.gxControl=new gx.html.controls.embeddedPage;d.gxControl.column=d;d.gxControl.dataType=d.type;this.grid.addColumn(d)};this.addHtmlCode=function(a){this.addColumnDinCode(this.addHtmlCode,arguments);this.currentBuffer.append(a)};this.startTable=function(a,d,b){this.addColumnDinCode(this.startTable,arguments);
var c=this.newColumn("","","left");c.htmlName=a+"_"+d;c.gxControl=new gx.html.controls.table;c.gxControl.column=c;c.gxControl.width=b;c.gxControl.dataType=c.type;this.grid.addColumn(c)};this.endTable=function(){this.addColumnDinCode(this.endTable,arguments);this.currentBuffer.append("</table>")};this.startRow=function(a,d,b,c,g,e){this.addColumnDinCode(this.startRow,arguments);var f=this.newColumn("","","left");f.gxControl=new gx.html.controls.row;f.gxControl.column=f;f.gxControl.title=a;f.gxControl.align=
d;f.gxControl.verticalAlign=b;f.gxControl.backColor=c;f.gxControl.borderColor=g;f.gxControl.cssClass=e;f.gxControl.ownCssClass=e;f.gxControl.dataType=f.type;this.grid.addColumn(f)};this.endRow=function(){this.addColumnDinCode(this.endRow,arguments);this.currentBuffer.append("</tr>")};this.startCell=function(a,d,b,c,g,e,f,n,h,j){this.addColumnDinCode(this.startCell,arguments);var k=this.newColumn("","","left");k.gxControl=new gx.html.controls.cell;k.gxControl.column=k;k.gxControl.title=a;k.gxControl.align=
d;k.gxControl.verticalAlign=b;k.gxControl.backColor=c;k.gxControl.borderColor=g;k.gxControl.height=e;k.gxControl.width=f;k.gxControl.colSpan=n;k.gxControl.rowSpan=h;k.gxControl.cssClass=j;k.gxControl.dataType=k.type;this.grid.addColumn(k)};this.endCell=function(){this.addColumnDinCode(this.endCell,arguments);this.isResponsive?this.currentBuffer.append("</div>"):this.currentBuffer.append("</td>")};this.startGroup=function(a,d,b,c,g){this.addColumnDinCode(this.startGroup,arguments);var e=this.newColumn("",
"","left");e.htmlName=a;e.gxControl=new gx.html.controls.group;e.gxControl.column=e;e.gxControl.id=a;e.gxControl.caption=d;e.gxControl.height=b;e.gxControl.width=c;e.gxControl.cssClass=g;e.gxControl.dataType=e.type;this.grid.addColumn(e)};this.endGroup=function(){this.addColumnDinCode(this.endGroup,arguments);this.currentBuffer.append("</fieldset>")};this.startDiv=function(a,d,b,c){this.addColumnDinCode(this.startDiv,arguments);var g=this.newColumn("","","left");g.htmlName=a+"_"+d;g.gxControl=new gx.html.controls.div;
g.gxControl.column=g;g.gxControl.width=c;g.gxControl.height=b;g.gxControl.dataType=g.type;this.grid.addColumn(g)};this.endDiv=function(){this.addColumnDinCode(this.endDiv,arguments);this.currentBuffer.append("</div>")};this.newColumn=function(a,d,b,c){d=this.getColumnType(d);a=new gx.grid.column(a,d,c,b);this.currentBuffer=a.buffer;a.htmlName="";a.gxId="";a.gxAttId="";a.gxAttName="";return a};this.getColumnType=function(a){switch(a){case "decimal":case "int":a=gx.types.numeric;break;case "date":a=
gx.types.date;break;case "dtime":a=gx.types.dateTime;break;case "boolean":a=gx.types.bool;break;case "Geolocation":a=gx.types.geolocation;break;default:a=gx.types.character}return a};this.addOldComponent=function(a,d){"undefined"==typeof this.oldCmps[a]&&(this.oldCmps[a]=[]);this.oldCmps[a].push(d)};this.updateOldComponents=function(){for(var a=this.grid.rows.length,d=0;d<a;d++)delete this.oldCmps[this.grid.rows[d].gxId];for(var b in this.oldCmps){for(a=this.oldCmps[b];0<a.length;)d=a.shift(),gx.fn.deleteHidden(d);
delete this.oldCmps[b]}};this.addHidden=function(a){this.hiddens.push(a)};this.addHiddenControl=function(a,d,b){gx.fn.setHidden(a,d);!0!=b&&this.addHidden(a)};this.clearHiddens=function(){for(;0<this.hiddens.length;){var a=this.hiddens.shift();gx.fn.deleteHidden(a)}};var z={};this.setHtmlTags=function(a){gx.lang.apply(z,a);var d;d=' style="'+("0"==z.Visible?"display:none;":"");var a=""+(' class="'+z.Class+'"'),b=gx.lang.emptyObject;d+=!b(z.Background)?"background:"+z.Background+";":"";d+=!b(z.Backcolor)&&
"0"!=z.Backcolor?"background-color:"+gx.color.html(z.Backcolor).Html+";":"";d+=!b(z.Bordercolor)&&"0"!=z.Bordercolor?"border-color:"+gx.color.html(z.Bordercolor).Html+";":"";a+=!b(z.Align)?' align="'+z.Align+'"':"";a+=!b(z.Tooltiptext)?' title="'+z.Tooltiptext+'"':"";d+=!b(z.Borderwidth)&&"0"!=z.Borderwidth?" border-width:"+z.Borderwidth+";":"";a+=!b(z.Cellpadding)?' cellpadding="'+z.Cellpadding+'"':"";a+=!b(z.Cellspacing)?' cellspacing="'+z.Cellspacing+'"':"";a+=!b(z.Height)&&"0"!=z.Height?' height="'+
z.Height+'"':"";a+=!b(z.Width)&&"0"!=z.Width?' width="'+z.Width+'"':"";this.htmlTags=gx.text.trim(a+(d+'"'));this.grid.gxHtmlTags=this.htmlTags;b(z.Width)||(this.grid.gxWidth=z.Width);b(z.Height)||(this.grid.gxHeight=z.Height)};var C={};this.setGridStyles=function(a){gx.lang.apply(C,a);this.visible=void 0!=C.Visible?gx.lang.gxBoolean(C.Visible):!0;this.setSortable(void 0!=C.Sortable?gx.lang.gxBoolean(C.Sortable):!0);this.background=void 0!=C.Background?C.Background:"";this.cssClass=void 0!=C.Class?
C.Class:"";this.titleBackstyle=void 0!=C.Backcolorstyle?C.Backcolorstyle:gx.grid.styles.none;this.titleFont=void 0!=C.Titlefont?C.Titlefont:"";this.linesFont=void 0!=C.Linesfont?C.Linesfont:"";this.borderWidth=void 0!=C.Borderwidth?C.Borderwidth:"";this.toolTipText=void 0!=C.Tooltiptext?C.Tooltiptext:"";try{this.backcolor=void 0!=C.Backcolor?gx.color.html(C.Backcolor).Html:"",this.titleBackcolor=void 0!=C.Titlebackcolor?gx.color.html(C.Titlebackcolor).Html:"",this.titleForecolor=void 0!=C.Titleforecolor?
gx.color.html(C.Titleforecolor).Html:"",this.linesBackcolorOdd=void 0!=C.Backcolorodd?gx.color.html(C.Backcolorodd).Html:"",this.linesBackcolorEven=void 0!=C.Backcoloreven?gx.color.html(C.Backcoloreven).Html:"",this.bordercolor=void 0!=C.Bordercolor?gx.color.html(C.Bordercolor).Html:""}catch(d){gx.dbg.logEx(d,"gxgrid.js","setGridStyles")}this.borderWidth=void 0!=C.Borderwidth?C.Borderwidth:"";this.toolTipText=void 0!=C.Tooltiptext?C.Tooltiptext:"";this.grid.gxCssClass="";this.grid.gxTitleClass="";
this.grid.gxFooterClass="";this.grid.gxOddLlinesClass="";this.grid.gxEvenLinesClass="";this.grid.gxBackColor=this.backcolor;this.grid.gxTitleBackColor=this.titleBackcolor;this.grid.gxTitleForeColor=this.titleForecolor;this.grid.gxTitleBackstyle=this.titleBackstyle;this.grid.gxTitleFont=this.titleFont;this.grid.gxLinesFont=this.linesFont;this.grid.gxBackground=this.background;this.grid.gxLinesBackcolorOdd=this.linesBackcolorOdd;this.grid.gxLinesBackcolorEven=this.linesBackcolorEven;this.grid.gxBorderWidth=
this.borderWidth;this.grid.gxBordercolor=this.bordercolor;this.grid.gxToolTipText=this.toolTipText;this.grid.gxVisible=this.visible;""!=this.cssClass&&(this.grid.gxCssClass=this.cssClass,this.grid.gxTitleClass=this.cssClass+"Title",this.grid.gxFooterClass=this.cssClass+"Footer",this.titleBackstyle==gx.grid.styles.none?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.uniform?(this.grid.gxOddLlinesClass=this.cssClass+
"Uniform",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.header?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):this.titleBackstyle==gx.grid.styles.report&&(this.isFreestyle&&0>=this.gridCols?(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.grid.gxOddLlinesClass):(this.grid.gxOddLlinesClass=this.cssClass+"Odd",this.grid.gxEvenLinesClass=this.cssClass+"Even")))};this.setSortable=
function(a){if(this.sortable!=a){this.sortable=a;for(var d=this.grid.columns.length,b=0;b<d;b++)this.grid.columns[b].sortable=a}};this.lastRowId=0;this.addRow=function(a){var d,b,c,g=this.lastRowId++,e=gx.grid.rowId(g+1),e=new gx.grid.row(g,a,e,this.grid.gxParentRowId);e.gxCmpContext=this.gxComponentContext;e.Grids=a.Grids;e.ownerGrid=this;e.gxLvl=this.gridLvl;this.setRowHiddens(a.Hiddens);for(var f=this.grid.columns,n=f.length,h=0;h<n;h++){var j=f[h];if(0!==g){c=this.grid.rows[0].gxProps[h];d=a.Props[h].length;
for(b=this.grid.rowsValues?c.length-1:c.length;d<b;d++)e.gxProps[h].push(c[d])}c=a.Props[h];b=c[c.length-1];this.grid.rowsValues&&!this.autoRefreshing&&(void 0!==this.grid.rowsValues[g]?b=this.grid.rowsValues[g][h]:this.grid.rowsValues[g]=c);e.values[h]=b;this.grid.rowsValues&&e.gxProps[h].push(b);this.parentObject.isTransaction()&&(j=this.columnIndexInKey(j.gxAttId),-1!=j&&(e.gxKeyValues[j]=b))}this.isFreestyle&&(e.IsNew=!0,this.installChildGrids(e));this.grid.addRow(e);return e};this.installChildGrids=
function(a){for(var d=this.childGrids.length,b=0;b<d;b++){var c=this.childGrids[b],g=c.gxCreateGridCode(a.gxId);g.grid.parentGxObject=this.parentObject;var e=(!g.isMasterPageGrid?this.grid.gxCmpContext:"MP")+g.realGridName+"Container";g.gxContainerDivName=e+"Div_"+a.gxId;g.gxContainerDataName=e+"Data_"+a.gxId;g.gxContainerValuesName=e+"DataV_"+a.gxId;a.gxGrids.push(g);g.parentGrid=this;g.parentRow=a;this.parentObject.setGrid(g);c.copyPropertiesTo(g);g.grid.gxCmpContext=this.grid.gxCmpContext;g.grid.gxParentRowId=
a.gxId;this.installChildGridColumns(g,c)}};this.installChildGridColumns=function(a,d){for(var b=d.gxAddColumnsCode.length,c=0;c<b;c++)d.gxAddColumnsCode[c].call(a)};this.copyPropertiesTo=function(a){a.cssClass=this.cssClass;a.titleBackstyle=this.titleBackstyle;a.titleBackcolor=this.titleBackcolor;a.linesBackcolorOdd=this.linesBackcolorOdd;a.linesBackcolorEven=this.linesBackcolorEven;a.grid.gxCssClass=this.grid.gxCssClass;a.grid.gxTitleClass=this.grid.gxTitleClass;a.grid.gxOddLlinesClass=this.grid.gxOddLlinesClass;
a.grid.gxEvenLinesClass=this.grid.gxEvenLinesClass;a.grid.gxAllowCollapsing=this.grid.gxAllowCollapsing;a.grid.gxCollapsed=this.grid.gxCollapsed};this.setRowHiddens=function(a){if(a&&this.parentObject.isTransaction())for(var d in a)gx.fn.setHidden(d,a[d])};this.executeEvent=function(a,d){gx.evt.setGridEvt(this.gridId.toString(),d);this.instanciateRow(d);this.parentObject[a].call(this.parentObject,d)};this.getHiddenName=function(a){var d="";this.parentRow&&(d="_"+this.parentRow.gxId);return this.grid.gxCmpContext+
this.realGridName.toUpperCase()+(this.isMasterPageGrid?"_MPAGE":"")+"_"+a+d};this.updatePagingVars=function(a,d){void 0==a&&void 0==d?(this.grid.eof=gx.fn.getHidden(this.getHiddenName("nEOF")),this.grid.firstRecordOnPage=gx.fn.getHidden(this.getHiddenName("nFirstRecordOnPage"))):(this.grid.eof=a,this.grid.firstRecordOnPage=d)};this.setPagingVars=function(a,d){this.grid.eof=a;this.grid.firstRecordOnPage=d;gx.fn.setHidden(this.getHiddenName("nEOF"),a);gx.fn.setHidden(this.getHiddenName("nFirstRecordOnPage"),
d)};this.clearDefaultEventHandlers=function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)for(var a=this.grid.rows.length,d=0;d<a;d++){var b=this.containerName+"Row_"+this.grid.rows[d].gxId;this.defaultDragable&&gx.fx.dnd.deleteSource(b);this.defaultSetsContext&&gx.fx.ctx.deleteSetter(b)}a=this.grid.columns.length;for(d=0;d<a;d++)if(b=this.grid.columns[d],!0==b.gxSetsContext)for(var c=this.grid.rows.length,g=0;g<c;g++)gx.fx.ctx.deleteSetter(b.htmlName+"_"+this.grid.rows[g].gxId)};this.setDefaultEventHandlers=
function(){var a=0;if(this.defaultDragable||this.defaultSetsContext)if(gx.lang.emptyObject(this.boundedCollType))for(var d=this.getRowAsTypes(),a=this.grid.rows.length,b=0;b<a;b++){var c=this.gxComponentContext+this.containerName+"Row_"+this.grid.rows[b].gxId,g=gx.dom.el(c);null!=g&&(g.gxGrid=this.containerName,g.gxGridName=this.gridName,g.gxId=this.grid.rows[b].gxId);c=this.containerName+"Row_"+this.grid.rows[b].gxId;g=function(a){return this.returnRowData(a)}.closure(this);this.defaultDragable&&
gx.fx.dnd.addSource(this.parentObject,c,this.cssClass,d,g);this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,c,this.cssClass,d,g)}else a=this.grid.gxCmpContext+this.containerName+"Div",g=function(){return this.returnGridData()}.closure(this),this.defaultDragable&&gx.fx.dnd.addSource(this.parentObject,a,this.cssClass,[this.boundedCollType],g),this.defaultSetsContext&&gx.fx.ctx.addSetter(this.parentObject,a,this.cssClass,[this.boundedCollType],g);a=this.grid.columns.length;for(b=0;b<a;b++)if(d=
this.grid.columns[b],!0==d.gxSetsContext){g=this.grid.rows.length;for(c=0;c<g;c++){var e=gx.dom.el(this.gxComponentContext+d.htmlName+"_"+this.grid.rows[c].gxId);null!=e&&(e.gxHtmlName=d.htmlName,gx.fx.ctx.addSetter(this.parentObject,d.htmlName+"_"+this.grid.rows[c].gxId,"",[d.gxAttName],this.returnColumnContext))}}};this.returnColumnContext=function(a){var d="",d="SPAN"==a.nodeName?gx.dom.spanValue(a):gx.fn.getControlValue_impl(a.id);return null!=d?d:""};this.returnRowData=function(a){var d={};if(a=
this.grid.getRowByGxId(a.gxId))for(var b=this.grid.columns.length,c=0;c<b;c++){var g=this.grid.columns[c].gxAttName;""!=g&&(d[g]=a.values[c])}return d};this.returnGridData=function(){for(var a=[],d=this.grid.rows.length,b=0;b<d;b++){var c={};a[b]=c;for(var g=this.grid.rows[b],e=this.grid.columns.length,f=0;f<e;f++){var n=this.grid.columns[f].gxAttName;""!=n&&(c[n]=g.values[f])}}return a};this.doDrop=function(a){this.getNewRows(void 0!=a.length?ropObj.length:1,null,function(d){this.addDropedRows(d,
a)})};this.addDropedRows=function(a,d){var b=d.length;if(void 0!=b)for(var c=0;c<b;c++)this.setDroppedRow(a[c],d[c]);else this.setDroppedRow(a[0],d);this.setNewRows(a)};this.setDroppedRow=function(a,d){for(var b=this.grid.columns.length,c=0;c<b;c++){var g=a.Props[c],e=this.grid.columns[c].gxAttName,f="";""!=e&&void 0!=d[e]&&(f=d[e]);g.Value=f;g.FormattedValue=f}};this.getRowAsTypes=function(){for(var a=[],d=this.grid.columns.length,b=0;b<d;b++){var c=this.grid.columns[b].gxAttName;""!=c&&a.push(c)}return a};
this.addRows=function(a){var d=a.Count;this.grid.rowsValues=a.values;for(var b=0;b<d;b++)this.addRow(a[b])};this.lastRowIsModified=function(){if(0==this.grid.rows.length)return!1;var a=this.grid.rows[this.grid.rows.length-1];return a.gxExists()||a.gxIsMod()?!0:!1};this.getNewRows=function(a,d,b){var b=void 0!=b?b:this.setNewRows,c=gx.util.browser.isFirefox()?"keypress":"keydown";null==d||(d.type==c&&(32==d.charCode||32==d.keyCode||13==d.keyCode)||"click"==d.type)&&(0==this.grid.rows.length||this.lastRowIsModified())?
(gx.csv.pkDirty=!1,gx.ajax.newRows(this.gxComponentContext,this.isMasterPageGrid,this.realGridName,a+this.lastRowId,this.lastRowId+1,gx.grid.rowId(this.lastRowId+1)+this.grid.gxParentRowId,this.grid.gxParentRowId,b),gx.csv.pkDirty=!1,null!=d&&gx.evt.cancel(d,!0)):null!=d&&(32==d.keyCode||13==d.keyCode)&&gx.evt.cancel(d,!0)};this.setNewRows=function(a){return this.setNewRows_impl(a,function(){this.refreshGrid(!1)})};this.loadNewRows=function(a){return this.setNewRows_impl(a,function(a){this.loadGrid(a,
!0,!0)})};this.setNewRows_impl=function(a,d){var b;if(void 0!=a.Count){var c=0;this.grid.rowsValues||(this.grid.rowsValues=[]);this.grid.rowsValues=this.grid.rowsValues.concat(a.values);for(c=0;c<a.Count;c++)b=this.addRow(a[c]),gx.fn.setCurrentGridRow(this.gridId,b.gxId);0<a.Count&&(this.addingRows=!0,d.call(this,a),this.addingRows=!1,this.setFocusFirstControl(a[0]))}return b};this.gxNewRowFocused=function(a){a.style.textDecoration="underline";var d=gx.fn.firstGridControl(this.gridId);gx.evt.onfocus(a,
d,this.gxComponentContext,this.isMasterPageGrid,"9999",this.gridId)};this.rowKeyPressed=function(a){var d=gx.evt.source(a);void 0!=d&&(a.ctrlKey&&46==a.keyCode)&&(this.setRowDeleted(d),gx.evt.cancel(a,!0))};this.gxHasDuplicateKey=function(){for(var a=[],d=this.grid.rows,b=d.length,c=0;c<b;c++){var g=d[c];if((g.gxExists()||g.gxIsMod())&&!g.gxDeleted()){for(var e="",f=g.gxKeyValues.length,n=0;n<f;n++)e+=g.gxKeyValues[n].toString();if(void 0!=a[e])return!0;a[e]=1}}return!1};this.columnIndexInKey=function(a){for(var d=
this.lvlKey.length,b=0;b<d;b++)if(this.lvlKey[b]==a)return b;return-1};this.refreshVars=[];this.addRefreshingVar=function(a){if(!gx.lang.emptyObject(a)){var d="";this.refreshVars[this.refreshVars.length]=a;if(a.fld){var b=gx.dom.el(this.gxComponentContext+a.fld);if(void 0!=b&&gx.lang.emptyObject(a.hc)&&("radio"==b.type||"checkbox"==b.type&&gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()?d="click":"SELECT"==b.tagName||"checkbox"==b.type?d="change":gx.lang.isNumericType(a.type)?gx.lang.isNumericType(a.type)&&
(d="blur"):d=["keyup","input"],""!=d))if("radio"==b.type)for(var a=gx.dom.byName(this.gxComponentContext+a.fld),b=a.length,c=0;c<b;c++)gx.evt.attach(a[c],d,function(){this.filterVarChanged()},this);else"search"==b.type&&(d=[d,"search"]),gx.evt.attach(b,d,function(){this.filterVarChanged()},this)}}};this.doRefresh=function(){this.callAsyncRefresh(this.getRefreshParmsUrl())};this.filterVarChanged=function(){if(this.parentObject.autoRefresh&&!gx.grid.drawAtServer){var a=this.getRefreshParmsUrl();this.lastRefreshParms!=
a&&(this.lastRefreshParms=a,this.callAsyncRefresh(a))}else this.parentObject.conditionsChanged=this.conditionsChanged()};this.conditionsChanged=function(){for(var a=this.refreshVars.length,d=0;d<a;d++){var b=this.refreshVars[d];if("undefined"==typeof b.rfrVar){var c=gx.fn.getHidden(this.gxComponentContext+"GXH_"+b.fld),b=b.val();if(c!=b)return!0}}return!1};this.getRefreshParmsUrl=function(){var a="";this.pageSizeParm&&(a=this.grid.pageSize+",");for(var d=this.refreshVars.length,b=0;b<d;b++){var c=
this.refreshVars[b];if("undefined"!=typeof c.rfrVar){var g=void 0,e=void 0;if("undefined"!=typeof c.rfrProp){var f;"undefined"!=typeof c.gxAttId&&(f=this.grid.getColumnByGxAttId(c.gxAttId));f||(f=this.grid.getColumnForVar(c.rfrVar));f?(c=c.rfrProp.toLowerCase(),g=f[c],"value"==c&&f.gxControl.type==gx.html.controls.types.image&&(g=gx.util.removeBaseUrl(g))):g=""}else"undefined"!=typeof this.parentObject.VarControlMap[c.rfrVar]&&(e=this.parentObject.VarControlMap[c.rfrVar].id),gx.lang.emptyObject(this.parentObject[c.rfrVar])?
"undefined"==typeof g&&"undefined"!=typeof e&&(g=gx.fn.getHidden(this.gxComponentContext+e)):g=this.parentObject[c.rfrVar],"object"==typeof g&&(g=gx.json.serializeJson(g));a+=encodeURIComponent(g)+","}else a=gx.lang.emptyObject(c.hc)?a+(this.getFormattedParm(c)+","):a+(encodeURIComponent(this.parentObject[c.hc])+","),gx.fn.setHidden(this.gxComponentContext+"GXH_"+c.fld,c.val())}this.parentObject.IsComponent&&(a+=encodeURIComponent(this.parentObject.CmpContext)+",");return a};this.initRefreshParms=
function(){this.parentObject.autoRefresh&&(this.lastRefreshParms=this.getRefreshParmsUrl())};this.getFormattedParm=function(a){return"date"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDate(a,gx.dateFormat))):"dtime"==a.type?(a=gx.dom.el(this.gxComponentContext+a.fld),encodeURIComponent(gx.date.urlDateTime(a,gx.dateFormat))):encodeURIComponent(a.val())};this.callAsyncRefresh=function(a,d){gx.evt.refreshGridCallback||(gx.evt.refreshGridCallback=[]);null!=this.refreshTimer&&
(window.clearTimeout(this.refreshTimer),this.refreshTimer=null,gx.evt.setReady(!0));gx.evt.setReady(!1);this.refreshTimer=window.setTimeout(function(){if(this.autoRefreshing)this.callAsyncRefresh(a);else{gx.fx.obs.addObserver("grid.onafterrefresh",this,function(){gx.evt.notifyRefreshGrid()}.closure(),{single:true});gx.ajax.refreshGrid(this,a);gx.evt.setReady(true)}}.closure(this),d||400)};this.updatePropsHidden=function(a){var d=this.getDataHiddenName();gx.fn.setHidden(d,a)};this.updatePagingVarsAfterRefresh=
function(a){if(this.usePaging){var d=this.grid.gxGridName.toUpperCase()+"_nEOF",b=this.grid.gxGridName.toUpperCase()+"_nFirstRecordOnPage";this.setPagingVars(a[d],a[b])}};this.getSelection=function(){if(this.allowSelection)for(var a=this.grid.rows.length,d=0;d<a;d++)if(this.grid.rows[d].selected)return d;return-1};this.setSelection=function(a){if(this.allowSelection&&0<=a){var a=gx.grid.rowId(a+1),d=gx.dom.el(this.grid.gxCmpContext+this.grid.gxGridObject+"Row_"+a);d&&this.grid.setRowSelected(d,a)}};
this.blankGridRows=function(){this.lastRowId=0;this.grid.rows=[];delete this.grid.rowsValues};this.setRowDeleted=function(a){var d=null,d="string"==typeof a?this.grid.getRowByGxId(a):void 0==a.gxId?this.getRowFromHtmlCtrl(a):a;d.setDeleted(!d.gxDeleted());this.setRowModified(d.gxId);gx.fn.removeGridRow(d.gxId,this.gridId.toString());this.refreshGrid(!1)};this.setFocusFirstControl=function(a){for(var d=0;d<a.Count;d++){var b=this.grid.getRowByGxId(gx.grid.rowId(this.lastRowId)+this.grid.gxParentRowId);
if(b&&(b=gx.dom.el(this.grid.gxCmpContext+this.grid.columns[d].htmlName+"_"+b.gxId),void 0!=b&&gx.fn.isAccepted(b))){gx.grid.lastFocusCtrl=this.grid.columns[d].gxId;gx.fn.setFocus(b);break}}};this.instanciateRow=function(a){var d=gx.O;gx.setGxO(this.parentObject);try{var b=a;"string"==typeof b&&(b=this.grid.getRowByGxId(a));if(null!=b){gx.fn.setCurrentGridRow(this.gridId,b.gxId);for(var c=b.values.length,g=0;g<c;g++){var e=this.grid.columns[g];if(""!=e.gxId){var f=this.parentObject.getValidStruct(e.gxId);
f&&(this.isUsercontrol?f.v2v&&(f.v2v(this.grid.properties[b.id][e.index].value),gx.fn.setHidden(this.grid.properties[b.id][e.index].id,this.grid.properties[b.id][e.index].value)):"function"==typeof f.c2v&&f.c2v())}}}else{gx.fn.setCurrentGridRow(this.gridId,a);c=this.grid.columns.length;for(g=0;g<c;g++)e=this.grid.columns[g],""!=e.gxId&&(f=this.parentObject.getValidStruct(e.gxId))&&"function"==typeof f.c2v&&f.c2v()}}catch(n){gx.dbg.logEx(n,"gxgrid.js","instanciateRow")}gx.setGxO(d);return!0};this.setRenderProp=
function(a,d,b,c){this.grid.setProp(a,d,b,c)};this.setRenderDynProp=function(a,d,b,c){this.grid.setDynProp(a,d,b,c)};this.addRenderEventHandler=function(a,d){this.grid.addEventHandler(a,d)};this.cleanup=function(){this.parentGrid=this.parentObject=null;this.grid.ownerGrid=null;this.grid.parentGxObject=null;this.grid.container=null;this.grid.ascLabel=null;this.grid.descLabel=null;this.grid.columns=null;this.grid=this.grid.rows=null};this.loadGrid=function(a,d,b){gx.dbg.logPerf("loadGrid_"+this.gridName);
var c=gx.O;gx.setGxO(this.parentObject);this.isLoading=!0;var g=this.parentObject.isTransaction();g&&null==this.contextMenu&&(this.contextMenu=new gx.grid.contextMenu(this));void 0!=a?(g=this.getContainerControl(),null!=g&&(d&&(b||(a.values=this.getValuesFromHidden()),this.isFreestyle&&gx.lang.emptyObject(this.parentRow)&&this.backupComponents()),this.deleteGridData(),this.grid.setContainerDelayed(g),this.clearHiddens(),this.setRowsProperty(),d=this.getSelection(),b||this.blankGridRows(),this.setHtmlTags(a),
this.setGridStyles(a),this.setDeleteMethod(a.DeleteMethod),this.setSelectionAndHover(a.Allowselection,a.Selectioncolor,a.Allowhover,a.Hovercolor),this.setCollapsing(a.Allowcollapsing,a.Collapsed),this.setSflColumns(a.SflColumns),this.setColumnsProperties(a.Columns),this.autoRefreshing?this.updatePagingVarsAfterRefresh(a):this.updatePagingVars(),b||this.addRows(a),this.updateOldComponents(),this.initRefreshParms(),this.refreshGrid(null,this.autoRefreshing),this.setSelection(d))):(this.clearHiddens(),
this.setRowsProperty(),this.grid.pageSize=g||this.isFreestyle?9999:this.gridRows,g=this.getContainerControl(),null!=g?(this.grid.setContainerDelayed(g),a=this.getRowsFromHidden(),null!=a?(a.values=this.getValuesFromHidden(),this.blankGridRows(),this.setHtmlTags(a),this.setGridStyles(a),this.setDeleteMethod(a.DeleteMethod),this.setSelectionAndHover(a.Allowselection,a.Selectioncolor,a.Allowhover,a.Hovercolor),this.setCollapsing(a.Allowcollapsing,a.Collapsed),this.setSflColumns(a.SflColumns),this.setColumnsProperties(a.Columns),
this.updatePagingVars(),this.addRows(a),this.initRefreshParms(),this.addingRows=!0,this.refreshGrid(),this.addingRows=!1):(this.blankGridRows(),this.updatePagingVars(),this.initRefreshParms(),this.refreshGrid())):this.loadWrappedGridChilds());this.isLoading=!1;gx.setGxO(c);gx.dbg.logPerf("loadGrid_"+this.gridName,"Grid '"+this.gridName+"' loaded")};this.loadWrappedGridChilds=function(){try{var a=gx.fn.getHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId);if("undefined"!=typeof a){for(var a=parseInt(a),
d=0;d<a;d++)for(var b=this.grid.columns.length,c=0;c<b;c++){var g=this.grid.columns[c];g.gxControl.type==gx.html.controls.types.userControl&&this.addUsercontrolToDraw({r:gx.grid.rowId(d+1),c:g})}this.setupGridUsercontrols(this.GridUserControls)}}catch(e){gx.dbg.logEx(e,"gxgrid.js","loadWrappedGridChilds")}};this.getRowsFromHidden=function(){var a=this.getDataHiddenName(),d=gx.fn.getHidden(a);gx.json.setNonSerializable(a);return"string"==typeof d?gx.json.evalJSON(d):"object"==typeof d?d:null};this.deleteGridData=
function(){var a=this.getDataHiddenName();gx.json.setNonSerializable(a)};this.getValuesFromHidden=function(){var a=this.getValuesHiddenName(),d=gx.fn.getHidden(a);gx.lang.emptyObject(d)&&(d=gx.fn.getControlValue(a));gx.json.setNonSerializable(a);a=null;null!=d&&""!=d&&(a=gx.json.evalJSON(d));return a};this.getContainerControl=function(){var a=null;if(a=void 0!=this.gxContainerDivName?gx.dom.byId(this.gxContainerDivName):gx.dom.byId(this.grid.gxCmpContext+this.containerName+"Div"))this.gxContainerCtrl=
a,a.setAttribute("gxgridid",this.gridId.toString()),gx.dom.addClass(a,"gx-grid "+(this.isFreestyle?"gx-freestyle-grid":"gx-standard-grid")),a.gxGridName=this.grid.gxGridName;return a};this.getHiddenSuffix=function(){return""==this.grid.gxParentRowId?"":"_"+this.grid.gxParentRowId};this.getDataHiddenName=function(){return void 0!=this.gxContainerDataName?this.gxContainerDataName:this.grid.gxCmpContext+this.containerName+"Data"+this.getHiddenSuffix()};this.getValuesHiddenName=function(){return void 0!=
this.gxContainerValuesName?this.gxContainerValuesName:this.grid.gxCmpContext+this.containerName+"DataV"+this.getHiddenSuffix()};this.setColumnsProperties=function(a){try{for(var d=a.length,b=0;b<d;b++){var c=this.grid.columns[b],g;for(g in a[b]){var e=a[b][g];g=this.fixColumnPropName(g);this.isUsercontrol&&(c[g]=e);c[g.toLowerCase()]=e}this.checkPromptColumn(c)}}catch(f){gx.dbg.logEx(f,"gxgrid.js","setColumnsProperties")}};this.checkPromptColumn=function(a){try{if(this.isPromptColumn(a)){var d=gx.fn.getAttachedCtrl(a.htmlName);
if(d&&d.info&&d.info.controls){for(var b=!1,c=!1,g=d.info.controls.length,e=0;e<g;e++){var f=this.grid.getColumnByGxId(d.info.controls[e]),n=gx.lang.gxBoolean(f.enabled),h=gx.lang.gxBoolean(f.visible);n&&(c=!0);h&&(b=!0)}c||(a.enabled="0");b||(a.visible="0")}}}catch(j){gx.dbg.logEx(j,"gxgrid.js","checkPromptColumn")}};this.fixColumnPropName=function(a){return"Horizontalalignment"==a?"align":a};this.setDeleteMethod=function(a){if(this.parentObject.isTransaction()){var d="DSP"==this.parentObject.Gx_mode;
!d&&(a&&"none"==a)&&(d=!0);this.deleteMethod=d?gx.grid.deleteMethods.none:gx.grid.deleteMethod}};this.setSelectionAndHover=function(a,d,b,c){try{this.allowSelection=gx.lang.gxBoolean(a),this.hoverColor=this.selectionColor=null,this.allowSelection&&(this.allowHovering=gx.lang.gxBoolean(b),d=eval(d),this.selectionColor="undefined"!=typeof d[0]?gx.color.fromRGB(d[0],d[1],d[2]):gx.color.html(d),this.allowHovering&&(c=eval(c),this.hoverColor="undefined"!=typeof c[0]?gx.color.fromRGB(c[0],c[1],c[2]):gx.color.html(c))),
this.grid.gxAllowSelection=this.allowSelection,this.grid.gxSelectionColor=this.selectionColor,this.grid.gxAllowHovering=this.allowHovering,this.grid.gxHoverColor=this.hoverColor}catch(g){gx.dbg.logEx(g,"gxgrid.js","setSelectionAndHover")}};this.setCollapsing=function(a,d){try{this.allowCollapsing=gx.lang.gxBoolean(a),this.collapsed=gx.lang.gxBoolean(d),this.grid.gxAllowCollapsing=this.allowCollapsing,this.grid.gxCollapsed=this.collapsed}catch(b){gx.dbg.logEx(b,"gxgrid.js","setCollapsing")}};this.setSflColumns=
function(a){try{if(!gx.lang.emptyObject(a)||0===a)this.gridCols=gx.grid.validGridColsValue(parseInt(a)),this.grid.gxGridCols=this.gridCols,1<this.gridCols&&0<this.gridRows&&(this.grid.pageSize=(this.gridRows?this.gridRows:1)*this.gridCols)}catch(d){gx.dbg.logEx(d,"gxgrid.js","setSflColumns")}};this.isPromptColumn=function(a){return a.gxAttId.indexOf&&-1!=a.gxAttId.indexOf("prompt_")?!0:!1};this.setRowsProperty=function(){var a=gx.fn.getHidden(this.getHiddenName("Rows"));if(null!=a){try{this.gridRows=
parseInt(a,10)}catch(d){gx.dbg.logEx(d,"gxgrid.js","setRowsProperty")}this.grid.pageSize=this.gridRows*(1<this.gridCols?this.gridCols:1)}};this.crearInstalledSuggests=function(){for(var a=this.grid.columns.length,d=0;d<a;d++){var b=this.parentObject.getValidStruct(this.grid.columns[d].gxId);b&&(b.gxsgprm&&b.gxsgprm.installed)&&(b.gxsgprm.installed={})}};this.refreshCollection=function(a){try{this.blankGridRows();this.updatePagingVars();this.initRefreshParms();for(var d=a.length,b=0;b<d;b++){for(var c=
{Props:[]},g=a[b],e=this.grid.columns.length,f=0;f<e;f++){var n=this.grid.columns[f];c.Props[n.index]=[g[n.gxAttName]]}this.addRow(c)}this.refreshGrid(!1,!1,!0)}catch(h){gx.dbg.logEx(h,"gxgrid.js","refreshCollection")}};this.refreshGrid=function(a,d,b){this.DatePickersControls=[];this.GridUserControls=[];this.GridComponents=[];this.GridControls=[];this.clearDefaultEventHandlers();this.clearHiddens();this.crearInstalledSuggests();this.setRowsProperty();if(void 0!=this.parentRow&&!gx.lang.emptyObj(this.parentRow.Grids)){var c=
this.parentRow.Grids[this.realGridName];null!=c&&(this.setHtmlTags(c),this.setGridStyles(c),this.setColumnsProperties(c.Columns),this.addingRows||this.parentRow.IsNew&&this.addRows(c))}var g=!1,c=function(){this.setupGridControls(this.GridControls);this.setupFixedColumnProperties();this.setupGridComponents(this.GridComponents);this.setupGridUsercontrols(this.GridUserControls);gx.plugdesign.applyTemplateObject("#"+this.gxContainerCtrl.id);this.triggerDatePickersSetup(this.DatePickersControls);this.installImageControls();
this.isFreestyle&&this.loadRowsGrids(g);this.updateRcdCount();this.setDefaultEventHandlers()}.closure(this);this.grid.doSort();!1==a?this.grid.render(g,!1,b,c):(g=!0,this.grid.render(g,d,b,c))};var I="gx-wc-bkp_"+n+"_"+a;this.getComponentsBackupContainer=function(){var a=gx.dom.el(I);a||(a=document.createElement("div"),a.id=I,a.style.display="none",document.body.appendChild(a));return a};this.destroyComponentsBackup=function(){var a=gx.dom.el(I);a&&a.parentNode&&gx.dom.removeControlSafe(a)};this.backupComponents=
function(){try{for(var a=this.grid.rows.length,d=0;d<a;d++){for(var b=this.grid.rows[d],c=this.grid.columns.length,g=0;g<c;g++)if(this.grid.columns[g].gxControl.type==gx.html.controls.types.webComponent){var e=this.gxComponentContext+"gxHTMLWrp"+this.parentObject.getComponentPrefix(b.gxProps[g][0])+b.gxId,f=gx.dom.el(e);f&&(f.parentNode.removeChild(f),this.getComponentsBackupContainer().appendChild(f))}for(var n=b.gxGrids.length,g=0;g<n;g++){var h=b.gxGrids[g];h&&h.isFreestyle&&h.backupComponents()}}}catch(j){gx.dbg.logEx(j,
"gxgrid.js","backupComponents")}};this.getEntireGridColumn=function(a){var d=this.getContainerControl();if(!d)return[];var b=d.firstChild,d=[];if(b.querySelectorAll)d=gx.fn.toArray(b.querySelectorAll("td[colindex='"+a+"'], th[colindex='"+a+"']"));else{for(var c=gx.dom.byTag("TD",b),b=gx.dom.byTag("TH",b),g=0,e=c.length;g<e;g++)c[g].getAttribute("colindex")==a&&d.push(c[g]);g=0;for(e=b.length;g<e;g++)b[g].getAttribute("colindex")==a&&d.push(b[g])}return d};this.applyPropEntireColumn=function(a,d,b){for(var a=
this.getEntireGridColumn(a),c=0;c<a.length;c++)gx.fn.setCtrlPropertyImpl(a[c],d,b)};this.setupFixedColumnProperties=function(){for(var a=0;a<this.ColumnPropertiesAfterRender.length;a++){var d=this.ColumnPropertiesAfterRender[a];this.applyPropEntireColumn(d.colIndex,d.ptyName,d.ptyValue)}};this.addColPropertyAfterRender=function(a,d,b){this.ColumnPropertiesAfterRender.push({colIndex:a,ptyName:d,ptyValue:b})};this.setupGridControls=function(a){for(var d=0,b=a.length;d<b;d++){var c=a[d],g=gx.dom.el(c.hookId),
e=g.parentNode;e&&(e.insertBefore(c.el,g),gx.dom.removeControlSafe(g))}};this.setupGridComponents=function(a){for(var d=a.length,b=0;b<d;b++){var c=a[b];if(!1===c.create){var g=gx.dom.el(c.existingEl),e=g.parentNode,c=gx.dom.el(c.el);gx.dom.removeControlSafe(g);e.appendChild(c)}else gx.html.processCode(c.c,!1,function(a){var d=gx.createComponent(a.n,a.p);if(d!=null){gx.addComponent(d);d.readServerVars();if(a.load)d.onload()}},[c])}this.destroyComponentsBackup()};this.setupGridUsercontrols=function(a){for(var d=
a.length,b=0;b<d;b++){var c=a[b].r,g=a[b].c,c=gx.uc.getNew(this.parentObject,g.gxUCId,g.gxUCLastId,g.gxUCClassName,g.gxUCContainerName+"_"+c,g.gxUCControlName,this.gridLvl,this.gridId,c);c.DesignContainerName=g.gxUCContainerName;c.setC2ShowFunction(g.gxShowFunc);for(var e=g.gxC2VFuncs.length,f=0;f<e;f++)c.addC2VFunction(g.gxC2VFuncs[f]);e=g.gxV2CFuncs.length;for(f=0;f<e;f++)c.addV2CFunction(g.gxV2CFuncs[f]);c.setGridProperties();c.setGridEventHandlers();this.parentObject.setUserControl(c);c.execV2CFunctions(!0);
c.execShowFunction()}};this.triggerDatePickersSetup=function(a){for(var d=a.length,b=0;b<d;b++){for(var c=a[b].CtrlId,g=a[b].Grid,e=a[b].Row,f=gx.O,n=null,h=gx.fn.controlIds(),j=h.length,k=0;k<j&&!(n=gx.fn.validStruct(h[k]),n.grid==g&&f.CmpContext+n.fld+"_"+e==c);k++);null!=n&&void 0!=n.dp&&gx.fn.installDatePicker(c,n.dp.f,n.dp.st,n.dp.wn,n.dp.mf,gx.fn.datePickerFormat(n.dp.pic,n.dp.dec,n.len))}};this.installImageControls=function(){for(var a=gx.dom.byClass("gx-multimedia-upload","",this.gxContainerCtrl),
d=0,b=a.length;d<b;d++)gx.html.multimediaUpload.createControl(a[d])};this.addComponentToDraw=function(a){this.GridComponents.push(a)};this.addUsercontrolToDraw=function(a){this.GridUserControls.push(a)};this.addDatepickerToSetup=function(a){this.DatePickersControls.push(a)};this.addControlToReuse=function(a){a.el.parentNode&&gx.dom.removeControlSafe(a.el);this.GridControls.push(a)};this.loadRowsGrids=function(a){for(var d=this.grid.rows.length,b=0;b<d;b++)this.loadRowGrids(this.grid.rows[b],a)};this.loadRowGrids=
function(a,d){for(var b=a.gxGrids.length,c=0;c<b;c++){var g=a.gxGrids[c];g.grid.setContainerDelayed(gx.dom.el(g.gxContainerDivName));if(d){if(void 0!=g.parentRow&&!gx.lang.emptyObj(g.parentRow.Grids)){var e=g.getDataHiddenName();gx.fn.setHidden(e,gx.json.serializeJson(g.parentRow.Grids[g.realGridName]))}g.loadGrid()}else g.refreshGrid();a.IsNew=!1}};this.updateRcdCount=function(){(this.hasForEachLine||this.parentObject.isTransaction())&&gx.fn.setHidden(this.grid.gxCmpContext+"nRC_GXsfl_"+this.gridId,
this.lastRowId.toString());var a=gx.fn.getHidden(this.grid.gxCmpContext+this.gridName.toUpperCase()+"_ROW");parseInt(a,10)>this.lastRowId&&this.grid.instanciateSelectionVars("0000")};this.updateControlValue=function(a,d){try{var b=this,c=gx.fn.currentGridRow(a.grid).toString(),g=c,e=c.length;if(4<e){var f=c.substring(4,e),b=gx.fn.gridObj(this.gxComponentContext,this.gridName+"_"+f,this.isMasterPageGrid);if(!b)return;g=c.substring(0,4)}var n=parseInt(g,10)-1;!0==d&&b.setRowModified(c);var h=b.getColumnIndexByName(a.fld),
j=gx.dom.el(this.gxComponentContext+a.fld+"_"+c);b.updateRowValue(h,n,j);return b}catch(k){gx.dbg.logEx(k,"gxgrid.js","updateControlValue")}return null};this.persistControlValue=function(a,d,b){var c=a.lastIndexOf("_");if(-1!=c){var g=a.substring(0,c);if(c=this.grid.getRowByGxId(a.substring(c+1)))if(g=this.grid.getColumnByHtmlName(g)){var e=this.parentObject[b.gxvar];"decimal"==b.type&&gx.lang.instanceOf(e,Number)&&(e=e.toFixed(b.dec));c.values[g.index]=e;c.gxProps[g.index]||(c.gxProps[g.index]={});
if((a=gx.dom.el(a))&&"SELECT"==a.tagName)c.gxProps[g.index].Values=gx.dom.comboBoxToObj(a);c.gxProps[g.index].Value=e;c.gxProps[g.index].FormattedValue=d}}};this.getColumnIndexByName=function(a){for(var d=this.grid.columns,b=d.length,c=0;c<b;c++)if(d[c].htmlName==a)return c;return-1};this.setRowModified=function(a){gx.fn.setHidden(this.grid.gxCmpContext+"nIsMod_"+this.gridLvl.toString()+"_"+a,1);null!=this.parentGrid&&this.parentGrid.setRowModified(this.grid.gxParentRowId);this.grid.showDeleteImage(a)};
this.validateRow=function(a){if(a)try{gx.fn.setCurrentGridRow(a.gxgridid,a.gxrow);var d=gx.fn.lastGridControl(a.gxgridid);gx.csv.validControls(gx.csv.lastId,d+1,!0,gx.O)}catch(b){gx.dbg.logEx(b,"gxgrid.js","validateRow")}};this.updateRowValue=function(a,d,b){var d=this.grid.getRowById(d),c=this.grid.columns[a];"checkbox"==b.type&&(b.value=b.checked?c.gxChecked:c.gxUnChecked);var g=gx.fn.getControlValue(this.grid.columns[a].htmlName+"_"+d.gxId),b=this.parentObject.getValidStruct(this.grid.columns[a].gxId).val();
d.values[a]=b;gx.lang.emptyObject(d.gxProps[a])||(d.gxProps[a].Value=b,d.gxProps[a].FormattedValue=g);this.parentObject.isTransaction()&&(a=this.columnIndexInKey(c.gxAttId),-1!=a&&(d.gxKeyValues[a]=b));c.gxControl.type==gx.html.controls.types.blob&&gx.fn.setControlValue(this.grid.gxCmpContext+c.htmlName+"_"+d.gxId+"_gxBlob",b)};this.expandCollapse=function(a,d){gx.evt.cancel(d,!0);var b=gx.dom.el(this.gxComponentContext+this.containerName+"Tbl");null!=b&&(this.collapsed?(b.style.display="block",a.src=
gx.ajax.getImageUrl(gx,"collapseImage")):(b.style.display="none",a.src=gx.ajax.getImageUrl(gx,"expandImage")),this.collapsed=!this.collapsed,this.grid.gxCollapsed=this.collapsed,this.parentGrid?(b=this.gridName.substring(this.gridName.lastIndexOf("_")),b=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed"+b):b=this.gxComponentContext+this.realGridName.toUpperCase()+"_Collapsed",gx.fn.setHidden(b,this.collapsed?"1":"0"))};this.getRowFromHtmlCtrl=function(a){var d=a.gxrow;gx.lang.emptyObject(d)&&
(d=a.id.lastIndexOf("_"),d=a.id.substring(d+1));return this.grid.getRowByGxId(d)};this.showContextMenu=function(a,d){this.contextMenu.show(a,d)}},contextMenu:function(c){this.gxgrid=c;this.controlName=this.gxgrid.containerName+"ContextMenu";this.eventSource=this.contextEvent=this.rowClicked=null;var f=new gx.text.stringBuffer;this.show=function(c,b){this.gxgrid.validateRow(c);this.contextEvent=b;this.eventSource=gx.evt.source(this.contextEvent);gx.evt.cancel(b,!0);this.rowClicked=c;this.startMenu();
f.append('<div class="').append("menuItem").append('" id="').append("deleteRow").append('" align="center">').append(gx.getMessage("GXM_deleterow")).append("</div>");this.endMenu()};this.startMenu=function(){f.clear();var c=this.getMenuCoords();f.append('<div onclick="').append(this.gxgrid.grid.gridObject()+".contextMenu.contextMenuClicked(event);").append('" onmouseover="');f.append(this.gxgrid.grid.gridObject()+".contextMenu.switchContextMenu();").append('" onmouseout="').append(this.gxgrid.grid.gridObject()+
".contextMenu.switchContextMenu();").append('" oncontextmenu="gx.evt.cancel(event, true);');f.append('" style="').append("position:absolute;width:100;background-Color:menu; border: outset 1px gray;");f.append("top:"+c.top+"; left:"+c.left+";").append('">')};this.endMenu=function(){f.append("</div>");var c=gx.dom.byId(this.controlName);null==c&&(c=document.createElement("SPAN"),ContextControlShadow=document.createElement("SPAN"),ContextControlShadow2=document.createElement("SPAN"),IFrameControl=document.createElement("IFRAME"),
c.id=this.controlName,ContextControlShadow.id=this.controlName+"Shadow",ContextControlShadow2.id=this.controlName+"Shadow2",IFrameControl.id=this.controlName+"GXiFrameIEHack",IFrameControl.src="about:blank",IFrameControl.style.zIndex=1,IFrameControl.style.visibility="hidden",IFrameControl.style.position="absolute",IFrameControl.frameBorder="0",document.body.appendChild(c),document.body.appendChild(ContextControlShadow),document.body.appendChild(ContextControlShadow2),document.body.appendChild(IFrameControl));
gx.dom.shouldPurge()&&gx.dom.purge(c,!0);c.innerHTML=f.toString()};this.hide=function(){this.contextEvent=this.rowClicked=null;gx.dom.removeControl(gx.dom.byId(this.controlName))};this.getMenuCoords=function(){var c=0,b=0,a=this.contextEvent;if(a.pageX||a.pageY)c=a.pageX,b=a.pageY;else if(a.clientX||a.clientY)c=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,b=a.clientY+document.body.scrollTop+document.documentElement.scrollTop;return{left:c,top:b}};this.contextMenuClicked=
function(c){this.handleContextMenuAction(gx.evt.source(c).id);this.hide()};this.handleContextMenuAction=function(c){switch(c){case "deleteRow":this.gxgrid.setRowDeleted(this.rowClicked);break;case "undeleteRow":this.gxgrid.setRowDeleted(this.rowClicked)}};this.switchContextMenu=function(){}},rowId:function(c){for(c=c.toString();4>c.length;)c="0"+c;return c},_init:function(){this.deleteMethod||(this.deleteMethod=this.deleteMethods.images);this.baseDeleteImage||(this.baseDeleteImage=this.deleteImage);
this.deleteImage=this.deleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseDeleteImage"):gx.util.resourceUrl(gx.basePath+gx.staticDirectory+"delete_16x.jpg",!0);this.baseUndeleteImage||(this.baseUndeleteImage=this.undeleteImage);this.undeleteImage=this.undeleteImage&&this.deleteMethod==this.deleteMethods.images?gx.ajax.getImageUrl(this,"baseUndeleteImage"):this.deleteImage;this.deletePosition||(this.deletePosition=this.deletePositions.left);this.deletePositionFree||
(this.deletePositionFree=this.deletePositions.topL);this.deleteTooltip=this.deleteTooltip?gx.getMessage(this.deleteTooltip):"";this.deleteTitle=this.deleteTitle?gx.getMessage(this.deleteTitle):""},_deinit:function(){this.lastFocusCtrl=null}};
gx.grid.impl=function(c){return function(f){var e=/style="([^"]*)"/ig;this.basePath=gx.basePath;this.imgsDir=gx.staticDirectory;this.columns=[];this.columnsHtmlName=[];this.columnsGxId=[];this.columnsGxAttId=[];this.rows=[];this.rowsById=[];this.rowsByGxId=[];this.fixedValues=[];this.align=this.width="";this.border="0";this.padding="1";this.spacing="0";this.sortColumn=-1;this.usePaging=this.ascSort=!0;this.eof=1;this.firstRecordOnPage=0;this.pageSize=9999;this.currentPage=1;this.gxLvl=0;this.gxGridName=
"";this.gxGridObject=null;this.gxBuffer=new gx.text.stringBuffer;this.evenRowCellClass=this.evenRowClass=this.oddRowCellClass=this.oddRowClass=this.columnHeaderTextClass=this.columnHeaderClass=this.highlightedNavigationLinkClass=this.navigationLinkClass=this.navigationClass=this.editControlClass=this.footerClass=this.headerClass=this.tableClass=this.gxParentRowId="";this.rowsValues=[];this.pagingButtonFirstClass="PagingButtonsFirst";this.pagingButtonPreviousClass="PagingButtonsPrevious";this.pagingButtonNextClass=
"PagingButtonsNext";this.pagingButtonLastClass="PagingButtonsLast";this.pagingButtonDisabled="gx-grid-paging-disabled";this.pagingBarClass="gx-grid-paging-bar";this.selectedRowClass="gx-row-selected";this.rendered=!1;"undefined"!=typeof Image?(this.ascLabel=new Image,this.descLabel=new Image):this.descLabel=this.ascLabel=null;this.id=f;this.container=null;this.setContainerDelayed=function(a){this.container=a};this.addColumn=function(a){if(a.isGxRemove())a.visible=false;var d=this.columns.length;a.index=
d;a.table=this;this.columns[d]=a;typeof a.htmlName!="undefined"&&(this.columnsHtmlName[a.htmlName]=a);typeof a.gxId!="undefined"&&(this.columnsGxId[a.gxId]=a);typeof a.gxAttId!="undefined"&&(this.columnsGxAttId[a.gxAttId]=a);return a};this.getColumnByIndex=function(a){return this.columns[a]};this.getColumnByCtrlType=function(a){return c.map(this.columns,function(d){return d.gxControl.type==a?d:null})};this.addRow=function(a,d){a.table=this;if(a!=null){this.rows[this.rows.length]=a;typeof a.id!="undefined"&&
(this.rowsById[a.id]=a);typeof a.gxId!="undefined"&&(this.rowsByGxId[a.gxId]=a);gx.lang.booleanValue(d)&&this.render();return a}};this.getColumnByHtmlName=function(a){var d,b;d=this.columnsHtmlName[a];if(typeof d=="undefined"&&typeof this.gxCmpContext!="undefined"&&this.gxCmpContext.length<a.length){b=a.substring(0,this.gxCmpContext.length);if(b==this.gxCmpContext){a=a.substring(this.gxCmpContext.length,a.length);d=this.columnsHtmlName[a]}}return d};this.getColumnByGxId=function(a){return this.columnsGxId[a]};
this.getColumnByGxAttId=function(a){return this.columnsGxAttId[a]};this.getColumnForVar=function(a){for(var d=0;d<this.columns.length;d++){var b=this.parentGxObject.getValidStruct(this.columns[d].gxId);if(b&&b.gxvar==a)return this.columns[d]}return null};this.getRowById=function(a){return this.rowsById[a]};this.getRowByGxId=function(a){return this.rowsByGxId[a]};this.setSort=function(a,d){if(a==this.sortColumn)this.ascSort=d==null?!this.ascSort:gx.lang.booleanValue(d);else{this.sortColumn=a;this.ascSort=
d==null?true:gx.lang.booleanValue(d)}this.doSort();this.ownerGrid.refreshGrid()};this.doSort=function(){this.sortColumn!=-1&&this.rows.sort(this.sort)};this.getControlName=function(a,d){return this.gxCmpContext+d.htmlName+"_"+a.gxId};this.getControlId=function(a,d){return this.getControlName(a,d)};this.getRowCount=function(){return this.rows.length};this.getMaxPage=function(){return Math.ceil(this.getRowCount()/this.pageSize)};this.isGxTrn=function(){return this.parentGxObject.isTransaction()};this.gridObject=
function(){return"gx.fn.gridObj('"+this.gxCmpContext+"','"+this.gxGridName+"',"+this.gxIsMasterPageGrid.toString()+")"};this.deleteImgId=function(a){return this.gxCmpContext+"delete"+this.gxGridName+"_"+a};this.showDeleteImage=function(a){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&this.isGxTrn())if((a=gx.dom.el(this.deleteImgId(a)))&&!gx.fn.isVisible(a)){a.style.display="inline";if(a.parentNode.nodeName=="A")a.parentNode.style.display="inline"}};this.appendDeleteHeader=function(a,
d){if(!this.gxIsFreestyle&&this.ownerGrid.deleteMethod!=gx.grid.deleteMethods.none){var b=this.isGxTrn(),c=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(d==gx.grid.deletePositions.left)c=true;else return;else gx.grid.deletePosition==d&&(c=true);if(b&&c){b="&nbsp;";if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)b=gx.grid.deleteTitle;a.append('<th class="'+this.columnHeaderClass+'">'+b+"</th>")}}};this.appendDeleteImage=function(a,d,b){if(this.ownerGrid.deleteMethod!=
gx.grid.deleteMethods.none&&this.isGxTrn()){var c=false,e=false;if(this.parentGxObject.Gx_mode!="DSP"&&this.parentGxObject.Gx_mode!="DLT"){c=d.gxDeleted();e=d.gxIsMod()||d.gxExists()}var f=this.deleteImgId(d.gxId),k=false;if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)if(b==gx.grid.deletePositions.left)k=true;else return;else if(!this.gxIsFreestyle&&gx.grid.deletePosition==b)k=true;else if(this.gxIsFreestyle){var m=gx.grid.deletePositionFree;b==gx.grid.deletePositions.left?k=m==gx.grid.deletePositions.topL||
m==gx.grid.deletePositions.bottomL:b==gx.grid.deletePositions.right&&(k=m==gx.grid.deletePositions.topR||m==gx.grid.deletePositions.bottomR);b=m}if(k){m='<td style="text-align:'+this.deleteImageAlign(b)+";vertical-align:"+this.deleteVerticalAlign(b)+'">';b="";k=false;if(c&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)b=gx.grid.undeleteImage;else if(e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images)b=gx.grid.deleteImage;else if(c&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)b=
gx.grid.deleteImage;else{b=gx.grid.deleteImage;k=true}c="";a.append(m);if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images){e=gx.fn.firstGridControl(this.ownerGrid.gridId);c=gx.grid.deleteTooltip;a.append('<a gxfocusable="1" href="javascript:'+this.gridObject()+".setRowDeleted('"+d.gxId+"');\"");a.append(' onfocus="gx.evt.onfocus(this,'+e+",'"+this.ownerGrid.gxComponentContext+"',"+this.ownerGrid.isMasterPageGrid+",'"+d.gxId+"',"+this.ownerGrid.gridId+')"');d="";k&&(d=d+"display:none;");
d&&a.append(' style="'+d+'"');a.append(">")}a.append('<img id="'+f+'" src="'+b+'"');c&&a.append(' title="'+c+'"');a.append(' style="border-style: none;');k&&a.append("display:none;");a.append('"');a.append("/>");this.ownerGrid.deleteMethod==gx.grid.deleteMethods.images&&a.append("</a>");a.append("</td>")}}};this.deleteVerticalAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"middle";var d="top";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.bottomR)d=
"bottom";return d}return"middle"};this.deleteImageAlign=function(a){if(this.gxIsFreestyle){if(this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)return"left";var d="right";if(a==gx.grid.deletePositions.bottomL||a==gx.grid.deletePositions.topL)d="left";return d}return"center"};this.ROW_TAG="tr";this.CELL_TAG="td";this.ROW_BASE_CLASS="";this.getRowRenderingProps=function(a,d){var b=this.ROW_TAG,c=this.ROW_BASE_CLASS;if(this.gxIsFreestyle)b=this.CELL_TAG;this.gxIsFreestyle||(c=c+(" "+(a?this.evenRowClass:
this.oddRowClass)+(d?" RowDeleted":"")));return{cls:c,tag:b}};this.simpleAppendFn=function(a){return function(d){d.append(a)}};this.appendGridStyle=function(a){var d=e.exec(this.gxHtmlTags);d&&d.length>1&&a.append(d[1]);gx.lang.emptyObject(this.gxBackground)||a.append(";background-image:url('"+gx.util.resourceUrl(this.gxBackground,true)+"');");gx.lang.emptyObject(this.gxBorderWidth)||a.append(";border: solid "+this.gxBorderWidth+"px ");gx.lang.emptyObject(this.gxBordercolor)?a.append(";"):a.append(this.gxBordercolor+
";");this.ownerGrid.width>0&&a.append("width:"+this.ownerGrid.width+this.ownerGrid.widthUnit+";");this.gxAllowCollapsing&&this.gxCollapsed&&a.append(";display:none")};this.appendGridAttributes=function(a){a.append(this.gxHtmlTags.replace(e,""))};this.appendGridClassAttribute=function(a){this.gxHtmlTags.indexOf("class=")==-1&&a.append(' class="'+this.gxCssClass+'"')};this.appendCollapsingWrapperStart=function(a){a.append('<table><tr valign="top"><td>');a.append('<img class="collapse-icon" style="cursor:pointer;" src="');
this.gxCollapsed?a.append(gx.ajax.getImageUrl(gx,"expandImage")):a.append(gx.ajax.getImageUrl(gx,"collapseImage"));a.append('" onclick="'+this.gridObject()+'.expandCollapse(this, event);"></td><td width="100%">')};this.appendCollapsingWrapperEnd=function(a){a.append("</td></tr></table>")};this.appendContainerStart=function(a,d){d.append("<table ");this.appendGridClassAttribute(d);d.append(' id="'+a+'" ');gx.lang.emptyObject(this.gxToolTipText)||d.append('title="'+this.gxToolTipText+'" ');d.append('style="');
this.appendGridStyle(d);d.append('" ');this.appendGridAttributes(d);d.append(">")};this.appendContainerEnd=this.simpleAppendFn("</table>");this.appendHeaderText=function(a,d){gx.lang.emptyObject(this.headerText)||d.append('<tr><td colspan="'+a+'" class="'+this.headerClass+'">'+this.headerText+"</td></tr>")};this.appendFooterText=function(a,d){gx.lang.emptyObject(this.footerText)||d.append('<tr><td colspan="'+a+'" class="'+this.footerClass+'">'+this.footerText+"</td></tr>")};this.appendHeader=function(a,
d){var b=a.length,c=[],e=gx.ajax.getImageUrl(gx,"ascImage"),f=gx.ajax.getImageUrl(gx,"descImage"),k=0,m;d.append("<thead>");d.append("<tr>");this.appendDeleteHeader(d,gx.grid.deletePositions.left);for(var l=0;l<b;l++){var q=a[l];m=[this.columnHeaderClass,q.gxColumnClass].join(" ");d.append('<th nowrap="nowrap" class="'+m+'"');m="";gx.lang.gxBoolean(q.visible)||(m=m+"display:none;");if(q.width){if(!q.gxWidthUnit)q.gxWidthUnit="px";m=m+("width:"+q.width+q.gxWidthUnit+";")}q.align&&(m=m+("text-align:"+
q.align+";"));if(!gx.lang.emptyObject(this.gxTitleBackColor)&&(this.gxTitleBackstyle==gx.grid.styles.header||this.gxTitleBackstyle==gx.grid.styles.report)){m=m+("background-color:"+this.gxTitleBackColor+";");this.gxRealTitleBackColor=this.gxTitleBackColor}if(!gx.lang.emptyObject(this.gxBackColor)&&this.gxTitleBackstyle==gx.grid.styles.uniform){m=m+("background-color:"+this.gxBackColor+";");this.gxRealTitleBackColor=this.gxBackColor}gx.lang.emptyObject(this.gxTitleForeColor)||(m=m+("color:"+this.gxTitleForeColor+
";"));gx.lang.emptyObject(this.gxTitleFont)||(m=m+this.gxTitleFont);d.append(' style="'+m+';"');d.append(' colindex="'+k+'"');d.append(">");k++;if(gx.lang.emptyObject(gx.text.trim(q.title)))d.append("&nbsp;");else{d.append("<span");q.gxTooltip&&d.append(' title="'+q.gxTooltip+'"');q.sortable&&d.append(' onclick="'+this.gridObject()+".grid.setSort("+q.index+');" onMouseOver="window.status=\''+this.sortMessage+"';return true;\" onMouseOut=\"window.status='';return true;\"");d.append('">');d.append(q.title);
if(this.ascLabel!=null&&this.descLabel!=null){this.ascLabel.src=e;this.descLabel.src=f;q.sortable&&this.sortColumn==q.index&&d.append("&nbsp;"+this.handleLabel(this.ascSort?this.ascLabel:this.descLabel,c))}d.append("</span>")}d.append("</th>")}this.appendDeleteHeader(d,gx.grid.deletePositions.right);d.append("</tr>");d.append("</thead>")};this.appendBodyWrapperStart=this.simpleAppendFn("<tbody>");this.appendBodyWrapperEnd=this.simpleAppendFn("</tbody>");this.appendFooterWrapperStart=this.simpleAppendFn("<tfoot>");
this.appendFooterWrapperEnd=this.simpleAppendFn("</tfoot>");this.appendRowStart=this.simpleAppendFn("<tr>");this.appendRowEnd=this.simpleAppendFn("</tr>");this.appendRowBreaksWrapperStart=this.simpleAppendFn("<table width='100%' cellspacing='0' cellpadding='0'><tbody>");this.appendRowBreaksWrapperEnd=this.simpleAppendFn("</tbody></table></td>");this.appendCellPrefixEnd=this.appendCellPrefixStart=this.appendRowPrefix=gx.emptyFn;this.beforeRender=function(){this.tableClass=this.gxCssClass;this.evenRowClass=
this.gxEvenLinesClass;this.oddRowClass=this.gxOddLlinesClass;this.columnHeaderTextClass=this.columnHeaderClass=this.headerClass=this.gxTitleClass;this.evenRowCellClass=this.evenRowClass;this.oddRowCellClass=this.oddRowClass};this.render=function(a,d,b,c){var a=!!a,e=this.gxCmpContext+this.gxGridObject+"Tbl";this.beforeRender();a=this.drawGrid(e,a,d,b);if(gx.dom.shouldPurge()){for(var f=["onblur","onclick","onfocus","onchange"],k=gx.dom.byTag("input",this.container),b=0,d=k.length;b<d;b++)gx.dom.purgeElement(k[b],
f);k=gx.dom.byTag("textarea",this.container);b=0;for(d=k.length;b<d;b++)gx.dom.purgeElement(k[b],f);k=gx.dom.byTag("select",this.container);b=0;for(d=k.length;b<d;b++)gx.dom.purgeElement(k[b],f);k=gx.dom.byTag("span",this.container);b=0;for(d=k.length;b<d;b++)gx.dom.purgeElement(k[b],f);k=gx.dom.byTag("img",this.container);b=0;for(d=k.length;b<d;b++)gx.dom.purgeElement(k[b],f)}var m=gx.dom.getActiveElement(),d=m&&(m.id||m.name)&&gx.dom.isChildNode(m,this.container);this.container.innerHTML=a;d&&setTimeout(function(){var a=
gx.dom.el(m.id||m.name);if(a){gx.csv.disableFocus=true;a.focus()}},10);this.afterRender(e);gx.fx.obs.notify("grid.onafterrender",[this]);c();this.rendered=true};this.afterRender=function(){this.rendered||this.defineEventHandlers()};this.drawGrid=function(a,d,b,c){var e=this.isGxTrn(),f=this.gxIsFreestyle&&this.gxGridCols>1,b=new gx.text.stringBuffer,k=this.columns,m=k.length,l;!this.gxIsFreestyle&&e&&m++;var q,o;if(Number(this.pageSize)!==0){q=this.getMaxPage();if(this.currentPage<=0)this.currentPage=
1;else if(this.currentPage>q)this.currentPage=q;q=Math.max(this.pageSize*(this.currentPage-1),0);o=Math.min(q+this.pageSize,this.rows.length)}else{q=0;o=this.rows.length}this.gxAllowCollapsing&&this.appendCollapsingWrapperStart(b);this.appendContainerStart(a,b);this.appendHeaderText(m,b);var p=k.length;this.gxIsFreestyle||this.appendHeader(k,b);this.appendBodyWrapperStart(b);for(var r=true,a=q;a<o;a++){var r=!r,s=this.rows[a];d&&(a===q&&!gx.fn.currentGridRowImpl(this.gxId))&&gx.fn.setCurrentGridRow(this.gxId,
s.gxId);var u=s.gxDeleted(),t=new gx.text.stringBuffer,x=this.getRowRenderingProps(r,u,a,q,o);if(f&&this.gxIsFreestyle&&(a>0&&a%this.gxGridCols===0||a===0&&this.gxGridCols>0)){a>0&&this.appendRowEnd(b,a,q,o);this.appendRowStart(b,a,q,o)}var A="";this.gxTitleBackstyle==gx.grid.styles.report&&(A=r?this.gxLinesBackcolorEven:this.gxLinesBackcolorOdd);if(this.gxTitleBackstyle==gx.grid.styles.header)A=this.gxLinesBackcolorOdd;if(this.gxTitleBackstyle==gx.grid.styles.uniform)A=this.gxBackColor;if(!this.gxIsFreestyle||
this.gxIsFreestyle&&f){this.appendRowPrefix(t,a,q,o);t.append("<"+x.tag+" id='"+this.gxCmpContext+this.gxGridObject+"Row_"+s.gxId+"'");if(this.gxIsFreestyle&&f){t.append(' gxrow="'+s.gxId.toString()+'"');(l=this.columns[1].gxControl.verticalAlign)&&t.append(' valign="'+l+'"')}else t.append(' gxrow="'+s.gxId.toString()+'"');t.append(' class="'+x.cls+'"');s.selected&&t.append(' data-selected="1"');l="";A&&(l="background-color:"+A+";");gx.lang.emptyObject(this.gxLinesFont)||(l=l+this.gxLinesFont);l&&
t.append(' style="'+l+'" ');t.append(">");b.append(t.toString())}if(this.gxIsFreestyle){f&&this.appendRowBreaksWrapperStart(b);l=this.gxBuffer.toString();b.append(l)}this.gxIsFreestyle||this.appendDeleteImage(b,s,gx.grid.deletePositions.left);this.appendCellPrefixStart(b,a,q,o);for(t=0;t<p;t++){l=k[t];var x=gx.lang.gxBoolean(l.visible),y=s.gxProps[l.index],w=s.values[l.index],v=l.gxControl;if(this.gxIsFreestyle&&v.type==gx.html.controls.types.row&&l.index===0)v.isFreestyleRow=true;v.setGridData({grid:this.ownerGrid,
row:s,gridId:this.gxId,gridRow:s.gxId});if(c){delete v.formattedValue;v.value=w;v.id=l.htmlName+"_"+v.gridRow}else v.setProperties.apply(v,y);if(d)delete gx.usrPtys[v.id];else if(gx.usrPtys[v.id]!==void 0)for(var D in gx.usrPtys[v.id]){if(D=="enabled")v.rtEnabled=true;v.setIndividualProp(D,gx.usrPtys[v.id][D])}if(u){v.rtEnabled=true;v.enabled=false}if(y.Value)v.value=y.Value;if(y.FormattedValue)v.formattedValue=y.FormattedValue;if(y.Values)v.possibleValues=y.Values.v;if(this.gxIsFreestyle&&v.type==
gx.html.controls.types.row&&l.index===0){v.id=this.gxCmpContext+this.gxGridObject+"Row_"+s.gxId;if(e&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu)v.oncontextmenu=this.gridObject()+".showContextMenu(this, event);";if(A)v.style=v.style+("background-color:"+A+";")}if(!this.gxIsFreestyle){b.append("<"+this.CELL_TAG+' class="gx-attribute '+(v.columnClass||"")+'" valign="'+l.valign+'"');b.append(' colindex="'+t+'"');y="";if(!x){y=y+"display:none;";v.visible&&(!l.isGxRemove()&&!this.ownerGrid.isPromptColumn(l))&&
this.ownerGrid.addColPropertyAfterRender(t,"Visible",1)}if(l.width){if(!l.gxWidthUnit)l.gxWidthUnit="px";y=y+("width:"+l.width+l.gxWidthUnit+";")}else if(l.gxColSize)v.colSize=l.gxColSize;l.align&&(y=y+("text-align:"+l.align+";"));v.style&&(y=y+v.style);y&&b.append(' style="'+y+'" ');b.append(">")}b.append(v.getHtml());this.gxIsFreestyle&&(v.type==gx.html.controls.types.row&&l.index===0)&&this.appendDeleteImage(b,s,gx.grid.deletePositions.left);v.persistValue();this.gxIsFreestyle||b.append("</"+this.CELL_TAG+
">");if(this.gxIsFreestyle){l.index==this.columns.length-1&&this.appendDeleteImage(b,s,gx.grid.deletePositions.right);l=l.buffer.toString();b.append(l)}}this.appendCellPrefixEnd(b,a,q,o);this.gxIsFreestyle&&f?this.appendRowBreaksWrapperEnd(b):this.appendDeleteImage(b,s,gx.grid.deletePositions.right)}this.gxIsFreestyle&&(this.gxGridCols>0&&f)&&this.appendRowEnd(b);this.appendBodyWrapperEnd(b);this.appendFooterWrapperStart(b);(e||this.hasPagingButtons())&&this.appendNavigationBar(m,b);this.appendFooterText(m,
b);this.appendFooterWrapperEnd(b);this.appendContainerEnd(b);this.gxAllowCollapsing&&this.appendCollapsingWrapperEnd(b);d=b.toString();b.clear();return d};this.defineEventHandlers=function(){this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseover",this.mouseOverHandler,this);this.gxAllowHovering&&!this.gxIsFreestyle&&gx.evt.attach(this.container,"mouseout",this.mouseOutHandler,this);this.isGxTrn()&&this.ownerGrid.deleteMethod==gx.grid.deleteMethods.menu&&gx.evt.attach(this.container,
"contextmenu",this.contextMenuHandler,this);gx.evt.attach(this.container,"mousedown",this.mouseDownHandler.closure(this,[this.gxAllowSelection&&!this.gxIsFreestyle],true),this);gx.evt.attach(this.container,"click",this.clickHandler,this);this.isGxTrn()&&gx.evt.attach(this.container,"keydown",this.keyDownHandler,this)};this.isGridRow=function(a){return a&&a.tagName=="TR"&&a.getAttribute("gxrow")&&gx.dom.findParentByTagName(a,"DIV")==this.container};this.getTargetRow=function(a,d){var b=a;for(this.isGridRow(b)||
(b=gx.dom.findParentByTagName(a,"TR"));b&&gx.dom.isChildNode(b,this.container);){if(this.isGridRow(b)&&(!d||d=="body"&&b.parentNode.tagName=="TBODY"||d=="header"&&b.parentNode.tagName=="THEAD"))return b;b=gx.dom.findParentByTagName(b,"TR")}};this.mouseOverHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),"body"))&&a.getAttribute("data-selected")!="1"&&this.startRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.mouseOutHandler=function(a){(a=this.getTargetRow(gx.evt.source(a),
"body"))&&a.getAttribute("data-selected")!="1"&&this.endRowHover(a,parseInt(a.getAttribute("gxrow").substring(0,4),10)-1)};this.contextMenuHandler=function(a){var d=this.getTargetRow(gx.evt.source(a),"body");d&&this.ownerGrid.showContextMenu(d,a)};this.mouseDownHandler=function(a,d){var b=this.getTargetRow(gx.evt.source(a),"body");b&&this.setRowSelected(b,b.getAttribute("gxrow"),true,d)};this.keyDownHandler=function(a){this.getTargetRow(gx.evt.source(a),"body")&&this.ownerGrid.rowKeyPressed(a)};this.clickHandler=
function(a){var d=gx.evt.source(a);d.parentNode&&gx.dom.hasClass(d.parentNode,this.pagingBarClass)&&gx.evt.waitGridRefresh(function(){this.pagingHandler(d,a)}.closure(this))};this.pagingHandler=function(a,d){var b="";gx.evt.cancel(d,true);if(!gx.dom.hasClass(a,this.pagingButtonDisabled)){gx.dom.hasClass(a,this.pagingButtonFirstClass)?b="FIRST":gx.dom.hasClass(a,this.pagingButtonPreviousClass)?b="PREV":gx.dom.hasClass(a,this.pagingButtonNextClass)?b="NEXT":gx.dom.hasClass(a,this.pagingButtonLastClass)&&
(b="LAST");this.changeGridPage(b)}};this.changeGridPage=function(a){var d=this.gxGridName.toUpperCase()+"PAGING",b=this.ownerGrid,c="",e;if(a){this.mask();if(gx.pO.fullAjax){gx.setGxO(this.parentGxObject);c="E"+b.realGridName.toUpperCase()+"_"+a+"PAGE"+(b.isMasterPageGrid?"_MPAGE":"");if(b.parentGrid)e=b.parentGrid.gridId}else{gx.fn.setHidden(this.gxCmpContext+d,a);c=this.gxCmpContext+"E"+d+"."}gx.evt.execEvt(void 0,void 0,c,gx.evt.dummyCtrl,e,void 0,void 0,false,this.unmask.closure(this))}};this.setRowSelected=
function(a,d,b,c){var c=c===void 0||c,e=function(){var b=gx.O;if(!gx.lang.emptyObject(this.parentGxObject)){if(c){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(d){if(a.gxOriginalBackcolor===void 0)d.gxOriginalBackcolor=d.style.backgroundColor})}this.instanciateSelectionVars(d);var g=this.rows.length,e,f=[];for(e=0;e<g;e++){var h=this.rows[e];h.selected=h.gxId==d;if(h.selected){if(c){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?
a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html;gx.dom.addClass(a,this.selectedRowClass)}f.push(h)}else if(c){h=gx.dom.el(this.gxCmpContext+this.gxGridObject+"Row_"+h.gxId);if(h!=null&&h.gxSBackcolor!==void 0){h.style.backgroundColor=h.gxSBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(h,this,function(a){if(a!=null&&a.gxSBackcolor!==void 0)a.style.backgroundColor=a.gxSBackcolor});gx.dom.removeClass(h,this.selectedRowClass)}}}for(e=0;e<f.length;e++){this.instanciateSelectedRow(f[e]);
c&&gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxSBackcolor=a.gxOriginalBackcolor!==void 0?a.gxOriginalBackcolor:a.style.backgroundColor;a.style.backgroundColor=this.gxSelectionColor.Html})}gx.setGxO(b)}};b&&(c||gx.O.isTransaction())?setTimeout(e.closure(this),100):e.call(this)};this.instanciateSelectionVars=function(a){gx.setGxO(this.parentGxObject);gx.fn.setCurrentGridRow(this.gxId,a);gx.fn.setHidden(this.gxCmpContext+this.gxGridName.toUpperCase()+"_ROW",a.substring(0,4))};
this.instanciateSelectedRow=function(a){this.setSelectedRowVars(a);this.gxOnLineActivate&&!this.ownerGrid.isLoading&&this.parentGxObject[this.gxOnLineActivate].call(this.parentGxObject,a.gxId)};this.setSelectedRowVars=function(a){for(var d=this.parentGxObject,b=this.columns.length,c=0;c<b;c++){var e=this.columns[c],f=d.GXValidFnc[e.gxId];if(f!=null){var k=a.values[c];if(this.ownerGrid.isUsercontrol)k=this.properties[a.id][e.index].value;f.v2v&&f.c2v(k)}}};this.startRowHover=function(a,d){if(a.gxOriginalBackcolor===
void 0)a.gxOriginalBackcolor=a.style.backgroundColor;gx.dom.forEachChild(a,this,function(a){if(a.gxOriginalBackcolor===void 0)a.gxOriginalBackcolor=a.style.backgroundColor});var b=this.getRowById(d);if(this.gxAllowHovering&&this.gxHoverColor&&!b.selected){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){a.gxHBackcolor=a.style.backgroundColor;a.style.backgroundColor=this.gxHoverColor.Html})}};this.endRowHover=
function(a,d){var b=this.getRowById(d);if(this.gxAllowHovering&&!b.selected&&a.gxHBackcolor!==void 0){a.style.backgroundColor=a.gxHBackcolor;gx.util.browser.isIE()&&gx.dom.forEachChild(a,this,function(a){if(a.gxHBackcolor!==void 0)a.style.backgroundColor=a.gxHBackcolor})}};this.hasPagingButtons=function(){return this.usePaging&&(!this.isFirstPage()||!this.isLastPage())};this.appendNavBarRowStart=function(a,d){gx.lang.emptyObject(this.gxRealTitleBackColor)?d.append('<tr><td colspan="'+a+'" class="'+
this.navigationClass+'" style="text-align: center;">'):d.append('<tr><td colspan="'+a+'" class="'+this.navigationClass+'" style="text-align: center;background-color:'+this.gxRealTitleBackColor+';">')};this.appendNavBarRowEnd=function(a){a.append("</td></tr>")};this.appendNavigationBar=function(a,d){var b=this.getRowCount(),c=a;this.navigationClass=this.gxFooterClass;if(this.gxIsFreestyle&&this.gxGridCols>1)c=this.gxGridCols;this.appendNavBarRowStart(c,d);if((b>0||b===0&&!this.isFirstPage())&&this.usePaging){d.append('<div class="'+
this.pagingBarClass+'" style="padding-bottom:5px;">');if(this.currentPage<=0)this.currentPage=1;d.append(this.buildPagingButton(this.pagingButtonFirstClass,!this.isFirstPage(),gx.getMessage("GXM_first")));d.append(this.buildPagingButton(this.pagingButtonPreviousClass,!this.isFirstPage(),gx.getMessage("GXM_previous")));d.append(this.buildPagingButton(this.pagingButtonNextClass,!this.isLastPage(),gx.getMessage("GXM_next")));d.append(this.buildPagingButton(this.pagingButtonLastClass,!this.isLastPage(),
gx.getMessage("GXM_last")));d.append("</div>")}this.isGxTrn()&&(!this.gxHasAddlines&&this.parentGxObject.Gx_mode!="DSP")&&d.append(this.buildLink("["+this.gxNewRowText+"]",this.gridObject()+".getNewRows(1,event);",this.gxNewRowText,this.gxGridObject+"_NewRow",this.gridObject()+".gxNewRowFocused(this);"));this.appendNavBarRowEnd(d)};this.buildPagingButton=function(a,d,b){return'<span class="'+a+(d?"":" "+this.pagingButtonDisabled)+'"'+('style="padding-left:20px;padding-bottom:5px;'+(d?"":"opacity:.7;cursor:default")+
'"')+' title="'+b+'">&nbsp;&nbsp;</span>'};this.buildLink=function(a,b,c,e,f){var j=this.navigationLinkClass;return"<a class='gx_newrow' type='gxlink' style='text-decoration:none;' tabindex='0' onfocus=\""+f+'" onblur="this.style.textDecoration = \'none\';"><span '+(e!==void 0?'id="'+e+'"':"")+' style="'+("cursor:"+(document.createTextRange?"hand":"pointer")+";")+'" class="'+j+'" onclick="'+b+'" onMouseOver="this.className=\''+this.highlightedNavigationLinkClass+"';window.status='"+c+"';return true;\" onMouseOut=\"this.className='"+
j+"';window.status='';return true;\">"+a+"</span></a>"};this.isLastPage=function(){return this.eof!="0"};this.isFirstPage=function(){return(gx.lang.emptyObject(this.firstRecordOnPage)?"0":this.firstRecordOnPage)=="0"};this.getWebImageTag=function(a){return'<img border="0" src="/'+this.basePath+this.imgsDir+a.toString()+'"/>'};var b=0;this.handleLabel=function(a){if(a.src){var d="img"+b;b++;return"<img name='"+d+"' border='0' src='"+a.src+"'>"}return a};this.sort=function(a,b){if(a.table.isGxTrn()){if(!a.gxExists()&&
!b.gxExists()&&!a.gxIsMod()&&!b.gxIsMod())return 0;if(!a.gxExists()&&b.gxExists()||!a.gxIsMod()&&b.gxIsMod())return 1;if(a.gxExists()&&!b.gxExists()||a.gxIsMod()&&!b.gxIsMod())return-1}var c=a.table,e=c.getColumnByIndex(c.sortColumn),f,j;f=a.values[c.sortColumn];j=b.values[c.sortColumn];gx.lang.instanceOf(f,Array)||(f=[f]);gx.lang.instanceOf(j,Array)||(j=[j]);switch(e.type){case gx.types.numeric:e=function(a){a=gx.num.parseFloat(a,gx.thousandSeparator,gx.decimalPoint);isNaN(a)&&(a=0);return a};break;
case gx.types.date:case gx.types.dateTime:e=function(a){try{a=(new gx.date.gxdate(a)).Value}catch(b){gx.dbg.logEx(b,"JSTable.js","sort")}return a.valueOf()};break;case gx.types.bool:e=function(a){return gx.lang.booleanValue(a)?1:0};break;default:e=function(a){return(""+a).replace(/<[^\>]*\>/g,"").toUpperCase()}}for(var k=Math.max(f.length,j.length),m=0,l=0;m===0&&l<k;l++){var q=f[l];q==null&&(m=-1);var o=j[l];o==null&&(m=1);if(m===0){q=e(q);o=e(o);m=q==o?0:q>o?1:-1}m!==0&&(m=m*(c.ascSort?1:-1))}return m};
this.mask=function(){var a=this.container||this.getContainerControl();a.firstChild&&gx.dom.mask(a.firstChild)};this.unmask=function(){var a=this.container||this.getContainerControl();a.firstChild&&gx.dom.unmask(a.firstChild)}}}(gx.$);
gx.grid.column=function(c,f,e,b,a){this.table=null;this.index=-1;this.title=c||"";this.type="undefined"!=typeof f?f:gx.types.character;this.width=e||"";this.align=b||"left";this.valign=a||"middle";this.htmlName=null;this.sortable=this.enabled=this.visible=!0;this.rowspan=this.colspan=1;this.gxAttId=this.gxId=-1;this.gxWidthUnit=this.gxAttName="";this.gxUnChecked=this.gxChecked=void 0;this.buffer=new gx.text.stringBuffer;this.isGxRemove=function(){return this.gxAttName?-1!=this.gxAttName.indexOf("GxRemove")||
-1!=this.gxAttName.indexOf("nRcdDeleted"):!1}};
gx.grid.row=function(c,f,e,b){this.table=null;this.id=c;this.gxParentRowId=b||"";this.gxId=e+this.gxParentRowId;this.gxCmpContext="";this.values=[];this.selected=!1;this.gxLvl=0;this.gxProps=f.Props||[];this.gxRenderProps=f.RenderProps||[];this.gxGrids=[];this.gxKeyValues=[];this.gxExists=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdExists_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.gxIsMod=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nIsMod_"+this.gxLvl+"_"+
this.gxId);return null!=a?0!==Number(a):!1};this.gxDeleted=function(){var a=gx.fn.getHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId);return null!=a?0!==Number(a):!1};this.setDeleted=function(a){gx.fn.setHidden(this.gxCmpContext+"nRcdDeleted_"+this.gxLvl+"_"+this.gxId,a?1:0)}};
gx.grid.responsiveGrid=function(c){var f=["xs","sm","md","lg"];return function(e){e=new gx.grid.impl(e);e.appendContainerStart=function(b,a){a.append("<div ");this.appendGridClassAttribute(a);a.append(' id="'+b+'" ');gx.lang.emptyObject(this.gxToolTipText)||a.append('title="'+this.gxToolTipText+'" ');a.append('style="');this.appendGridStyle(a);a.append('" ');a.append(">")};e.ROW_TAG="div";e.CELL_TAG="div";e.ROW_BASE_CLASS="row";e.getRowRenderingProps=function(b,a){var d=this.ROW_TAG,g=this.ROW_BASE_CLASS,
e=this.gxGridResponsiveCols;this.gxIsFreestyle&&(d=this.CELL_TAG,g=c.map(f,function(a,b){return["col-",a,"-",Math.floor(12/(e[b]||12))||1].join("")}).join(" "));this.gxIsFreestyle||(g+=" "+(b?this.evenRowClass:this.oddRowClass)+(a?" RowDeleted":""));return{cls:g,tag:d}};e.appendGridClassAttribute=function(b){b.append(' class="'+this.gxCssClass+'"')};e.appendContainerEnd=e.simpleAppendFn("</div>");e.appendHeaderText=gx.emptyFn;e.appendFooterText=gx.emptyFn;e.appendHeader=gx.emptyFn;e.appendBodyWrapperStart=
gx.emptyFn;e.appendBodyWrapperEnd=gx.emptyFn;e.appendFooterWrapperStart=e.simpleAppendFn("<div>");e.appendFooterWrapperEnd=e.simpleAppendFn("</div>");e.appendRowStart=function(b,a,d){a==d&&b.append('<div class="row">')};e.appendRowEnd=function(b,a,d,c){a==c&&b.append("</div>")};e.appendRowBreaksWrapperStart=e.simpleAppendFn("<div>");e.appendRowBreaksWrapperEnd=e.simpleAppendFn("</div></div>");e.appendRowPrefix=function(b,a,d){if(a!=d){var g=this.gxGridResponsiveCols,e=!1,d=c.map(f,function(b,d){return 1!=
g[d]&&0===a%g[d]||0===g[d]&&0===a%12?(e=!0,"visible-"+b):""}).join(" ");e&&b.append('<div class="clearfix '+d+'"></div>')}};e.appendCellPrefixStart=function(b){1==this.gxGridCols&&b.append('<div class="row"><div class="col-xs-12">')};e.appendCellPrefixEnd=function(b){1==this.gxGridCols&&b.append("</div></div>")};e.appendNavigationBar=gx.emptyFn;return e}}(gx.$);
gx.GxObject=function(c){var f=function(){this._isTrn=null;this.ServerClass=this.Gx_mode="";this.ReadonlyForm=!1;this.ObjectType="web";this.MasterPage=null;this.IsComponent=this.IsMasterPage=!1;this.AjaxSecurity=!0;this.OnSessionTimeout=gx.ajax.timeoutActions.ignore;this.JustCreated=!1;this.CmpContext="";this.WebComponents=[];this.Grids=[];this.UserControls={};this.GridUCsProps={};this.GridUCsEvts={};this.UCBindings=[];this.GXValidFnc=[];this.GXLastCtrlId=0;this.GXCtrlIds=[];this.MsgList=[];this.CmpControls=
{};this.VarControlMap={};this.FormBCs={};this.GridBCs={};this.LvlOlds=[];this.Events={};this.EvtParms={};this.conditionsChanged=this.autoRefresh=this.focusOnlyNEmb=this.hasEnterEvent=!1;this.toValid=this.fromValid=0;this.getValidStructFld_cache={};this.cmpRegex=/((?:(?:MP)?W[0-9]{4})*)((?:MP)?W[0-9]{4})/;this.sPrefix=function(){return this.CmpContext};this.declareDomainHdlr=function(a,b){this.GXValidFnc[a].dom_hdl=b};this.setVCMap=function(a,b,c,e){this.VarControlMap[a]={id:b,grid:c,type:e}};this.InitStandaloneVars=
function(){var a=gx.O;gx.setGxO(this);this.SetStandaloneVars();null!=a&&gx.setGxO(a)};this.getContainer=function(){var a=this.cmpRegex.exec(this.CmpContext);if(a)var b=gx.dom.el(a[1]+"gxHTMLWrp"+a[2]);if(b)return b};this.setObjectType=function(a){this.ObjectType=a};this.getObjectType=function(){return this.ObjectType};this.isTransaction=function(){return null!=this._isTrn?this._isTrn:this._isTrn="trn"==this.getObjectType()};this.setAjaxSecurity=function(a){this.AjaxSecurity=a};this.setOnAjaxSessionTimeout=
function(a){switch(a){case "Warn":this.OnSessionTimeout=gx.ajax.timeoutActions.warn;break;case "CallObj":this.OnSessionTimeout=gx.ajax.timeoutActions.callObj}};this.addKeyListener=function(a,b){gx.evt.addKeyListener(this.CmpContext,a,b)};this.clearMessages=function(){this.MsgList.length=0};this.addMessage=function(a){this.MsgList.push(a)};this.showMessages=function(){for(var a=[],b=this.MsgList.length,c=0;c<b;c++)a.push({att:"",type:2,text:this.MsgList[c]});b={};b[""==this.CmpContext?"MAIN":this.CmpContext]=
a;gx.fn.setErrorViewer(b);this.clearMessages()};this.setPrompt=function(a,b){gx.fn.attachCtrl(a,{isPrompt:!0,wc:this.CmpContext,mp:this.IsMasterPage,controls:b,obj:this});this.promptKeyHandlers||(this.promptKeyHandlers={});this.promptKeyHandlers[a]=function(b){if((b=(b||gx.dom.el(this.CmpContext+a)).parentNode)&&b.href)if((b=b.href.match("javascript:(.+)"))&&b.length>1){b=decodeURIComponent(b[1]);try{eval(b)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setPrompt")}}}};this.readServerVars=function(){if(!gx.lang.emptyObject(gx.csv.lastEvtResponse)){for(var a=
[],b=gx.csv.lastEvtResponse.gxValues,c=b.length,e=0;e<c;e++){var f=b[e];if(f.CmpContext==this.CmpContext&&gx.lang.booleanValue(f.IsMasterPage)==this.IsMasterPage){a.push(f);break}}gx.fn.setJsonValues(a)}};this.refreshInputs=function(a){for(var b=a.length,c=0;c<b;c++){var e=this.getValidStructFld(a[c][1]);null!=e&&"function"==typeof e.c2v&&e.c2v()}};this.refreshOutputs=function(a){for(var b=[],c=0,e=a.length;c<e;c++){var f=a[c];if(f.fld){var j=this.getValidStructFld(f.fld);if(null!=j)j.v2c(),f=gx.fn.getControlGridRef(j.fld,
j.grid),gx.fn.setControlOldValue(f,j.val());else{j=this.getVariable(f.av);if(null!=j&&"object"==typeof j){var k=this.getFormBCForVar(f.av);null!=k&&this.bcToScreen(k,j);(k=this.getGridForColl(f.av))&&k.refreshCollection(j)}gx.fn.setHidden(gx.csv.ctxControlId(f.fld,this),j)}}else f.ctrl&&b.push(f)}c=0;for(e=b.length;c<e;c++)f=b[c],gx.uc.isUserControl(f.ctrl)&&(f.ctrl.execV2CFunctions(!1),f.ctrl.execShowFunction());this.showMessages()};this.refreshServerOutputs=function(a){for(var b=a.length,c=0;c<
b;c++){var e=a[c],f=gx.fn.getHidden(this.CmpContext+e.fld);void 0!=f&&((e=this.getValidStructFld(e.fld))&&e.v2v?(e.v2v(f),e.v2c()):this.setVariable(a[c].av,f))}};this.getContextObject=function(a){return null!=this.getValidStructFld(a)&&(a=gx.fn.getControlValue_impl(this.CmpContext+a),null!=a)?a:""};this.getValidStructId=function(a){if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=0;c<b.length;c++)if(this.isSameField(this.getValidStruct(b[c]),a))return b[c];return-1};this.getValidStructFld=
function(a){"object"==typeof a&&a.tagName&&(a=gx.dom.id(a));if(this.getValidStructFld_cache[a])return this.getValidStructFld_cache[a];if(!gx.lang.emptyObject(a))for(var b=this.getControlIds(),c=b.length,e=0;e<c;e++){var f=this.getValidStruct(b[e]);if(this.isSameField(f,a))return this.getValidStructFld_cache[a]=f}return this.getValidStructFld_cache[a]=null};this.isSameField=function(a,b){var c=a.fld;if(c==b)return!0;this.IsComponent&&0==b.indexOf(this.CmpContext)&&(b=b.substring(this.CmpContext.length));
0!=a.grid&&(b=b.replace(/_([0-9]{4})*$/,""));return c==b};this.getUserFocus=function(){var a=gx.fn.getHidden(this.CmpContext+"GX_FocusControl");if(!gx.lang.emptyObject(a)&&"notset"!=a){var b=gx.dom.byId(a);if(!gx.lang.emptyObject(b)&&!gx.fn.isAccepted(b)){a=gx.csv.cmpCtx;gx.csv.cmpCtx=this.CmpContext;var c=gx.O;gx.O=this;b=gx.fn.firstAcceptedControl(gx.popup.ispopup());gx.O=c;gx.csv.cmpCtx=a;a=gx.lang.emptyObject(b)?"":b.id}}if(gx.lang.emptyObject(a)){if(this.hasMasterPage()&&(a=this.MasterPage.getUserFocus(),
!gx.lang.emptyObject(a)))return a;b=[];for(c=0;c<this.WebComponents.length;c++)if(0==this.WebComponents[c].CmpContext.indexOf("MP"))b.push(this.WebComponents[c]);else if(a=this.WebComponents[c].getUserFocus(),!gx.lang.emptyObject(a))return a;for(c=0;c<b.length&&!(a=b[c].getUserFocus(),!gx.lang.emptyObject(a));c++);}return a};this.hasMasterPage=function(){return null!=this.MasterPage};this.setComponent=function(a){this.CmpControls[a.id.toLowerCase()]=a};this.refreshGrid=function(a){(a=this.getGrid(a))&&
a.doRefresh()};this.refreshComponent=function(a){var b=this.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix);b?gx.evt.dispatcher.dispatch("REFRESH",b):(b=gx.fn.controlGridId(a),0!==b&&(b=gx.pO.getWebComponent(this.CmpContext+this.getComponentData(a).Prefix+gx.fn.currentGridRow(b)))&&gx.evt.dispatcher.dispatch("REFRESH",b))};this.getComponentPrefix=function(a){return(a=this.getComponentData(a))?a.Prefix||"":""};this.getComponentData=function(a){return this.CmpControls[a.toLowerCase()]};
this.createWebComponent=function(a,b,c,e,f,j){j=j||this.getComponentPrefix(a);e||(a=gx.fn.controlGridId(a),e=0!==a?gx.fn.currentGridRow(a):"");var f=f||this.CmpContext+"gxHTMLWrp"+j+e,j=this.CmpContext+j,k=gx.getObj(j,!1);k?k.startFeedback():gx.dom.mask(f);a=gx.gen.isJava()&&gx.pO.PackageName?gx.pO.PackageName+".":"";gx.ajax.dynComponent(a+b,c,j,e).done(function(a){if(!a.DynComponentMap)a.DynComponentMap={};a.DynComponentMap[j+e]=f;gx.ajax.setPostResponse(a);k?k.endFeedback():gx.dom.unmask(f)})};
this.setWebComponent=function(a){this.deleteComponent(a.CmpContext,a,!1);this.WebComponents[a.CmpContext]=a;this.WebComponents.push(a);a.JustCreated=!0;gx.fn.setHidden(a.CmpContext,a.ServerClass);gx.fx.obs.notify("webcom.render",[a])};this.getWebComponent=function(a){return this.WebComponents[a]};this.deleteComponent=function(a,b,c){var c="undefined"==typeof c?!0:c,e=this.getWebComponent(a);if(e){gx.cache.deleteInlineCode(a+e.ServerClass.toLowerCase());c&&this.deleteComponentHiddens(a);gx.lang.emptyObject(b)||
gx.fn.setHidden(b.CmpContext,b.ServerClass);e.ondestroy();delete this.WebComponents[a];b=this.WebComponents.length;for(c=0;c<b;c++)if(this.WebComponents[c].CmpContext==a){this.WebComponents.removeAt(c);break}var b=this.WebComponents,f;for(f in b)isNaN(parseInt(f))&&0===f.indexOf(a)&&this.deleteComponent(f)}};this.deleteComponentHiddens=function(a){var a=gx.fn.filterHiddens(RegExp("^"+a),gx.http.viewState),b;for(b in a)b&&gx.fn.deleteHidden(b)};this.setCmpContext=function(a){void 0!=a&&(""!==a&&(this.IsComponent=
!0),this.CmpContext=a)};this.getOldLvl=function(a){for(var b in this.LvlOlds)for(var c=this.LvlOlds[b],e=c.length,f=0;f<e;f++)if(c[f]==a)return b;return-1};this.refreshDependantGrids=function(a){for(var b=this.Grids.length,c=0;c<b;c++)for(var e=this.Grids[c],f=e.refreshVars,j=f.length,k=0;k<j;k++)if(f[k].fld==a.fld){e.filterVarChanged();break}};this.setGrid=function(a){this.Grids[a.gridName]=a;var b=this.getGridIdxByName(a.gridName);-1!=b?this.Grids[b]=a:this.Grids.push(a)};this.getGrid=function(a){return this.Grids[a]};
this.getGridIdxByName=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridName==a)return c;return-1};this.getGridIdx=function(a){for(var b=this.Grids.length,c=0;c<b;c++)if(this.Grids[c].gridId==a)return c;return-1};this.getGridById=function(a,b){for(var b=b||"",c=this.Grids.length,e=0;e<c;e++){var f=this.Grids[e];if(f.gridId==a&&(!f.parentRow||gx.text.endsWith(b,f.parentRow.gxId)))return f}return null};this.getGridForColl=function(a){for(var b=this.Grids.length,c=0;c<b;c++){var e=
this.Grids[c];if(e.boundedCollName==a)return e}return null};this.getFormBCForVar=function(a){for(var b in this.FormBCs){var c=this.FormBCs[b];if(c&&c.gxvar==a)return c}return null};this.getGridBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.GridBCs[b]};this.getFormBC=function(a){var b=a;this.IsComponent&&0===a.indexOf(this.CmpContext)&&(b=a.substring(this.CmpContext.length));return this.FormBCs[b]};this.addGridBCProperty=
function(a,b,c,e){var f=this.getGridBC(a);"undefined"==typeof f&&(f={},f.gxvar=e,this.GridBCs[a]=f);this.addBCProperties(f,b,c,e)};this.addBCProperty=function(a,b,c,e){var f=this.getFormBC(a);"undefined"==typeof f&&(f={},f.gxvar=e,this.FormBCs[a]=f);this.addBCProperties(f,b,c,e)};this.addBCProperties=function(a,b,c,e){if(a)if(b instanceof Array)for(var f=b.length,j=function(){var a=this[c.gxvar];"date"==c.type&&(a=(new gx.date.gxdate(a)).getString("Y4MD"));this.valueToBCProp(this[e],b,c,a)},k=0;k<
f;k++){if("undefined"==typeof a[b[k]])if(k<f-1)a[b[k]]={};else{a[b[k]]=c;"object"==typeof this[e]&&(c.v2bc=j);break}a=a[b[k]]}else"string"==typeof b&&(a[b]=c)};this.valueToBCProp=function(a,b,c,e){try{if(a){var f=a,j=b.length;gx.lang.isArray(f)&&(c&&c.grid)&&(f=a[Number(gx.fn.currentGridRow(c.grid))-1]);for(a=0;a<j;a++)if(1<j&&(a<j-1&&void 0===f[b[a]])&&(f[b[a]]={}),"object"==typeof f[b[a]])f=f[b[a]];else{f[b[a]]=e;break}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","valueToBCProp")}};this.bcToScreen=function(a,
b){for(var c in a)if("gxvar"!=c)try{if("object"==typeof b[c])this.bcToScreen(a[c],b[c]);else{var e=a[c];if((0==e.grid||gx.csv.validatingGrid&&e.grid==gx.csv.validatingGrid.gridId)&&gx.lang.emptyObject(e.hc)&&e.v2v)e.v2v(b[c]),e.v2c()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","bcToScreen")}};this.addGridUCEventHandler=function(a,b,c){gx.lang.emptyObject(this.GridUCsEvts[a])&&(this.GridUCsEvts[a]=[]);this.GridUCsEvts[a].push({e:b,h:c})};this.getGridUCEventHandlers=function(a){a=this.GridUCsEvts[a];return gx.lang.emptyObject(a)?
[]:a};this.setGridUCDynProp=function(a,b,c,e,f){this.setGridUCProp(a,b,c,void 0,f)};this.setGridUCProp=function(a,b,c,e,f){gx.lang.emptyObject(this.GridUCsProps[a])&&(this.GridUCsProps[a]=[]);this.GridUCsProps[a].push({p:b,h:c,v:e,t:f});"InternalTitle"==b&&(this.GridUCsProps[a].title=e)};this.getGridUCProperties=function(a){a=this.GridUCsProps[a];return gx.lang.emptyObject(a)?[]:a};this.addUsercontrolBinding=function(a,b,c){this.UCBindings[a]||(this.UCBindings[a]={fld:b,uc:[]});gx.util.inArray(c,
this.UCBindings[a].uc)||this.UCBindings[a].uc.push(c)};this.setUserControl=function(a){a.ContainerName&&(this.UserControls[a.ContainerName]=a)};this.getUserControl=function(a){var b=this.UserControls[a];!b&&""!=this.CmpContext&&(b=this.UserControls[this.CmpContext+a]);return b};this.execV2CFunctions=function(a,b){if(!b||gx.lang.isArray(b)&&0==b.length)b=this.UserControls;var g=this;c.each(b,function(b,d){g==d.ParentObject&&d.updateAndShow(a)})};this.execC2VFunctions=function(){c.each(this.UserControls,
function(a,b){try{b.execC2VFunctions()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execC2VFunctions")}try{b.saveProperties()}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","execC2VFunctions")}})};this.setMode=function(){gx.fn.setHidden(this.CmpContext+"_MODE",this.Gx_mode);gx.fn.setHidden(this.CmpContext+"Mode",this.Gx_mode)};this.setVariable=function(a,b){var c=this[a]=b;0!=a.indexOf(this.CmpContext)&&gx.fn.setHidden(this.CmpContext+a,b);if(void 0!=this.VarControlMap[a]){var e=this.VarControlMap[a].type;if("date"==
e||"dtime"==e)"string"==typeof b&&(b=new gx.date.gxdate(b),this[a]=b),c="date"==e?b.getStringWithFmt("Y4MD"):b.getStringWithFmt("Y4MD")+" "+b.getTimeString(!0,!0);"decimal"==e&&"."!=gx.decimalPoint?(c=b.toString().replace(".",gx.decimalPoint),"string"==typeof b&&(this[a]=gx.num.parseFloat(b))):"int"==e&&"string"==typeof b&&(this[a]=gx.num.parseInt(b));gx.fn.setHidden(this.CmpContext+this.VarControlMap[a].id,c)}"Gx_mode"==a&&this.setMode();void 0!=this.UCBindings[a]&&gx.fn.setHidden(this.CmpContext+
this.UCBindings[a].fld,b)};this.getVariable=function(a){return this[a]};this.isServerEvent=function(a){return this.Events[a][1]||!1};this.getServerEventName=function(a){return this.Events[a][0]||""};this.getClientEventName=function(a){for(var b in this.Events)if(this.Events[b][0]==a)return b;return""};this.setEventParameters=function(a,b){gx.csv.lastEvtRow=null;gx.O=this;var c=!0,e=-1;gx.csv.cmpCtx=this.CmpContext;for(var f=a.length,j=0;j<f;j++){var k=a[j][0],m=a[j][1],l=a[j][2],q=!1,o;for(o in b)if(o.toLowerCase()==
k.toLowerCase()){this.setVariable(l,b[o]);q=!0;break}q||this.setVariable(l,b);k=this.getValidStructFld(m);null!=k?(0!=k.grid&&-1==e?e=k.grid:0!=k.grid&&k.grid!=e&&(c=!1),k.v2c()):gx.fn.setHidden(this.CmpContext+m,this.getVariable(l))}c&&(gx.csv.lastEvtRow=gx.fn.currentGridRowImpl(e))};this.executeServerEvent=function(a,b,c,e){gx.O=this;gx.csv.cmpCtx=this.CmpContext;var f=!0;void 0!=b&&!1==b&&(f=!1);b="string"==typeof c?c:"";gx.lang.emptyObject(gx.csv.lastEvtRow)||(b=gx.csv.lastEvtRow);c=!gx.lang.emptyObject(gx.csv.validatingGrid)?
gx.csv.validatingGrid.gridId:!1;""==b&&c&&(b=gx.csv.lastRow[c]);gx.evt.execEvt(this.CmpContext,this.IsMasterPage,this.CmpContext+"E"+a+"."+b,gx.evt.dummyCtrl,c,f,null,null,null,e)};this.executeEnterEvent=function(a,b){if(b&&b.onblur)b.onblur();if(!gx.evt.cancelAndRefresh(a)){gx.dom.hasSubmitControl()&&gx.evt.cancel(a,!0);b&&("INPUT"==b.nodeName&&gx.dom.isEditControl(b))&&gx.evt.cancel(a,!0);var c=this.gxOWithEnter();if(null!=c){gx.evt.enter=!0;var e="ENTER";c.IsMasterPage&&(e+="_MPAGE");var e=c.CmpContext+
"E"+e+".",f;if(gx.evt.isEnterEvtCtrl(b)){var j=gx.fn.controlRowId(b);f=gx.fn.controlGridId(b.id);j&&(e+=j)}gx.evt.execEvt(c.CmpContext,c.IsMasterPage,e,gx.evt.dummyCtrl,f);gx.evt.enter=!1;gx.evt.cancel(a,!0)}}};this.gxOWithEnter=function(){if(this.hasEnterEvent)return this;if(this.IsComponent){var a=this.cmpRegex.exec(this.CmpContext),b=""==a[1]&&0==a[0].indexOf("MP"),a=gx.getObj(a[1],b);if(!gx.lang.emptyObject(a))return a.gxOWithEnter()}else if(this.hasMasterPage())return this.MasterPage.gxOWithEnter();
return null};this.getLastControlId=function(){return this.GXLastCtrlId};this.getValidStruct=function(a){return this.GXValidFnc[a]};this.getControlIds=function(){return this.GXCtrlIds};this.getControlIdsh=function(){return this.GXCtrlIdsh};this.getUsercontrolFromChild=function(a){c.each(this.UserControls,function(b,c){var e=c.getContainerControl();if(gx.dom.isChildNode(a,e))return c});return null};this.installFlatLevelDatePickers=function(){for(var a=null,b=this.getControlIds(),c=b.length,e=0;e<c;e++)a=
this.getValidStruct(b[e]),void 0!=a&&(0==a.grid&&void 0!=a.dp)&&gx.fn.installDatePicker(this.CmpContext+a.fld,a.dp.f,a.dp.st,a.dp.wn,a.dp.mf,gx.fn.datePickerFormat(a.dp.pic,a.dp.dec,a.len))};this.installImageControls=function(){for(var a=gx.dom.byClass("gx-multimedia-upload"),b=0,c=a.length;b<c;b++)gx.html.multimediaUpload.createControl(a[b]);gx.fx.obs.addObserver("gx.multimedia.clear",this,this.clearMultimediaValue)};this.initControlsEnabledFlag=function(){c.each(gx.O.GXValidFnc,function(a,b){if(b&&
b.fld&&"bits"!=b.type&&"audio"!=b.type&&"video"!=b.type){var c=gx.fn.getControlRef(b.fld);if(c){var e=gx.http.viewState[gx.dom.id(c)+"_Enabled"];void 0!==e&&gx.fn.setEnabledProperty(c,gx.lang.gxBoolean(e),!1)}}})};this.clearMultimediaValue=function(a){a=gx.html.multimediaUpload.getElements(a);a.fileField.onchange(a.fileField);gx.fn.setHidden(a.fileField.id,"");gx.fn.setHidden(a.uriField.id,"");gx.fn.setHidden(a.fileField.id+"_gxBlob","")};this.refreshOlds=function(){for(var a in this.LvlOlds){var b=
this.LvlOlds[a];if("function"!=typeof b){var c=gx.fn.lvlGrid(parseInt(a,10)),e;0!=c&&(e=gx.fn.currentGridRow(c));for(var c=b.length,f=0;f<c;f++){var j=b[f],k=j,m="",l=gx.fn.vStructForOld(k);if(l){if(!l.gxgrid||0<l.gxgrid.grid.rows.length)m=gx.typedOld(l.fld,k,l.type)}else gx.lang.emptyObject(e)||(j+="_"+e),m=gx.fn.getHidden(j);"undefined"!=typeof m&&(l||(window[k]=m),this[k]=m)}}}};this.deleteEventHandlers=function(){try{gx.fx.ctx.deleteHandlers(this),gx.fx.dnd.deleteHandlers(this)}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","deleteEventHandlers")}};this.ondestroy=function(){try{this.endFeedback(),this.deleteEventHandlers(),c.each(this.UserControls,function(a,b){if(!gx.lang.emptyObject(b.destroy))try{b.destroy()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","ondestroy")}})}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","ondestroy")}};this.onpost=function(){var a=gx.O;gx.setGxO(this);if(this.hasMasterPage())this.MasterPage.onpost();for(var b=this.WebComponents.length,c=0;c<b;c++)this.WebComponents[c].onpost();this.ReadonlyForm&&
(this.IsComponent&&a!=this)&&this.roControlsAsHidden();this.execC2VFunctions();gx.setGxO(a)};this.roControlsAsHidden=function(){for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var e=this.getValidStruct(a[c]);if(0==e.grid&&"function"==typeof e.val){var e=this.CmpContext+e.fld,f=gx.dom.el(e);f&&!gx.fn.isAccepted(f)&&gx.fn.setHidden(e,gx.fn.getControlValue(e))}}};this.onload=function(a){gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass);gx.setGxO(this);this.screenToVars();this.hasMasterPage()&&
(this.MasterPage.onload(),gx.setGxO(this));var b=this.Grids.length;if(!1!==a)for(var c=0;c<b;c++)this.Grids[c].loadGrid();b=this.WebComponents.length;for(c=0;c<b;c++)this.WebComponents[c].onload(a);gx.setGxO(this);this.installFlatLevelDatePickers();this.installImageControls();this.refreshOlds();this.initControlsEnabledFlag();this.execV2CFunctions(!0);this.JustCreated=!1;gx.dbg.logPerf("objectOnload_"+this.CmpContext+this.ServerClass)};this.onunload=function(a){if(this.hasMasterPage()&&!1!==a)this.MasterPage.onunload();
a=this.Grids.length;for(a-=1;0<=a;a--)delete this.Grids[this.Grids[a].gridName],this.Grids[a].cleanup(),this.Grids.splice(a,1);a=this.WebComponents.length;for(a-=1;0<=a;a--)delete this.WebComponents[this.WebComponents[a].CmpContext],this.WebComponents[a].onunload(),this.WebComponents.splice(a,1);this.getValidStructFld_cache={};gx.fn.cleanAttachedCtrls();this.ondestroy()};this.clean=function(a){this.cleanHiddens();this.onunload(a);gx.cache.removeRemoteFile(this.ServerClass.toLowerCase()+".js")};this.cleanHiddens=
function(){gx.http.clearState()};this.screenToVars=function(){try{for(var a=this.getControlIds(),b=a.length,c=0;c<b;c++){var e=this.getValidStruct(a[c]);e&&(0==e.lvl&&"function"==typeof e.c2v)&&e.c2v()}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","screenToVars")}};this.postbackLoad=function(a){this.hasMasterPage()&&this.MasterPage.postbackLoad(a);for(var b=this.WebComponents.length,c=0;c<b;c++)this.WebComponents[c].postbackLoad(a);this.IsComponent&&this.JustCreated&&(this.installImageControls(),this.installFlatLevelDatePickers());
this.execV2CFunctions(!0,a);this.conditionsChanged=this.JustCreated=!1};this.addDragSource=function(a,b,c,e){gx.fx.dnd.addSource(this,a,b,c,e)};this.addDropTarget=function(a,b,c,e){gx.fx.dnd.addTarget(this,a,b,c,e)};this.addContextSetter=function(a,b,c,e){gx.fx.ctx.addSetter(this,a,b,c,e)};this.addContextTracker=function(a,b,c,e){gx.fx.ctx.addTracker(this,c,e)};this.addOnMessage=function(a,b,c,e,f){gx.fx.notifications.addTracker(this,a,b,c,e,f)};this.addEventHandler=function(a,b,c){gx.fx.dom.addEventHandler(this,
a,b,c)};this.updateBitmapValue=function(a,b,c,e){a=gx.html.multimediaUpload.getContainer(a);"file"==gx.html.multimediaUpload.getOptionValue(a)?this[b]=e:this[c]=e};var e,b=0;this.getFeedbackContainer=function(){return gx.pO&&!gx.pO.fullAjax||this==gx.pO?document.body:this.getContainer()};this.startFeedback=function(){b++;e||(e=gx.lang.doCallTimeout(function(){var a=this.getFeedbackContainer();a&&gx.dom.mask(a)},this,arguments,200).t)};this.endFeedback=function(){0<b&&b--;if(0==b){e&&(clearTimeout(e),
e=!1);var a=this.getFeedbackContainer();a&&gx.dom.unmask(a)}}};f.WEBCOMPONENT_CLASS_NAME="gxwebcomponent";f.WEBCOMPONENT_BODY_CLASS_NAME="gxwebcomponent-body";return f}(gx.$);
gx.uc=function(c){return{getNew:function(f,e,b,a,d,g,n,h,j){a=eval(a);gx.lang.inherits(a,gx.uc.UserControl,!0);a=new a(c);a.ContainerName=d;a.DesignContainerName=d;a.setupControl(f,g,e,b,n,h,j);return a},fromChild:function(c){var e=gx.pO.getUsercontrolFromChild(c);if(null!=e||gx.pO.hasMasterPage()&&(e=gx.pO.MasterPage.getUsercontrolFromChild(c),null!=e))return e;for(var b=gx.pO.WebComponents.length,a=0;a<b;a++)if(e=gx.pO.WebComponents[a].getUsercontrolFromChild(c),null!=e)return e;return null},getUserControlObj:function(c){var e=
gx.O.getUserControl(c);if(gx.lang.emptyObject(e)){if(gx.pO.hasMasterPage()&&(e=gx.pO.MasterPage.getUserControl(c),!gx.lang.emptyObject(e)))return e;for(var b=gx.pO.WebComponents.length,a=0;a<b&&!(e=gx.pO.WebComponents[a].getUserControl(c),!gx.lang.emptyObject(e));a++);}return e},userControlContainerId:function(c){var e=c.lastIndexOf("_");return-1!=e&&(e=c.substring(0,e)+"Container"+c.substring(e),null!=gx.dom.byId(e))?e:c+"Container"},setProperties:function(c,e){var b=gx.uc.getUserControlObj(gx.uc.userControlContainerId(c));
if(null!=b)if(void 0!=e.length)for(var a=e.length,d=0;d<a;d++)for(var g in e[d]){var n=e[d][g];b[g]=n}else for(g in e)n=e[g],b[g]=n},isUserControl:function(c){if(gx.lang.emptyObj(gx.O.UserControls))return!1;if(c instanceof gx.uc.UserControl)return!0;c=gx.dom.byId(gx.uc.userControlContainerId(c));return null!=c&&"DIV"==c.tagName?!0:!1},UserControl:function(){this.ParentObject=null;this.GridRow=this.GridId="";this.ControlLvl=this.ControlId=0;this.ControlName=this.ContainerName="";this.LastIdBefore=
0;this.Properties=[];this.DynProperties=[];this.PropTypes=[];this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.RealControl=this.C2ShowFunction=null;this.IsPostBack=!1;this.clearFunctions=function(){this.ValidFunctions=[];this.V2CFunctions=[];this.C2VFunctions=[];this.C2ShowFunction=null};this.me=function(){return"gx.getObj('"+this.ParentObject.CmpContext+"', "+this.ParentObject.IsMasterPage.toString()+").getUserControl('"+this.ContainerName+"')"};this.getChildContainer=function(c){return gx.dom.byId(this.DesignContainerName+
c+(""!=this.GridRow?"_"+this.GridRow:""))};this.getContainerControl=function(){return gx.dom.byId(this.ContainerName)};this.getRealControl=function(){return this.RealControl?this.RealControl:this.getContainerControl()};this.setupControl=function(c,e,b,a,d,g,n){this.ParentObject=c;this.ControlName=e;this.ControlId=b;this.LastIdBefore=a;this.ControlLvl=void 0!=d?d:0;this.GridId=void 0!=g?g:0;this.GridRow=void 0!=n?n:"";this.ParentObject.GXValidFnc[this.ControlId]={lvl:this.ControlLvl,grid:this.GridId,
op:[],ip:[],isuc:!0,uc:this,fnc:this.validateControl}};this.addValidFunction=function(c,e,b){this.ValidFunctions.push(c);this.ParentObject.addUsercontrolBinding(e,b+(""==this.GridRow?"":"_"+this.GridRow),this)};this.validateControl=function(){gx.csv.validatingUC=this;for(var c=this.ValidFunctions.length,e=0;e<c;e++)if(!this.ValidFunctions[e].call(gx.O))return gx.O.AnyError=1,gx.csv.validatingUC=null,!1;gx.csv.validatingUC=null;return!0};this.attachEvents=function(){try{var c=this.getContainerControl();
if(gx.lang.emptyObject(document.frames))c.onfocus=this.onfocus,this.RealControl=c;else{var e=document.frames.length;if(0<e)for(var b=0,b=0;b<e;b++){var a=document.frames[b];if(!0==gx.dom.isChildNode(a,c)){a.frameElement.onfocus=this.onfocus;this.RealControl=a.frameElement;break}}}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","attachEvents")}};this.onfocus=function(){gx.evt.onfocus(this.getRealControl(),this.ControlId,this.ParentObject.CmpContext,this.ParentObject.IsMasterPage,this.GridRow,this.GridId);gx.csv.lastId=
this.ControlId;gx.csv.anyError||this.setFocusBase()};this.setFocusBase=function(){"function"==typeof this.setFocus&&this.setFocus()};this.setHtml=function(c){gx.dom.shouldPurge()&&gx.dom.purge(this.getContainerControl(),!0);this.getContainerControl().innerHTML=c};this.createWebComponent=function(c,e,b,a,d){this.ParentObject.createWebComponent(c,e,b,this.GridRow,a,d)};this.deleteWebComponent=function(c){this.ParentObject.deleteComponent(gx.fn.cmpContextFromCtrl(c))};this.notifyContext=function(c,e){gx.fx.ctx.notify(null,
c,e)};this.addV2CFunction=function(){if(1==arguments.length&&"function"==typeof arguments[0])this.V2CFunctions.push(arguments[0]);else{var c=arguments[0],e=arguments[1],b=arguments[2];this.ParentObject.addUsercontrolBinding(c,e,this);this.V2CFunctions.push(function(a,d,g){var n=e;g&&(d&&(n=e+"_"+d),a.ParentObject[c]=gx.fn.getControlValue(n));a[b](a.ParentObject[c])})}};this.addC2VFunction=function(c){this.C2VFunctions.push(c)};this.setC2ShowFunction=function(c){this.C2ShowFunction=c};this.execV2CFunctions=
function(c){var e=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var b=0,a=this.V2CFunctions,d=a.length,b=0;b<d;b++)try{a[b](this,this.GridRow,c)}catch(g){gx.dbg.logEx(g,"gxfrmutl.js","execV2CFunctions")}gx.csv.cmpCtx=e};this.execC2VFunctions=function(){var c=gx.csv.cmpCtx;gx.csv.cmpCtx=this.ParentObject.CmpContext;for(var e=0,b=this.C2VFunctions,a=b.length,e=0;e<a;e++)try{b[e](this,this.GridRow)}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","execC2VFunctions")}gx.csv.cmpCtx=c};this.execShowFunction=
function(){try{null!=this.C2ShowFunction&&this.getContainerControl()&&this.C2ShowFunction(this)}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","execShowFunction")}this.IsPostBack=!0};this.updateAndShow=function(c){try{this.execV2CFunctions(c)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","updateAndShow")}c&&this.execShowFunction()};this.getEventRow=function(){return this.GridRow};this.eventHandler=function(c,e,b){gx.evt.setReady(!1);gx.setGxO(this.ParentObject);if(0<c){var a=this.DesignContainerName,d=RegExp("^(?:"+
this.ParentObject.CmpContext+")?(.+)$").exec(this.DesignContainerName);d&&d[1]&&(a=d[1]);this.ParentObject[a]=this;(c=this.ParentObject.getGridById(c))&&c.instanciateRow(e)}this.execC2VFunctions();b.call(this.ParentObject,this.getEventRow());gx.evt.setReady(!0)};this.addEventHandler=function(c,e){this[c]=this.eventHandler.closure(this,[this.GridId,this.GridRow,e])};this.addProperty=function(c,e){this.Properties[c]=e};this.setProp=function(c,e,b,a){this.addProperty(c,e);this.PropTypes[c]=a;gx.lang.isBooleanType(a)?
this[c]=gx.lang.gxBoolean(b):"color"==a?gx.lang.emptyObject(b)||(this[c]="number"==typeof b||"string"==typeof b?gx.color.html(b):b):gx.lang.isNumericType(a)?gx.lang.emptyObject(b)||(this[c]=gx.num.parseFloat(b)):this[c]=b};this.setDynProp=function(c,e,b,a){this.DynProperties.push(c);var d=function(){var d=this.getDynPropertyValueFromHidden(c,e);void 0===d&&(d=b);this.setProp(c,e,d,a)};this.ParentObject.CmpContext?gx.fx.obs.addObserver("webcom.render",this,function(a){a===this.ParentObject&&d.call(this)}):
gx.fx.obs.addObserver("gx.onready",this,d,{single:!0})};this.refreshDynProperties=function(){for(var c=0,e=this.DynProperties.length;c<e;c++){var b=this.DynProperties[c];this[b]=this.getDynPropertyValueFromHidden(b,this.Properties[b])}};this.getDynPropertyValueFromHidden=function(c,e){var b=gx.fn.getHidden(this.getHiddenName(e));void 0===b&&(b=gx.fn.getHidden(this.getHiddenName(c)));return b};this.setGridProperties=function(){for(var c=this.ParentObject.getGridUCProperties(this.ControlName),e=c.length,
b=0;b<e;b++){var a=c[b],d=a.v;"undefined"==typeof d&&(d=this.getHiddenName(a.h),d=gx.fn.getHidden(d),"color"==a.t&&(d=gx.color.html(d)));this.setProp(a.p,a.h,d,a.t)}};this.setGridEventHandlers=function(){for(var c=this.ParentObject.getGridUCEventHandlers(this.ControlName),e=c.length,b=0;b<e;b++){var a=c[b];this.addEventHandler(a.e,a.h)}};this.getHiddenName=function(c){var e="";""!=this.GridRow&&(e="_"+this.GridRow);return this.ParentObject.CmpContext+this.ControlName.toUpperCase()+(this.ParentObject.IsMasterPage?
"_MPAGE":"")+"_"+c+e};this.saveProperties=function(){for(var c in this.Properties){var e=this[c];"function"!=typeof this.Properties[c]&&("undefined"!=typeof e&&("undefined"!=typeof e.R&&"undefined"!=typeof e.G&&"undefined"!=typeof e.B)&&(e=gx.color.rgb(e.R,e.G,e.B)),gx.lang.isBooleanType(this.PropTypes[c])&&(e=e?1:0),gx.fn.setHidden(this.getHiddenName(this.Properties[c]),e))}}}}}(gx.$);
gx.printing={loaded:!1,tries:0,waitInterval:100,IFrameId:"gxprintHelper_Iframe",print:function(c){if(c&&gx.lang.emptyObject(c.printerRule))this.printDirect(c);else{if(!this.loaded){var f='<applet name="GeneXusPrintAppletForWindows" archive="'+gx.util.resourceUrl("printingappletsigned.jar",!0)+'" code="com/genexus/printing/Printer.class" width="0" height="0">',f=f+('<param name="path" value="'+gx.util.resourceUrl(gx.basePath,!0)+'">');document.body.appendChild(gx.html.nodesFromText(f+'<p>No java plugin detected. Click <a href="http://java.com/en/download/" target="new">here</a> to download it.</p></applet>')[0]);
this.loaded=!0}0==this.tries?this.printWhenReady(c):gx.dbg.logMsg("Already trying to print a document.")}},printDirect:function(c){var f=gx.dom.byId(gx.printing.IFrameId);f||(f=document.createElement("IFRAME"),f.id=gx.printing.IFrameId,f.style.visibility="hidden",document.body.appendChild(f));f.src=c.reportFile;f.onload=function(){this.contentWindow.print();this.onload=null;this.src=""}},printWhenReady:function(c){this.tries>=60*this.waitInterval?(this.tries=0,gx.dbg.logMsg("The printing applet was not loaded.")):
(this.tries++,this.isReady()?(document.GeneXusPrintAppletForWindows.printReport(c.reportFile,c.printerRule,"GXPRN.INI"),this.tries=0):setTimeout(function(){gx.printing.printWhenReady(c)},this.waitInterval))},isReady:function(){var c=document.GeneXusPrintAppletForWindows;return c&&("function"==typeof c.isReady||"unknown"==typeof c.isReady)?c.isReady():!1}};
gx.fn=function(c){var f=/((?:(?:MP)?W[0-9a-zA-Z\-]{4}[\S]*)*)gxHTMLWrp((?:MP)?W[0-9]{4}[\S]*)*/,e=function(b){b=b.replace(/\\/g,".");return gx.gen.isDotNet()?b.replace(/\.aspx$/,""):b};return{attachedControls:function(){return gx.attachedControls},closeWindow:function(b){if("string"==typeof b){if(this.closeFromServer(b))return;b=[]}b||(b=[]);if(gx.popup.ispopup()){var a=gx.popup.getPopup(),d=a.url?gx.util.noParmsUrl(a.url):"";if(!a.frameWindow||-1!=a.frameWindow.location.href.search(d+"(\\?.*)?$")||
gx.grid.drawAtServer){a.close(b);return}}-1!=location.href.indexOf("gxCalledAsPopup")?this.closeWindowImpl():(b=gx.ajax.getCallerUrl(gx.popup.popuplvl()),gx.lang.emptyObject(b)?this.closeWindowImpl():(gx.ajax.windowClosed(-1),b=gx.ajax.absoluteurl(b),gx.spa.started?(gx.spa.redirect(b),gx.ajax.enableForm()):location.href=b))},closeWindowImpl:function(){gx.util.browser.isIE()?window.close():0<history.length?history.back():window.location.assign("about:blank")},closeFromServer:function(b){try{if(window.parent&&
window.parent.gx)return gx.popup.ispopup()&&!gx.grid.drawAtServer&&!window.parent.gx.grid.drawAtServer?gx.fn.closeWindow(gx.json.evalJSON(b)):window.parent.gx.fn.closeWindow(gx.json.evalJSON(b)),!0}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","closeFromServer")}return!1},closeWindowServerScript:function(b,a){gx.evt.execLoad=!1;b&&(gx.evt.clinav=!0,gx.ajax.pushReferer(gx.popup.popuplvl()));this.closeWindow(a)},invalidEmptyValue:function(b){if(gx.lang.emptyObject(b.s)){for(var a=b.v.length,d=0;d<a;d++)if(b.v[d][0]===
b.s)return!1;return!0}return!1},trimSelectValue:function(b,a){return"int"==a?gx.text.trim(b):gx.text.rtrim(b)},selectedDescription:function(b,a){for(var d=b.v.length,c=0;c<d;c++)if(this.trimSelectValue(b.v[c][0],a)===b.s)return b.v[c][1];return null},setGridCheckBoxValue:function(b,a,d,c){this.setCheckBoxValue(b+"_"+a,d,c)},setGridDecimalValue:function(b,a,d){return this.setGridControlValue(b,a,d)},setGridControlValue:function(b,a,d,c){if(void 0!==a)return this.setControlValue(b+"_"+a,d,c)},setVarValues:function(b,
a){for(var d=b.length,c=0;c<d;c++){var e=gx.fn.vStructForVar(b[c]);e&&e.v2v?e.v2v(a[c]):eval(b[c]+'="'+a[c]+'"')}},setControlOldValue:function(b,a){if(b)if("radio"==b.type)for(var d=gx.dom.byName(gx.dom.id(b)),c=d.length,e=0;e<c;e++)d[e].setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a);else b.setAttribute(gx.csv.GX_OLD_VALUE_ATTRIBUTE,a)},setControlValue:function(b,a,d){b=gx.csv.ctxControlId(b);this.setControlValueAny(b,a,d)},setControlValueAny:function(b,a,d){var c=gx.O.getValidStructFld(b),e=gx.dom.el(b);
if(c&&("dtime"==c.type||"date"==c.type))""===a?a=gx.date.nulldate_toc(c.len,c.dec):"string"==typeof a&&(a=new gx.date.gxdate(a));a instanceof gx.date.gxdate?gx.lang.emptyObject(c)||(a=gx.date.formatDateTime(c.dec,c.len,gx.dateFormat,a)):gx.lang.instanceOf(a,Number)||"undefined"!=typeof gx.num.dec&&a instanceof gx.num.dec.bigDecimal?!gx.lang.emptyObject(c)&&void 0!=c.pic&&(a=gx.num.formatNumber(a,c.dec,c.pic,c.len,c.sign,!1)):"string"==typeof a&&null!=e&&"SPAN"==e.nodeName&&!gx.lang.emptyObject(c)&&
void 0!=c.isPwd&&(a=gx.text.formatString(a,c.len,c.isPwd));this.persistGridControlValue(b,a);null!=e&&"SPAN"!=e.nodeName?this.setControlValue_impl(e,a,d):gx.fn.setHidden(b,a);null!=e&&"SPAN"==e.nodeName&&(b=e);var f=!1,f=c?c.multiline:null!=e&&"TEXTAREA"==e.tagName;this.setControlValue_span_safe(b,a,d,f)},setDecimalValue:function(b,a){this.setControlValue(b,a)},toDecimalValue:function(b,a,d){return gx.num.parseFloat(b,a,d)},toDatetimeValue:function(b,a){return new gx.date.gxdate(b,a)},setCheckBoxValue:function(b,
a,d){try{var b=gx.csv.ctxControlId(b),c=gx.dom.form()[b];null==c&&(c=gx.dom.byId(b));c&&(c.checked=a.toString()==d.toString(),c.value=a)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setCheckBoxValue")}},persistGridControlValue:function(b,a,d){var c=b.lastIndexOf("_");if(-1!=c&&(d=d?d:gx.O.getValidStructFld(b.substring(0,c)))&&d.gxgrid)c=b.substring(c+1),4<c.length?(c=c.substring(4,c.length),(c=gx.O.getGrid(d.gxgrid.gridName+"_"+c))&&c.persistControlValue(b,a,d)):d.gxgrid.persistControlValue(b,a,d)},setControlValue_span_safe:function(b,
a,d,c){"string"==typeof b&&(b=gx.dom.el("span_"+b));if(null!=b){if("SPAN"!=b.nodeName)var e="span_",e="string"==typeof b?e+b:e+gx.dom.id(b),b=gx.dom.byId(e);this.setControlValue_fmt(b,a,d,c)}},setControlValue_fmt:function(b,a,d,c){try{if(null!=b)if(1==d){var e=b.getAttribute("gxlink");!gx.lang.emptyObject(e)&&(null!=b.firstChild&&"A"==b.firstChild.nodeName)&&(b=b.firstChild);gx.html.setInnerHtml(b,a,!0)}else{0==d&&"string"==typeof a&&(a=a.replace(/ +/g," "));for(e=b;null!=b.firstChild&&"#text"!=b.firstChild.nodeName;)b=
b.firstChild;0==d&&(null==b.firstChild||"#text"!=b.firstChild.nodeName)&&"A"!=b.nodeName?gx.html.setInnerText(e,a,d,c):gx.html.setInnerText(b,a,d,c)}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setControlValue_fmt")}},setControlValue_impl:function(b,a,d){"string"==typeof b&&(b=gx.dom.el(b));a instanceof gx.date.gxdate&&(a=a.getString());null!=b&&(null!=b&&"undefined"!=typeof b.length&&"undefined"!=typeof b[0]&&"radio"==b[0].type?this.setRadioValue(b,a):gx.dom.isEditControl(b)||"textarea"==b.type?b.value=
gx.lang.decodeValue(a):void 0!=b.value?b.value=a:this.setControlValue_span_safe(b,a,d))},setGridComboBoxValue:function(b,a,d){this.setComboBoxValue(b+"_"+a,d)},setComboBoxValue:function(b,a){var d=gx.util.browser.isIE(),b=gx.csv.ctxControlId(b),c=gx.dom.byId(b);if(c){var e="",f=gx.O.getValidStructFld(b);gx.lang.emptyObject(f)||(e=f.type);"int"==e?a=gx.text.trim(a):"date"==e&&a instanceof gx.date.gxdate?a=a.getStringWithFmt("Y4MD"):"decimal"!=e&&(a=gx.text.rtrim(a));var j=a,k=!1;try{for(var m=c.options.length,
l,q=0;q<m;q++){var o=c.options[q];if(gx.lang.isNumericType(e)?Number(o.value)==Number(a):gx.text.trim(o.value)==gx.text.trim(a)){if(j="undefined"!=typeof o.innerText?o.innerText:o.text,c.selectedIndex=q,k=!0,o.setAttribute("selected","selected"),l=o,d)break}else d||o.removeAttribute("selected")}l&&(l.value!=c.value&&gx.util.browser.isFirefox())&&gx.dom.redrawControl(c);k||(c.selectedIndex=0);0<f.grid&&this.persistGridControlValue(b,a,f)}catch(p){gx.dbg.logEx(p,"gxfrmutl.js","setComboBoxValue")}this.setControlValue_span_safe(b,
j,0)}},loadComboBox:function(b,a){this.setComboValues(b,a)},setGridComboValues:function(b,a){if(0==this.controlGridId(b))this.setComboValues(b,a);else for(var d=1;999>d;d++){var c=gx.text.padr(d.toString(),4,"0"),c=gx.dom.el(b+"_"+c);if(null==c)break;this.setComboValues(c.name,a)}},setComboValues:function(b,a){var d=gx.dom.el(b),c=gx.util.browser;if(null!=d){var e="";-1!=d.selectedIndex&&(e=d.options[d.selectedIndex].value);for(;d.options.length>a.length;)d.remove(d.options.length-1);for(;a.length>
d.options.length;){var f=document.createElement("OPTION");d.options.add(f)}for(var j=a.length,k=0;k<j;k++)if(f=d.options[k],f.value=a[k][0],c.isIE()&&9<=c.ieVersion()?f.innerText!=a[k][1]&&(f.innerText=a[k][1]):f.text!=a[k][1]&&(f.text=a[k][1]),Number(f.value)?Number(f.value)==Number(e):gx.text.trim(f.value)==gx.text.trim(e))d.selectedIndex=k;if(0==d.options.length)d.selectedIndex=-1;else if(-1==d.selectedIndex||d.selectedIndex>d.options.length-1)d.options[0].selected=!0}},getControlRefById:function(b){return(b=
this.validStruct(b))?0==b.grid?this.getControlRef(b.fld,!1):this.getControlGridRef(b.fld,b.grid):null},getControlRef:function(b,a){a||(b=gx.csv.ctxControlId(b));if("FORM"==b)return document;var d=gx.dom.el(b);return null!=d?d:null},getControlRef_list:function(b){var a=gx.dom.byName(b);if(null!=a)return a;b=gx.dom.byId(b);return null!=b?[b]:null},screen_CtrlRef:function(b){b=this.getControlGridRef(b,this.controlGridId(b));return!gx.lang.emptyObject(b)?("hidden"==b.type&&(b=gx.dom.el("span_"+gx.dom.id(b))),
b):null},screen_CtrlId:function(b){return this.getControlGridId(b,this.controlGridId(b))},getControlGridId:function(b,a,d){b=gx.csv.ctxControlId(b);if(gx.dom.el(b))return b;try{if(0==a)return b;void 0==d&&(d=this.currentGridRow(a));return b+"_"+d}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","getControlGridId")}},getControlGridRef:function(b,a,d){var b=gx.csv.ctxControlId(b),c=gx.dom.el(b);if(c)return c;try{if(0==a)return gx.dom.el(b);void 0==d&&(d=this.currentGridRow(a));if(c=gx.dom.el(b+"_"+d))return c;
var e=gx.O.getComponentData(b);if(e)return gx.dom.el("gxHTMLWrp"+e.Prefix+d)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","getControlGridRef")}},setCurrentGridRow:function(b,a){if("0000"!=a)try{return gx.currentRows[b]=a}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","setCurrentGridRow")}},currentGridRowImpl:function(b){try{return gx.currentRows[b]}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","currentGridRowImpl")}},currentGridRow:function(b){b=this.currentGridRowImpl(b);return void 0==b?"0001":b},gridDuplicateKey:function(b){b=
gx.fn.validStruct(b);if(void 0!=b){var a=b.gxgrid;if(null!=a&&(a=a.updateControlValue(b,!0)))return a.gxHasDuplicateKey()}return!1},firstGridControl:function(b,a){var d=gx.fn.controlIds(),c=d.length;for(i=0;i<c;i++){var e=gx.fn.validStruct(d[i],a);if(void 0!=e&&e.grid==b)return d[i]}return-1},lastGridControl:function(b,a){var d=gx.fn.controlIds();for(i=d.length-1;0<=i;i--){var c=gx.fn.validStruct(d[i],a);if(void 0!=c&&c.grid==b)return d[i]}return-1},getGridDateTimeValue:function(b,a){var d=this.getControlValue(b+
"_"+a);return new gx.date.gxdate(d,gx.dateFormat)},getGridDecimalValue:function(b,a,d,c){return this.getDecimalValue(b+"_"+a,d,c)},getGridIntegerValue:function(b,a,d){return this.getIntegerValue(b+"_"+a,d)},getGridControlValue:function(b,a){return this.getControlValue(b+"_"+a)},getGridCheckBoxValue:function(b,a,d,c){return this.getCheckBoxValue(b+"_"+a,d,c)},getCheckBoxValue:function(b,a,d){var b=gx.csv.ctxControlId(b),c=gx.dom.form()[b];null==c&&(ControlList=gx.dom.byName(b),null!=ControlList&&(c=
ControlList[0]));return null==c?0:c.checked?a:d},getControlValue:function(b,a){return this.getControlValue_impl(gx.csv.ctxControlId(b),a)},getControlValue_impl:function(b,a){try{var d=gx.O&&gx.O.getValidStructFld(b),c;if(d&&d.gxgrid&&!d.gxgrid.isUsercontrol||!d||!d.gxgrid){var e=gx.dom.el(b);if(null!=e&&gx.O){d&&!e.gxtype&&(e.gxtype={type:d.type,len:d.len,dec:d.dec});if("hidden"==e.type||"text"==e.type||"textarea"==e.type||"checkbox"==e.type)c=e.value;else if("radio"==e.type)c=gx.fn.getRadioValue(gx.dom.byName(b));
else if("SELECT"==e.nodeName&&0<e.options.length?c=-1!=e.selectedIndex?"screen"==a?e.options[e.selectedIndex].text:e.options[e.selectedIndex].value:"screen"==a?e.options[0].text:e.options[0].value:d&&("date"!=d.type&&"dtime"!=d.type&&"bits"!=d.type&&"audio"!=d.type&&"video"!=d.type)&&(c=e.value),"IMG"==e.nodeName||"INPUT"==e.nodeName&&"image"==e.type)c=e.getAttribute("src");if(void 0!==c)return d&&"boolean"==d.type?gx.lang.gxBoolean(c):c}e=gx.dom.el("span_"+b);if(null!=e){var f=gx.fn.getHidden(b);
return void 0!=f?f:gx.fn.getControlValue_span(e)}e=gx.dom.form()[b];if(null!=e)return this.getControlValueInt(e);e=gx.dom.byId("_"+b);if(null!=e)return e.value;(ControlList=gx.dom.byName(b))&&0==ControlList.length&&(ControlList=gx.dom.byName("_"+b));if(null!=ControlList){for(var j=ControlList.length,d=0;d<j;d++)if(e=ControlList[d],null!=e)return this.getControlValueInt(e);if(e=ControlList[0])return e.value}}if(null==e)return"nohidden"===a?null:gx.fn.getHidden(b)}catch(k){gx.dbg.logEx(k,"gxfrmutl.js",
"getControlValue_impl")}return""},setRadioValue:function(b,a){var b=gx.csv.ctxControlId(b),d=gx.dom.byName(b);if(null!=d)for(var c=d.length,e=0;e<c;e++)if(gx.text.ltrim(d[e].value)==gx.text.ltrim(a)){d[e].checked=!0;break}},getRadioValue:function(b){for(var a=b.length,d=0;d<a;d++)if(b[d].checked)return b[d].value;return""},getControlValueInt:function(b){if(void 0!=b.length&&"SELECT"!=b.tagName&&"undefined"!=typeof b[0]&&"radio"==b[0].type)return this.getRadioValue(b);if("checkbox"==b.type)return b.checked;
if("SPAN"==b.tagName){var a=gx.fn.getHidden(gx.dom.id(b));return void 0!=a?a:gx.fn.getControlValue_span(b)}if("INPUT"==b.tagName&&"text"==b.type&&(a=gx.dom.id(b),gx.O)){var d=gx.O.getValidStructFld(a);if(d&&"undefined"!=typeof d.pic){if("int"==d.type)return this.getIntegerValue(a,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"");if("decimal"==d.type)return this.getDecimalValue(a,-1!=d.pic.indexOf(",")?gx.thousandSeparator:"",gx.decimalPoint)}}return b.value},getControlValue_span:function(b){for(;b&&
!b.nodeValue;)b=b.childNodes[0];return b&&b.nodeValue?b.nodeValue:""},getDateValue:function(b){return this.getDateTimeValue(b)},getDateTimeValue:function(b){try{var a=this.getControlValue(b,"nohidden");if(!gx.lang.emptyObject(a))return new gx.date.gxdate(a,gx.dateFormat);a=gx.fn.getHidden(gx.csv.ctxControlId(b));return new gx.date.gxdate(a,"Y4MD")}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","getDateValue")}return""},getIntegerValue:function(b,a){var d=0,d=gx.O?gx.O.getValidStructFld(b):null,c=this.getControlValue(b);
d&&c&&(c=gx.num.extractValue(d.pic,c));if(gx.lang.isArray(c))return c;c="undefined"!=typeof c?c.toString():"";d=c.length<gx.num.maxNumericPrecision()||"undefined"==typeof gx.num.dec?gx.num.parseInt(c,10,a):(new gx.num.dec.bigDecimal(gx.text.replaceAll(c,a,""))).setScale(0,gx.num.dec.ROUND_UP).toString();return isNaN(d)?0:d},getDecimalValue:function(b,a,d){var c=gx.O?gx.O.getValidStructFld(b):null,b=this.getControlValue(b);c&&b&&(b=gx.num.extractValue(c.pic,b));if(gx.lang.isArray(b))return b;a=gx.num.parseFloat(b||
"",a,d);return isNaN(a)?0:a},getBlobValue:function(b){var a=gx.dom.el("Object_"+b);if(null!=a){if(a.data)return a.data}else if(a=gx.dom.el("Link_"+b),null!=a)return a.href;return""},getVarControlMap:function(b){for(var a in gx.O.VarControlMap)if("function"!=typeof a){var d=gx.O.VarControlMap[a];if(d.id==b||gx.O.CmpContext+d.id==b)return a}return null},getVarControlMapForVar:function(b){for(var a in gx.O.VarControlMap)if("string"==typeof a&&a==b)return gx.O.VarControlMap[a];return null},v2cMap:function(b){var a=
this.getVarControlMapForVar(b);if(null!=a){var d="";"number"==typeof a.grid&&0!=a.grid&&(d="_"+gx.fn.currentGridRowImpl(a.grid));gx.fn.setHidden(gx.O.CmpContext+a.id+d,gx.O[b])}},c2vMap:function(b){var a=this.getVarControlMapForVar(b);if(null!=a){var d="";"number"==typeof a.grid&&0!=a.grid&&(d="_"+gx.fn.currentGridRowImpl(a.grid));gx.O[b]=gx.fn.getHidden(gx.O.CmpContext+a.id+d)}},depsToVars:function(b){for(var a=0;a<b.length;a++){var d=b[a],c=gx.fn.vStructForVar(d);!gx.lang.emptyObject(c)&&"function"==
typeof c.c2v?c.c2v():this.c2vMap(d)}},verticalFormula:function(b,a,d,c,e,f){var j=gx.fn.vStructForVar(b);gx.lang.emptyObject(j)?this.v2cMap(b):j.v2c();for(var k=gx.fn.currentGridRowImpl(d),m=gx.fn.getGridObj(d),l=0,q=!1,o=m.grid.rows.length,p=0;p<o;p++){var r=m.grid.rows[p],s=r.gxDeleted(),u=r.gxExists(),t=r.gxIsMod();if(!s&&(u||t))gx.fn.setCurrentGridRow(d,r.gxId),f&&0<f.length?this.depsToVars(f):!gx.lang.emptyObject(j)&&"function"==typeof j.c2v?j.c2v():this.c2vMap(b),c.call(gx.O)&&(q=!0,l=e(p,l))}gx.fn.setCurrentGridRow(d,
k);f&&0<f.length?this.depsToVars(f):!gx.lang.emptyObject(j)&&"function"==typeof j.c2v?j.c2v():this.c2vMap(b);q||(l=a);return l},sumFrm:function(b,a,d,c,e,f,j){return gx.fn.verticalFormula(b,a,e,f,function(a,e){var f=gx.num.parseFloat(gx.O[b],d,c);return 0==a?f:e+f},j)},maxFrm:function(b,a,d,c,e,f,j){return gx.fn.verticalFormula(b,a,e,f,function(a,e){var f=gx.num.parseFloat(gx.O[b],d,c);return 0==a?f:f>e?f:e},j)},minFrm:function(b,a,d,c,e,f,j){return gx.fn.verticalFormula(b,a,e,f,function(a,e){var f=
gx.num.parseFloat(gx.O[b],d,c);return 0==a?f:f<e?f:e},j)},averageFrm:function(b,a,d,c,e,f,j){return gx.fn.verticalFormula(b,a,e,f,function(a,e){var f=gx.num.parseFloat(gx.O[b],d,c);return 0==a?f:(e*a+f)/(a+1)},j)},countFrm:function(b,a,d,c,e){return gx.fn.verticalFormula(b,a,d,c,function(a,b){return 0==a?1:b+1},e)},serialRule:function(b,a,c,e,f){f=f||gx.O;if("INS"!=gx.fn.getGridRowMode(gx.fn.gridLvl(c),c))return f[b];gx.lang.emptyObject(f[a])&&(f[a]=f[b]+e,(c=gx.fn.vStructForVar(a))&&c.v2c(),(b=f.VarControlMap[b])&&
gx.fn.setControlValue(b.id,f[a]));return f[a]},setReturnParms:function(b,a,c){try{if(b&&a&&c){var e=a.length;if(e==c.length){gx.setGxO(b);for(var f=null,h=0;h<e;h++){var j=a[h];if(j){var k=c[h],m=gx.fn.vStructForVar(j);gx.lang.emptyObject(m)&&(m=gx.fn.vStructForHC(j));if(m){var l=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(m.fld));gx.fn.isAccepted(l)&&(f=l,gx.evt.execOnchange(l));m.v2v&&(m.v2v(k),m.v2c());b.refreshDependantGrids(m)}else b.setVariable(j,k)}}f&&gx.fn.setFocus(f)}}}catch(q){gx.dbg.logEx(q,
"gxfrmutl.js","setReturnParms")}},isOutputParm:function(b){return b&&b.IOType&&("out"==b.IOType||"inout"==b.IOType)?!0:!1},checkPopupFocus:function(b){if(gx.popup.ispopup()){var a=gx.popup.getPopup();if(a&&a.frameDocument&&(b.ownerDocument?b.ownerDocument:b.document).URL!=a.frameWindow.location.href)return a.setFocusFirst(),!1}return!0},persistControlProperty:function(b,a,c){b=gx.fn.screen_CtrlId(gx.csv.ctxControlId(b));gx.usrPtys[b]||(gx.usrPtys[b]={});gx.usrPtys[b][a.toLowerCase()]=c},setCtrlProperty:function(b,
a,c){if(gx.O){var e=null,e="FORM"==b?document:gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b));null!=e&&(this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(e,a,c))}else gx.fx.obs.addObserver("gx.onready",this,gx.fn.setCtrlProperty.closure(this,arguments),{single:!0})},setGridCtrlProperty:function(b,a,c){var e=gx.fn.screen_CtrlRef(b);null!=e&&(this.setCtrlPropertyImpl(e,a,c),e=e.parentElement,"TD"==e.tagName&&(this.persistControlProperty(b,a,c),this.setCtrlPropertyImpl(e,a,c)))},setCtrlPropertyImpl:function(b,
a,d){if(null!=b){if(b==document&&("Class"==a||"Backcolor"==a))b=document.body;var e=gx.O.getValidStructFld(b.id);if(!("Enabled"===a||"Visible"===a)||!e||!(0<e.grid&&gx.fn.rowIsRemoved(e.grid,gx.fn.controlRowId(b)))){var f=b,e={control:f,property:a,value:d};gx.fx.obs.notify("gx.control.onbeforepropertychange",[e]);if(!e.cancel){switch(a){case "Caption":this.setCtrlCaption(b,d);break;case "Tooltiptext":b.title=d;break;case "Invitemessage":b.placeholder=d;break;case "Visible":if("INPUT"==b.nodeName&&
"button"==b.type)this.setButtonVisibility(b,!this.propertyValueFalse(d));else{"INPUT"==b.nodeName&&("checkbox"==b.type&&"SPAN"==b.parentNode.nodeName?b=b.parentNode:"radio"==b.type&&(e=c(b).parents(".gx-radio-button"),0<e.length&&(b=e[0])),(e=gx.html.multimediaUpload.getContainer(b))&&(b=e));var e=this.propertyValueFalse(d),h=b.gxusrdisabled?b.gxusrdisabled:!1;if(e){var j=gx.dom.el("span_"+b.id);this.setVisible(b,!e);j&&this.setVisible(j,!e)}else(j=this.getRONode(b.id,h))&&this.setVisible(j,h),this.setVisible(b,
!h);gx.fn.setDateCtrlProperties(b,!h,!e)}gx.fn.checkAttachedProperty(b.id,a,d);break;case "Enabled":e=this.propertyValueFalse(d);if("hidden"===b.type||"SPAN"===b.tagName&&e)return;if("INPUT"===b.nodeName&&"radio"===b.type){a=gx.dom.byName(gx.dom.id(b));d=a.length;for(f=0;f<d;f++)this.setEnabledProperty(a[f],!e);return}(gx.dom.isEditControl(b)||"textarea"===b.type||"file"===b.type||"SELECT"===b.tagName)&&"password"!==b.type?(j=this.getRONode(b.id,e),gx.fn.isVisible(b,0)||j&&gx.fn.isVisible(j,0)?(j&&
this.setVisible(j,e),this.setEnabledProperty(b,!e),this.setVisible(b,!e)):this.setEnabledProperty(b,!e),gx.fn.setDateCtrlProperties(b,!e,!0),gx.fn.checkAttachedProperty(b.id,a,d)):this.setEnabledProperty(b,!e);break;case "Class":this.setCtrlClass(b,d);break;case "Columnclass":(e=b.parentNode)&&"TD"==e.tagName&&this.setCtrlClass(e,"gx-attribute "+d);break;case "Link":this.setCtrlLink(b,d);break;case "Linktarget":this.setCtrlLinkTarget(b,d);break;case "Backcolor":if((e=gx.color.html(d))&&void 0==b.gxGridName)b.style.backgroundColor=
e.Html;break;case "Forecolor":if(e=gx.color.html(d))b.style.color=e.Html;break;case "Fontbold":e=this.propertyValueFalse(d);b.style.fontWeight=e?"normal":"bold";break;case "Fontitalic":e=this.propertyValueFalse(d);b.style.fontStyle=e?"normal":"italic";break;case "Fontunderline":e=this.propertyValueFalse(d);b.style.textDecoration=e?"none":"underline";break;case "Fontstrikethru":e=this.propertyValueFalse(d);b.style.textDecoration=e?"none":"line-through";break;case "Fontname":b.style.fontFamily=d;break;
case "Fontsize":b.style.fontSize=d+"pt";break;case "Filename":this.setBlobFilename(b,d);break;case "Filetype":this.setBlobFiletype(b,d);break;case "URL":this.setBlobUrl(b,d);break;case "IsBlob":this.setMultimediaType(b,d);break;case "Bitmap":b.src=d;break;case "Multimedia":this.setMultimediaValue(b,d);break;case "Jsonclick":b.jsevent=d;break;case "Source":e=d;h=e.indexOf("?");0<h&&(e=e.substring(0,h));b.src=-1==e.indexOf(":")&&-1==e.indexOf("/")?gx.ajax.objectUrl(d):gx.util.resourceUrl(d,!0);gx.evt.attach(b,
"load",gx.dom.autofitIFrame);break;case "Values":if("SELECT"==b.tagName||"SPAN"==b.tagName)if(d=gx.json.evalJSON(d),"SELECT"==b.tagName)!1!=d.isset&&(gx.fn.loadComboBox(b.id,d.v),gx.fn.setComboBoxValue(b.id,d.s));else{var h=b.id.substring(5),j="",k=d.s,e=gx.O.getValidStructFld(h);gx.lang.emptyObject(e)||(j=e.type);k=gx.fn.trimSelectValue(k,j);d.s=k;gx.fn.setControlValue_span_safe(h,gx.fn.selectedDescription(d,j))}break;case "Width":b.width&&(b.width=d);b.style.width=gx.dom.addUnits(d);break;case "Height":b.height&&
(b.height=d),b.style.height=gx.dom.addUnits(d)}if(b=gx.dom.id(b))b=b+"_"+a,gx.fn.isHidden(b)&&gx.fn.setHidden(b,d);gx.fx.obs.notify("gx.control.onafterpropertychange",[{control:f,property:a,value:d}])}}}},setEnabledProperty:function(b,a,c){var e=gx.dom.id(b);if(!gx.lang.gxBoolean(a)||!gx.fn.isAccepted(b,!1)){if(!0==gx.csv.validating&&a&&null==gx.csv.validActivatedControl&&b!=gx.csv.lastControl){var f=gx.O.getValidStructId(e);f>gx.O.fromValid&&f<=gx.O.toValid&&(gx.csv.validActivatedControl=b)}a?delete gx.disabledControls[e]:
gx.util.addOnce(gx.disabledControls,b,e);b.gxusrdisabled=!a;b.disabled=b.gxdisabled?!0==b.gxdisabled?!0:b.gxusrdisabled:b.gxusrdisabled;(void 0===c||c)&&this.setEnabled(b,a)}},setEnabled:function(b,a){if(this.disabledAsSpan(b)){var d;try{"checkbox"==b.type&&(d=b.parentNode),"radio"==b.type&&(d=c(b).parents(".gx-radio-button")[0])}catch(e){}if(gx.lang.booleanValue(a)){if(d&&0==d.className.indexOf("Readonly")&&(d.className=d.className.substring(8)),this.isVisible(b))this.setVisible(b,1),(d=this.getRONode(b.id,
!0))&&this.setVisible(d,0)}else if(d&&0>d.className.indexOf("Readonly")&&(d.className="Readonly"+d.className),this.isVisible(b)&&"password"!=b.type&&"image"!=b.type&&"checkbox"!=b.type)if(d=this.getRONode(b.id,!0)){this.setVisible(b,0);this.setVisible(d,1);var f=gx.O.getValidStructFld(b),h=0;!gx.lang.emptyObject(f)&&f.format&&(h=f.format);this.setControlValue_span_safe(d,gx.fn.getControlValue(gx.dom.id(b),"screen")||b.value,h,"textarea"==b.type)}}},disabledAsSpan:function(b){return"IMG"!=b.tagName},
setVisible:function(b,a){b.style.display=0==a?"none":this.displayByType(b.nodeName);var d=gx.O.getValidStructFld(b),e=b.parentNode;a&&d&&d.gxgrid&&!d.gxgrid.grid.gxIsFreestyle&&null!=e.getAttribute("colindex")?d.gxgrid.applyPropEntireColumn(e.getAttribute("colindex"),"Visible",a):gx.fn.rowGridId(b)&&(d=c(b).find("table")[0])&&this.setVisible(d,a)},getRONode:function(b,a){if(gx.lang.emptyObject(b))return null;var c=gx.dom.byId(b),e="span_"+b,f=gx.dom.byId(e);if(null!=f)return f;if(!a||null==c)return null;
f=document.createElement("SPAN");f.setAttribute("id",e);this.setVisible(f,!1);f.className="Readonly"+c.className;f.appendChild(document.createTextNode(c.value||""));c.parentNode.insertBefore(f,c);return f},setDateCtrlProperties:function(b,a,d){var e=gx.dom.el(gx.dom.id(b)+"_dp_trigger");e&&c(e).toggle(a);if(e=c(gx.dom.el(gx.dom.id(b)+"_dp_container")))b.Flat&&c(b).hide(),b=c(".calendar",e),e.toggle(a&&d||!a&&d),b&&b.toggle(a&&d)},getGridCtrlProperty:function(b,a,c){try{if(0!=b){var e=this.getGridObj(b);
if(e){var f=e.grid.getColumnByHtmlName(a);if(f)return f[c.toLowerCase()]}}else return this.getCtrlProperty(a,c)}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","getGridCtrlProperty")}return""},getCtrlProperty:function(b,a){var c=gx.uc.getUserControlObj(gx.uc.userControlContainerId(b));if(null!=c)return c[a];c=this.screen_CtrlRef(b);if(null!=c)return"Text"==a?this.getControlValue(b,"screen"):this.getCtrlProperty_impl(c,a)},getCtrlProperty_impl:function(b,a){if(null==b)return"";switch(a){case "Tooltiptext":return b.title;
case "Invitemessage":return b.placeholder;case "Visible":return"none"!=b.style.display;case "Enabled":return 0!=gx.lang.emptyObject(b.disabled);case "Class":return b.className;case "Backcolor":return gx.color.css(b.style.backgroundColor);case "Forecolor":return gx.color.css(b.style.color);case "Width":return gx.dom.dimensions(b).w;case "Height":return gx.dom.dimensions(b).h;case "Caption":return this.getCtrlCaption(b);case "Fontbold":return"bold"==b.style.fontWeight;case "Fontitalic":return"italic"==
b.style.fontStyle;case "Fontunderline":return"underline"==b.style.textDecoration;case "Fontstrikethru":return"line-through"==b.style.textDecoration;case "Fontname":return b.style.fontFamily;case "Fontsize":var c=parseInt(b.style.fontSize);return isNaN(c)?12:c}},displayByType:function(b){switch(b){case "TABLE":return!gx.util.browser.isIE()||8<=gx.util.browser.ieVersion()?"table":"block";case "P":case "DIV":return"block"}return""},setCtrlCaption:function(b,a){try{switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var c=
b.getAttribute("gxformat"),e=gx.O.getValidStructFld(b);null==c&&(c=!gx.lang.emptyObject(e)&&e.format?e.format:0);var f=!1;e&&(f=e.ctrltype?e.multiline:!0);gx.fn.setControlValue_fmt(b,a,c,f);return;case "INPUT":"checkbox"!=b.type&&(b.value=a);return}"#document"==b.nodeName&&(b.title=a)}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","setCtrlCaption")}},getCtrlCaption:function(b){switch(b.tagName){case "SPAN":case "DIV":case "FIELDSET":var a=b.getAttribute("gxformat");if(null!=a&&"1"==a)return b.innerHTML;for(;null!=
b.firstChild&&"#text"!=b.firstChild.nodeName;)b=b.firstChild;return"undefined"!=typeof b.innerText?b.innerText:b.textContent||b.text;case "INPUT":if("checkbox"!=b.type)return b.value;break;default:return""}},propertyValueFalse:function(b){return"string"==typeof b&&(b=b.toLowerCase(),"false"==b||0==gx.num.parseFloat(b))?!0:0==b},setButtonVisibility:function(b,a){var c=a?"":"none",e=b.parentNode;!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=c,e=e.parentNode,!gx.lang.emptyObject(e)&&
"SPAN"==e.nodeName&&(e.style.display=c,e=e.parentNode,!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=c,e=e.parentNode,!gx.lang.emptyObject(e)&&"SPAN"==e.nodeName&&(e.style.display=c))));b.style.display=c},setBlobValue:function(b,a){this.setBlobUrl(gx.dom.el(b)||gx.dom.el("Object_"+b),a)},setBlobFilename:function(b,a){if(null!=b){var c=gx.O.getValidStructFld(b);c&&gx.fn.setHidden(c.fld+"_Filename",gx.text.trim(a))}},setBlobFiletype:function(b,a){if(null!=b){var c=gx.O.getValidStructFld(b);
c&&gx.fn.setHidden(c.fld+"_Filetype",gx.text.trim(a));c=b;"INPUT"==c.nodeName&&"file"==c.type&&(c=gx.dom.el("Object_"+b.id));null!=c&&(a=gx.util.getContentType(a),this.setObjectCtrlType(c,a),gx.fn.setVisible(c,!0))}},resolveResourceUrl:function(b,a){if(""==b)return a?gx.ajax.getImageUrl(gx,"blankImage"):"";if(!gx.ajax.isabsoluteurl(b))if(gx.ajax.isRelativeToHost(b)){if(0!=b.toLowerCase().indexOf("/"+gx.basePath.toLowerCase()))return gx.util.resourceUrl(gx.basePath+b,!1)}else return gx.util.resourceUrl(gx.basePath+
gx.staticDirectory+b,!1);return b},setBlobUrl:function(b,a){var c=gx.html.multimediaUpload.getContainer(b);if(c){var e=this.resolveResourceUrl(a,!1);gx.html.multimediaUpload.setPreviewImage(c,e);gx.html.multimediaUpload.setPreviewLink(c,e)}else if(!a.match(/^[a-z]:[\S]*/i)&&null!=b){c=b;e="INPUT"==c.nodeName&&"file"==c.type;if(""===a)if(e&&gx.util.browser.isIE()){var f=c.parentNode,h=document.createElement("div");h.innerHTML=c.outerHTML;f.removeChild(c);c=f.appendChild(h.firstChild)}else c.value=
"";e&&(c=gx.dom.el("Object_"+b.id));null!=c&&(e=gx.util.getContentTypeFromExt(a),c=this.setObjectCtrlType(c,e));null!=c?"IMG"==c.tagName?(a=this.resolveResourceUrl(a,!0),c.src=a):(c.data=a||"about:blank",gx.fn.setVisible(c,!0),this.resizeObject(c),gx.dom.redrawControl(c)):(c=gx.dom.el("Link_"+b.id),null!=c&&(c.style.display=""!=a?"block":"none",c.href=a))}},setGridMultimediaValue:function(b,a,c,e){if(void 0!==a)return this.setMultimediaValue(b+"_"+a,c,e)},setMultimediaValue:function(b,a,c){var e=
gx.dom.el(b);if(e){var f=gx.html.multimediaUpload.getContainer(e),h=this.resolveResourceUrl(a||c||"",!1);if(f){gx.html.multimediaUpload.setPreviewImage(f,h);var j=""==a&&""==c||""!=a;if(!j){var k=gx.dom.el(e.id+"_GXI");k&&(k.value=c)}if((b=gx.dom.el(b))&&""==a)b.value="";this.setMultimediaType(e,j);gx.html.multimediaUpload.setPreviewLink(f,h)}else{if("IMG"==e.tagName||"INPUT"==e.tagName&&"image"==e.type)e.src=h;if((a=e.parentNode)&&"A"==a.tagName&&gx.dom.isMultimediaElement(e))h?a.href=h:a.removeAttribute("href")}}},
setMultimediaType:function(b,a){if(b){var c=gx.html.multimediaUpload.getContainer(b);c&&gx.html.multimediaUpload.setType(c,gx.lang.gxBoolean(a))}},setObjectCtrlType:function(b,a){var c=b;if("IMG"==b.nodeName&&(!a||0==a.indexOf("image/")))return c;if(b.type!=a||"OBJECT"==b.nodeName&&0==a.indexOf("image/"))if(c=0==a.indexOf("image/")?gx.html.nodesFromText('<img id="'+b.id+'">')[0]:gx.html.nodesFromText('<object style="display:none;" id="'+b.id+'" type="'+a+'">')[0]){try{for(var e in b.attributes)if("id"!=
e&&("type"!=e&&"implementation"!=e)&&b[e])try{c[e]=b[e]}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","setObjectCtrlType")}}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","setObjectCtrlType")}if(e=b.parentNode){var j=null,k=e.childNodes.length;for(i=0;i<k;i++)if(e.childNodes[i]==b){i<k-1&&(j=e.childNodes[i+1]);break}gx.dom.removeControlSafe(b);null!=j?e.insertBefore(c,j):e.appendChild(c)}}return c},resizeObject:function(b){var a=gx.lang.emptyObject;!a(b.data)&&"about:blank"!=b.data&&(a(b.width)&&a(b.height)&&a(b.style.width)&&
a(b.style.height))&&(b.style.width="200px",b.style.height="200px")},recoverLostCtrlOnGridRefresh:function(b){if(null==b.form){var a=gx.dom.id(b);void 0!=gx.O.getValidStructId(a)&&"checkbox"==b.type&&(a=b.checked,b=gx.dom.el(b.id)||gx.dom.el(b.name),b.checked=a)}return b},checkboxClick:function(b,a,c,e){gx.fx.obs.notify("gx.validation");if(gx.evt.fixWebKitOnFocus())a.onfocus();a=this.recoverLostCtrlOnGridRefresh(a);a.value=a.checked?c:e;(b=gx.fn.validStruct(b))&&"function"==typeof b.c2v&&b.c2v()},
setCtrlClass:function(b,a){null!=b&&(b.className=a)},setCtrlLink:function(b,a){if(null!=b)if(""==a)this.unsetCtrlLink(b);else{var c=b.firstChild;if(c&&"A"==c.tagName)c.href=a;else{var e=b.parentNode;if("A"==e.tagName)e.href=a;else{var f=document.createElement("A");f.href=a;c&&"#text"==c.nodeName?(gx.dom.shouldPurge()&&gx.dom.purge(f,!0),f.innerHTML=c.nodeValue,b.replaceChild(f,c)):(e.replaceChild(f,b),f.appendChild(b))}}}},unsetCtrlLink:function(b){if(null!=b&&(b=b.parentNode,"A"==b.tagName)){var a=
b.firstChild;ParentTag2=b.parentNode;if(null!=ParentTag2){for(;null!=a;)ParentTag2.insertBefore(a,b),a=b.firstChild;gx.dom.removeControlSafe(b)}}},setCtrlLinkTarget:function(b,a){if(null!=b&&("SPAN"==b.nodeName&&b.firstChild&&(b=b.firstChild),"A"==b.nodeName))b.setAttribute?b.setAttribute("target",a):b.target=a},isVisible:function(b,a){try{for(var c;b&&("undefined"==typeof a||0<=a);){if((c=gx.dom.getComputedStyle(b))&&("hidden"==c.visibility||"none"==c.display))return!1;b=b.parentNode;"undefined"!=
typeof a&&a--}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","isVisible")}return!0},gridRowIsMod:function(b,a){var c=this.gridObjByLvl(b),e=null;if(c)return c=gx.O.getGridById(c.gridId,a)||c,(e=c.grid.getRowByGxId(a))?e.gxIsMod():!0;c=!1;try{c=1==this.getControlValue("nIsMod_"+b+"_"+a)}catch(f){c=!1}return c},gridObjByLvl:function(b){for(var a=gx.O.Grids,c=a.length,e=0;e<c;e++)if(a[e].gridLvl==b)return a[e];return null},forceEnableControls:function(b){for(var a in gx.disabledControls){a=this.getControlRef_list(a);
for(var c=a.length,e=0;e<c;e++)try{"button"!=a[e].type&&"submit"!=a[e].type&&(a[e].disabled=b)}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","forceEnableControls")}}},alert:function(b,a){try{var c=gx.util.balloon.getNew(b.id);c.setError(a);c.show();gx.csv.invalidForcedCtrl=b}catch(e){alert(a)}},getGridRowMode:function(b,a){var c=this.currentGridRow(a),e=this.rowIsRemoved(a,c),c=this.getControlValue("nRcdExists_"+b+"_"+c);return"1"==e?"DLT":"0"==c?"INS":"UPD"},rowIsRemoved:function(b,a){var c=this.getGridObj(b);
return null!=c&&(c=c.grid.getRowByGxId(a))?c.gxDeleted():!1},getGridObj:function(b){return gx.O.getGridById(b)},changeCmpContext:function(){try{gx.O.SetStandaloneVars()}catch(b){gx.dbg.logEx(b,"gxfrmutl.js","changeCmpContext")}},initOld:function(b){void 0==gx.oldValues[b.id]&&(gx.oldValues[b.id]=b.value)},setFocusOnError:function(b){var a=gx.fn.controlGridId(b),b=gx.csv.ctxControlId(b),c=null,c=0==a?gx.dom.el(b):gx.fn.getControlGridRef(b,a);null!=c&&(gx.O.AnyError=1,gx.csv.anyError=!0,c.setAttribute("gxvalid",
"0"),gx.csv.stopOnError&&gx.fn.setFocus(c))},usrSetFocus:function(b){b=gx.csv.ctxControlId(b);!0==gx.csv.validating?gx.usrFocusControl=b:(b=gx.dom.el(b),null!=b&&gx.fn.setFocus(b))},setFocus:function(b,a){if(b){try{gx.popup.ispopup()&&(gx.util.browser.isIE()&&window.parent.document.selection?window.parent.document.selection.empty():window.parent.gx.csv.lastControl&&window.parent.gx.csv.lastControl.blur&&window.parent.gx.csv.lastControl.blur())}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocus")}try{if(!gx.lang.emptyObject(b.id)&&
(b=gx.dom.byId(b.id),!b))return;gx.fn.setFocusSafe(b,function(b){gx.util.browser.isIE()&&gx.fn.setSelection(b);b.forcedFocus=!0;a&&a()})}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","setFocus")}}},setFocusSafe:function(b,a){if(b){var c=function(a,b){try{e&&b&&gx.fx.obs.addObserver("gx.onaftervalidate",this,b.closure(this,[a]),{single:!0}),a.focus()}catch(c){}!e&&b&&b(a)},e=gx.csv.setFocusOnload;e||!gx.util.browser.isIE()?gx.lang.doCallTimeout(c,this,[b,a],e?500:0):c(b,a)}},setFocusInit:function(){try{gx.csv.lastActiveControl=
window.document.activeElement}catch(b){}gx.csv.lastActiveControl||(gx.csv.lastActiveControl=gx.csv.lastControl)},setFocusOnload:function(){if(!gx.pO.focusOnlyNEmb||top===self||gx.popup.ispopup()){var b=null,b=gx.pO.getUserFocus();if(!gx.lang.emptyObject(b)){if("notset"==b)return;var a=gx.pO.getUserControl(gx.uc.userControlContainerId(b));if(gx.lang.emptyObject(a))gx.csv.userFocus=gx.fn.getControlRef(b);else{a.setFocusBase();return}}if("notset"!=gx.csv.userFocus){b=gx.csv.userFocus;gx.fn.isAccepted(b)||
(b=gx.csv.lastActiveControl&&gx.fn.isAccepted(gx.csv.lastActiveControl)?gx.csv.lastActiveControl:gx.fn.firstAcceptedControl(gx.popup.ispopup()));try{b?(a=function(){gx.csv.setFocusOnload=!1},gx.csv.lastControl=b,gx.csv.setFocusOnload=!0,gx.fn.isAccepted(b)?gx.fn.setFocus(b,a):(gx.popup.setFocus(),a())):gx.popup.setFocus()}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","setFocusOnload")}}}},setSelection:function(b){if(b&&gx.fn.isVisible(b))try{if(gx.csv.lastControl=b,(gx.dom.isEditControl(b)||"file"==b.type)&&
b.select)b.select();else if("TEXTAREA"==b.nodeName||"SELECT"==b.nodeName)b.focus(),b.select&&b.select()}catch(a){gx.dbg.logEx(a,"gxfrmutl.js","setSelection")}},isAccepted:function(b,a,c){var a=void 0==a||a,e=!0,c=c||gx.O;null!=b&&void 0!=b.type&&"hidden"!=b.type&&gx.fn.isVisible(b)&&!1==b.disabled&&(null==b.readOnly||!1==b.readOnly)?a&&(e=gx.dom.id(b),e=c.getValidStructFld(e),b=c.getVariable("Gx_mode"),0<gx.csv.lastGrid&&c.setVariable("Gx_mode",gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),
gx.csv.lastGrid)),e=!gx.lang.emptyObject(e)&&e.nac?!1==e.nac.call(c):!0,c.setVariable("Gx_mode",b)):e=!1;return e},enterHasFocus:function(){return null==gx.csv.lastControl?!1:gx.evt.isEnterEvtCtrl(gx.csv.lastControl)},skipFocus:function(b){var a=gx.csv.lastControl,c=gx.fn.getControlIndex(a),e=c,f=this.controlGridId(a.id||a.name),h=!1;b&&gx.dom.hasClass(a,"gx_newrow")&&(e=a.gxControlIdx,h=!0);if(-1==e)return!0;a=null;for(a=gx.fn.searchFocus(++e,!0);;a=gx.fn.searchFocus(++e,!0))if(null==a||e==gx.dom.form().elements.length)e=
-1;else{if(b)break;if(gx.evt.isEnterEvtCtrl(a))break;if("INPUT"==a.nodeName&&"submit"!=a.type&&"button"!=a.type&&"image"!=a.type)break}if(!h&&(f&&gx.O.isTransaction())&&this.controlGridId(a.id||a.name)!=f)b=gx.O.getGridById(f),a=gx.dom.el(b.containerName+"_NewRow").parentNode,a.gxControlIdx=c;gx.fn.setFocus(a)},getControlIndex:function(b){var a=gx.dom.form().elements.length-1;return el=this.controlIndex(b,0,a)},controlIndex:function(b,a,c){if(document.all){var e=gx.dom.form(),f=e.elements[a].sourceIndex,
h=e.elements[c].sourceIndex,j=parseInt(a+(c-a)/2)+1,e=e.elements[j].sourceIndex;if(a==c&&b.sourceIndex==f&&b.sourceIndex==h||b.sourceIndex==f)return a;if(b.sourceIndex==h)return c;if(b.sourceIndex==e)return j;if(b.sourceIndex>e&&b.sourceIndex<h)return this.controlIndex(b,j+1,c-1);if(b.sourceIndex>f&&b.sourceIndex<e)return this.controlIndex(b,a+1,j-1)}else return b.gxIndex},searchFocus:function(b,a){return a?this.searchFocusFwd(b):this.searchFocusBack(b)},searchFocusBack:function(b){for(var a=gx.dom.form();0<=
b;b--)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},searchFocusFwd:function(b){for(var a=gx.dom.form(),c=a.elements.length;b<c;b++)if(gx.fn.isAccepted(a.elements[b]))return a.elements[b];return null},rowGridId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("gxgridid");return null!=a?a:gx.fn.rowGridId(b.parentNode)},controlRowId:function(b){if(!b||!b.getAttribute)return null;var a=b.getAttribute("gxrow");return null!=a?a:gx.fn.controlRowId(b.parentNode)},
controlGridId:function(b){try{var a,c,e=gx.O.Grids;if(e){c=0;for(len=e.length;c<len;c++)if(e[c].grid.columnsHtmlName[b])return e[c].gridId}a=gx.fn.controlIds();c=0;for(len=a.length;c<len;c++){var f=gx.fn.validStruct(a[c]);if(gx.O.isSameField(f,b))return f.grid}var h=gx.O.getComponentData(b);if(h){var j=gx.fn.gridObjByLvl(h.lvl);if(j)return j.gridId}}catch(k){}return 0},oldGridId:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var e=gx.fn.validStruct(a[i]);if(void 0!=e&&e.gxold==
b)return e.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","oldGridId")}return 0},saveLvlOldParm:function(b,a){var c="no_mode";null!=gx.csv.validatingGrid?this.isLvlParmOld(gx.csv.lastGrid,b)&&(c=gx.fn.getGridRowMode(gx.fn.gridLvl(gx.csv.lastGrid),gx.csv.lastGrid)):this.isLvlParmOld(0,b)&&(c=gx.O.Gx_mode);return"no_mode"==c?!0:"UPD"==c||null==gx.csv.validatingGrid?(window[b]=a,!0):!1},isLvlParmOld:function(b,a){try{var c=gx.O.getOldLvl(a);if(0<=c){if(0<b){var e=gx.fn.gridLvl(b);return c<e}return!0}}catch(f){gx.dbg.logEx(f,
"gxfrmutl.js","isLvlParmOld")}return!1},gridLvl:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var e=gx.fn.validStruct(a[i]);if(void 0!=e&&void 0!=e.lvl&&e.grid==b)return e.lvl}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","gridLvl")}return 0},lvlGrid:function(b){try{var a=gx.fn.controlIds(),c=a.length;for(i=0;i<c;i++){var e=gx.fn.validStruct(a[i]);if(void 0!=e&&e.lvl==b)return e.grid}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js","lvlGrid")}return 0},vStructId:function(b){try{var a=gx.fn.controlIds();
for(i=0;i<a.length;i++){var c=gx.fn.validStruct(a[i]);if(void 0!=c&&c.fld==b)return a[i]}}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","vStructId")}return 0},getVStruct:function(b,a){try{var c=null;a&&(c=[]);var e=gx.fn.controlIds(),f=e.length;for(i=0;i<f;i++){var h=gx.fn.validStruct(e[i]);if(void 0!=h&&b(h))if(h.id=e[i],a)c.push(h);else return h}}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","getVStruct")}return c},vStructForOld:function(b){return gx.fn.getVStruct(function(a){return a.gxold==b})},vStructForVar:function(b){return gx.fn.getVStruct(function(a){return a.gxvar==
b})},vStructForVarWId:function(b,a){var c=gx.fn.getVStruct(function(a){return a.gxvar==b},!0),e=c[0],f=c.length;if(1<f)for(var h=0;h<f&&!(e=c[h],e.id==a);h++);return e},vStructForHC:function(b){return gx.fn.getVStruct(function(a){return a.hc==b})},firstCtrlAfterGrid:function(b,a){for(var c=gx.fn.lastCtrlId(),e=b;e<c;e++){var f=gx.fn.validStruct(e);if(void 0!=f&&f.grid!=a)return e}return c},clearOldKeys:function(){gx.oldKeyValues=[]},oldKey:function(b){try{return gx.oldKeyValues[b]}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","oldKey")}return""},oldGridKey:function(b,a){try{return gx.oldKeyValues[b+gx.fn.currentGridRow(a)]}catch(c){gx.dbg.logEx(c,"gxfrmutl.js","oldGridKey")}return""},setKey:function(b,a){null!=b&&(gx.oldKeyValues[b]=a)},unsetKey:function(b){null!=b&&(gx.oldKeyValues[b]=void 0)},setGridKey:function(b,a,c){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=c)},unsetGridKey:function(b,a){null!=b&&(gx.oldKeyValues[b+gx.fn.currentGridRow(a)]=void 0)},removeGridRow:function(b,a){var c=gx.fn.rowIsRemoved(a,
b);try{var e=gx.fn.controlIds(),f=e.length;for(i=0;i<f;i++){var h=gx.fn.validStruct(e[i]);if(void 0!=h&&h.grid==a){var j=gx.dom.el(h.fld+"_"+b);null!=j&&(j.gxdisabled=c,j.disabled=c)}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","removeGridRow")}gx.csv.validGridRow(a,b)},controlIds:function(){return gx.O.getControlIds()},validStruct:function(b,a){a=a||gx.O;return a.getValidStruct(b)},lastCtrlId:function(b){if(!0===b)for(var b=this.controlIds(),a=b.length-1;0<=a;a--){if(this.validStruct(b[a]).v2v)return b[a]}else return gx.O.getLastControlId()},
lastMainLevelCtrlId:function(b,a){return 0==a&&b==this.lastCtrlId(!0)},vStructsArray:function(){return gx.O.GXValidFnc},firstAcceptedControl:function(b){try{for(var a=gx.fn.vStructsArray(),c=gx.fn.controlIds(),e=c.length,f=0;f<e;f++){var h=a[c[f]];if(null!=h){var j=gx.fn.getControlGridRef(h.fld,h.grid);if(j&&gx.fn.isAccepted(j)&&(b||"submit"!=j.type&&"image"!=j.type&&"button"!=j.type&&"fieldset"!=j.type))return j}}}catch(k){gx.dbg.logEx(k,"gxfrmutl.js","firstAcceptedControl")}return null},enableDisableDelete:function(){var b=
gx.dom.el(gx.csv.cmpCtx+"BTN_DELETE");null!=b&&gx.fn.setCtrlPropertyImpl(b,"Enabled","INS"==gx.getVar("Gx_mode")?0:1)},setFocusAfterLoad:function(){!0!=gx.csv.validating&&gx.lang.emptyObject(gx.csv.autoRefreshing)&&(gx.csv.invalidateForm(),gx.csv.onloadFocus=!0,gx.lang.emptyObject(gx.usrFocusControl)||(gx.fn.setFocus(gx.dom.byId(gx.usrFocusControl)),gx.O.fromValid=gx.csv.lastId,gx.usrFocusControl=""),gx.csv.onloadFocus=!1)},disableCtrl:function(b){var a=function(a){try{for(var b=a.length,c=0;c<b;c++)gx.fn.setCtrlPropertyImpl(a[c],
"Enabled",0)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","disableCtrl")}},b=gx.fn.getControlRef_list(b);if(null!=b)if("complete"==document.gxReadyState)a(b);else gx.evt.on_ready(this,a.closure(this,[b]))},refreshGridRowBC:function(b,a){try{var c=gx.O.getGridBC(b);if(c){var e=gx.pO.getGridForColl(c.gxvar);if(gx.csv.validatingGrid&&e&&gx.csv.validatingGrid.gridId==e.gridId)return gx.fn.setGridHidden(b,a),a=a[parseInt(gx.fn.currentGridRow(e.gridId))-1],gx.O.bcToScreen(c,a),!0}}catch(f){gx.dbg.logEx(f,"gxfrmutl.js",
"refreshGridRowBC")}return!1},refreshBC:function(b,a){return this.refreshFormBC(b,a)||this.refreshGridRowBC(b,a)},refreshFormBC:function(b,a){try{var c=gx.O.getFormBC(b)||gx.O.getFormBCForVar(b);if(c)return gx.setVar(b,a),gx.fn.setGridHidden(b,a),gx.O.bcToScreen(c,a),!0}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","refreshFormBC")}return!1},isHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return"undefined"!=typeof gx.http.viewState[b]},GX_HASH_PREFIX:"gxhash_",getHash:function(b,a){return gx.fn.getHidden(b+
gx.fn.GX_HASH_PREFIX+a)},getHidden:function(b){gx.http.viewStateLoaded||gx.http.loadState();return gx.http.viewState[b]},setHidden:function(b,a){gx.http.viewStateLoaded||gx.http.loadState();gx.http.viewState[b]=a},setGridHidden:function(b,a){var c=b,e=gx.fn.oldGridId(b);0<e&&(c=b+"_"+gx.fn.currentGridRowImpl(e));gx.fn.setHidden(c,a)},deleteHidden:function(b){gx.http.viewState&&delete gx.http.viewState[b]},setJsonHiddens:function(b,a){var a=void 0===a||a,c;for(c in b)a?gx.fn.setGridHidden(c,b[c]):
gx.fn.setHidden(c,b[c])},filterHiddens:function(b,a){var c={},e;for(e in a)e&&0==e.search(b)&&(c[e]=a[e]);return c},autoRefreshingControl:function(b,a){return!gx.lang.emptyObject(gx.csv.autoRefreshing)&&null!=gx.csv.lastControl&&gx.csv.lastControl.id==a+b},setJsonValues:function(b){if(!b)return[];for(var a=gx.O,c=b.length,e=[],f,h=0;h<c;h++){var j=b[h],k=j.CmpContext,m=gx.lang.booleanValue(j.IsMasterPage);gx.setGxO(k,m);if(!gx.lang.emptyObject(gx.O))for(var l in j)if(!("CmpContext"==l||"IsMasterPage"==
l)&&!("object"==typeof j[l]&&gx.fn.refreshBC(l,j[l]))&&"function"!=typeof j[l]){var q=gx.fn.vStructForVar(l)||gx.O.getValidStructFld(l);q?q.v2v&&!gx.fn.autoRefreshingControl(q.fld,k)&&(f=void 0,0!=q.grid&&(f=gx.fn.controlRowId(gx.dom.el(l))),q.v2v(j[l]),q.v2c(f)):"GX_FocusControl"==l?a.CmpContext==k&&a.IsMasterPage==m&&(gx.usrFocusControl=j[l]):(f=gx.fn.getVarControlMap(l),gx.lang.emptyObject(f)?gx.setVar(l,j[l]):gx.setVar(f,j[l]),gx.fn.setGridHidden(l,j[l]),gx.O.UCBindings[l]&&e.concat(gx.O.UCBindings[l].uc))}}gx.setGxO(a);
return e},getPropertyControlRef:function(b,a){var c=gx.fn.getControlRef(b,!0),c=null==c?gx.dom.el("Object_"+b):c;null==c&&(c=gx.fn.screen_CtrlRef(gx.csv.ctxControlId(b)));null==c&&a&&(c=gx.dom.el(b+"_"+a));return c},setJsonProperties:function(b,a){if(!b)return[];for(var c=gx.O,e=b.length,f=[],h=0;h<e;h++){var j=b[h],k=j.CmpContext,m=gx.lang.booleanValue(j.IsMasterPage);gx.setGxO(k,m);if(!gx.lang.emptyObject(gx.O))for(var l in j)if(!("CmpContext"==l||"IsMasterPage"==l||""===l)&&"function"!=typeof j[l])if(k=
gx.fn.getPropertyControlRef(l,a),null==k)gx.uc.isUserControl(l)&&(gx.uc.setProperties(l,j[l]),f.push(gx.uc.getUserControlObj(gx.uc.userControlContainerId(l))));else for(var q in j[l])if(k.parentElement||(k=gx.fn.getPropertyControlRef(l,a)),"object"==typeof j[l][q])for(var o in j[l][q])gx.fn.setCtrlPropertyImpl(k,o,j[l][q][o]);else gx.fn.setCtrlPropertyImpl(k,q,j[l][q])}gx.setGxO(c);return f},loadJsonGrids:function(b,a){if(b)for(var c=b.length,e,f=0;f<c;f++)try{var h=b[f];if(void 0!=h.Count){var j=
h.CmpContext,k=h.GridName,m=gx.csv.validatingGrid;if(gx.lang.emptyObject(m)||m.gxComponentContext!=j&&m.gridName!=k)(e=gx.fn.gridObj(j,k,"true"==h.InMasterPage?!0:!1))&&(a?e.loadGrid(h,a):e.updatePropsHidden(h))}}catch(l){gx.dbg.logEx(l,"gxfrmutl.js","loadJsonGrids")}},getErrorViewerCtrls:function(){var b=gx.dom.byName("gxErrorViewer");if(0==b.length)for(var b=[],a=gx.dom.byTag("span"),c=a.length,e=0;e<c;e++)"gxErrorViewer"==a[e].name&&b.push(a[e]);return b},setErrorViewer:function(b){gx.O.AnyError=
0;if(b)try{gx.fx.obs.notify("gx.onmessages",[b]);var a=gx.dom.byClass("gx_ev","span"),c=a.length,e;for(e in b){var f,h=b[e];gx.lang.isArray(h)||(f=h.fields,h=h.msgs);var j=[];if(f)for(var k=0,m=f.length;k<m;k++){var l=gx.fn.vStructForVar(f[k].replace(/^gx\.O\./,""));l&&j.push(l.fld)}"MAIN"==e&&(e="");if("undefined"!=typeof h){for(k=0;k<c;k++){var q=a[k];if(q&&q.id==e+"gxErrorViewer"){var o=gx.csv.setFocusOnload?q.innerHTML:"";break}}var p={},r;for(r in h){var s=h[r];s&&1==s.type&&(gx.O.AnyError=1);
if(!gx.lang.emptyObject(s.text)&&"function"!=typeof s)if(""!=s.att&&gx.fn.isVisible(gx.fn.screen_CtrlRef(s.att))){var u=p[s.att];u||(u=gx.util.balloon.getNew(s.att,void 0,j),p[s.att]=u);1==s.type?u.setError(s.text):u.setMessage(s.text)}else o+='<div class="'+(1==s.type?"gx-error-message":"gx-warning-message")+'">'+gx.html.encode(s.text)+"</div>"}for(var t in p)if(u=p[t],!1==u.show()){gx.fn.setFocusOnError(t);break}for(k=0;k<c;k++)if((q=a[k])&&q.id==e+"gxErrorViewer"&&q.innerHTML!=o)gx.dom.shouldPurge()&&
gx.dom.purge(q,!0),q.innerHTML=o,""!=o&&gx.fx.dom.highlight(q,[255,255,165],2500).play()}}}catch(x){gx.dbg.logEx(x,"gxfrmutl.js","setErrorViewer")}},cmpContextFromCtrl:function(b){var a=f.exec(b);return a?a[1]+a[2]:b},clearCompontHiddens:function(b){for(var a in b)if("function"!=typeof b[a])try{var c=gx.fn.cmpContextFromCtrl(a);gx.O.deleteComponentHiddens(c)}catch(e){except=!0,gx.dbg.logEx(e,"gxfrmutl.js","clearCompontHiddens")}},setJsonComponents:function(b,a,c,f,n){try{var h=[],j=!1;gx.gen.isDotNet();
for(var k in b)if("function"!=typeof b[k])try{var m=b[k];if(m){var l=gx.dom.el(k);!l&&a&&(l=gx.dom.el(a[k]));if(!gx.lang.emptyObject(l)){gx.html.setInnerHtml(l,m,!1,n);var q=gx.fn.cmpContextFromCtrl(k),o=e(gx.fn.getHidden(q+"_CMPPGM"));h.push({type:q,name:o,html:m})}}}catch(p){j=!0,gx.dbg.logEx(p,"gxfrmutl.js","setJsonComponents")}}catch(r){j=!0,gx.dbg.logEx(r,"gxfrmutl.js","setJsonComponents")}if((0==h.length||j)&&"function"==typeof f)f();else{var s=null,u=function(){0<h.length?(s=h.shift(),gx.fn.createComponentAsync(s,
c,u)):"function"==typeof f&&f()},s=h.shift();gx.fn.createComponentAsync(s,c,u)}},createComponentAsync:function(b,a,c){var e=b.type,f=b.name,b=b.html;try{var h=gx.fn.filterHiddens(RegExp("^"+e),a);gx.cache.codeLoaded(e+f)?(gx.fn.createComponentObj(f,e),gx.fn.setJsonHiddens(h),"function"==typeof c&&c()):(gx.cache.addInlineCode(e+f),gx.html.processCode(b,!1,function(a,b,e){gx.fn.createComponentObj(a,b);gx.fn.setJsonHiddens(e);if(typeof c=="function"){c();gx.fx.obs.notify("gx.onafterevent",[gx.csv.lastEvtResponse])}},
[f,e,h],f))}catch(j){gx.dbg.logEx(j,"gxfrmutl.js","createComponentAsync"),"function"==typeof c&&c()}},createComponentObj:function(b,a){var c=gx.createComponent(b,a);null!=c&&gx.addComponent(c)},cleanAttachedCtrls:function(){gx.attachedControls=[]},getAttachedCtrl:function(b){for(var a=gx.attachedControls.length,c=0;c<a;c++){var e=gx.attachedControls[c];if(e.id==b)return e}return null},attachCtrl:function(b,a){null==gx.fn.getAttachedCtrl(b)&&gx.attachedControls.push({id:b,info:a})},doAttachs:function(){for(var b=
gx.fn.attachedControls(),a=b.length,c=gx.O,e=0;e<a;e++){var f=b[e];gx.setGxO(f.info.wc,f.info.mp);if(f.info.isPrompt&&gx.O.isTransaction()&&"DSP"==gx.O.Gx_mode)gx.fn.setCtrlPropertyImpl(gx.dom.el(f.info.wc+f.id),"Visible",!1);else for(var h=f.info.controls,j=h.length,k=0;k<j;k++){gx.fn.addAttach(h[k],f);var m=gx.fn.validStruct(h[k]);gx.fn.checkAttachedPropertyVS(m,"Visible",!1);gx.fn.checkAttachedPropertyVS(m,"Enabled",!1)}}gx.setGxO(c)},addAttach:function(b,a){var c=gx.fn.validStruct(b);void 0==
c.attachedCtrls&&(c.attachedCtrls=[]);c.attachedCtrls.push(a)},checkAttachedProperty:function(b,a,c){gx.fn.checkAttachedPropertyVS(gx.O.getValidStructFld(b),a,c)},checkAttachedPropertyVS:function(b,a,c){if(void 0!=b&&(b=b.attachedCtrls,void 0!=b))for(var e=b.length,f=0;f<e;f++)gx.fn.checkAttachedControlProperty(b[f],a,c)},checkAttachedControlProperty:function(b,a,c){for(var e=b.id,b=b.info,f=!1,h=b.controls,j=b.wc,k=h.length,m=0;m<k&&!f;m++)gx.fn.getCtrlProperty_impl(gx.dom.el(j+gx.fn.validStruct(h[m]).fld),
a)==c&&(f=!0==c||m==k-1);f&&(b=b.isPrompt?"Visible":a,gx.fn.setCtrlPropertyImpl(gx.dom.el(j+e),b,c))},changeControlOpacity:function(b,a,c,e){var f=Math.round(e),h="",h="string"==typeof b?b:b.id;a>c?(gx.fn.setOpacity(a,h),setTimeout(function(){gx.fn.changeControlOpacity(b,a-10,c,e)},f)):a<c?(gx.fn.setOpacity(a,h),setTimeout(function(){gx.fn.changeControlOpacity(b,a+10,c,e)},f)):gx.fn.setOpacity(c,h)},setOpacity:function(b,a){var c=a;"string"==typeof a&&(c="body"==a?document.body:gx.dom.el(a));if(null!=
c){var c=c.style,e="reset"==b?"":b/100;c.opacity=e;c.MozOpacity=e;c.filter="alpha(opacity="+("reset"==b?100:b)+")"}},fadeControl:function(b,a,c){"in"==a?gx.fn.changeControlOpacity(b,0,100,c):gx.fn.changeControlOpacity(b,100,0,c)},fadeIn:function(b,a){gx.fn.fadeControl(b,"in",a)},statusMsg:function(b){window.status=b},objectOnload:function(b){null!=gx.pO&&(gx.pO.onload(b),gx.setGxO(gx.pO))},objectOnUnload:function(b){if(null!=gx.pO)gx.pO.onunload(b)},objectOnpost:function(){if(null!=gx.pO)gx.pO.onpost()},
objectPostback:function(b){null!=gx.pO&&gx.pO.postbackLoad(b)},gridObjFromGxO:function(b){return gx.fn.gridObj(gx.O.CmpContext,b,gx.O.IsMasterPage)},gridObj:function(b,a,c){return(b=gx.getObj(b,c))?b.getGrid(a):null},installComponents:function(b){var a=gx.fn.getHidden("GX_CMP_OBJS");if(void 0!=a){gx.gen.isDotNet();for(var c in a)if(b||!gx.pO.getWebComponent(c)){var f=e(a[c].toLowerCase()),f=gx.createComponent(f,c);null!=f&&(gx.addComponent(f),setTimeout(function(a){this.addComponentRemoteFiles(a)}.closure(this,
[f]),1))}}},addComponentRemoteFiles:function(b){if(b=b.getContainer())gx.html.processCode(b.innerHTML,!0),gx.dom.fitToParent(b)},datePickerFormat:function(b,a,c){var e=gx.dateFormat,f=e.substr(0,1),h=e.substr(1,1),e=e.substr(2,1),f=gx.fn.datePickerDateFormat(f,b),h=gx.fn.datePickerDateFormat(h,b),b=gx.fn.datePickerDateFormat(e,b),e=gx.fn.datePickerTimeFormat(a);return 0<c&&0<a?f+"/"+h+"/"+b+" "+e:0<c?f+"/"+h+"/"+b:e},datePickerDateFormat:function(b,a){return"Y"==b&&"99/99/9999"==a.substr(0,10)?"%Y":
"Y"==b?"%y":"M"==b?"%m":"D"==b?"%d":""},datePickerTimeFormat:function(b){var a=gx.timeFormat,c;12==a?(a="%I",c=" %p"):(a=24==a?"%H":"",c="");if(2==b)b="";else if(5==b)b=":%M";else if(8==b)b=":%M:%S";else return"";return a+b+c},installDatePicker:function(b,a,c,e,f,h){gx.html.onTypeAvailable("Calendar",gx.fn.installDatePickerIfReady,[b,a,c,e,f,h])},installDatePickerIfReady:function(b,a,d,e,f,h){var j=gx.dom.el(b);if(gx.lang.emptyObject(j)||"SELECT"!=j.nodeName)if(0==a){var a=b+"_dp_trigger",k=gx.dom.el(a),
m=gx.dom.getComputedStyle(k),l=gx.dom.getComputedStyle(j);if(k&&"none"!=l.display&&"hidden"!=l.visibility&&("none"==m.display||"hidden"==m.visibility)||!k)a=b;j=c(j).parents(".dp_container")[0];Calendar.setup({inputField:b,parentNode:j,showsTime:d,weekNumbers:e,mondayFirst:f,ifFormat:h,button:a,onSelect:gx.fn.datePickerChanged,align:"Bl",singleClick:!0,displayRight:!1})}else gx.lang.emptyObject(j)||(j.style.display="none"),Calendar.setup({inputField:b,showsTime:d,weekNumbers:e,mondayFirst:f,ifFormat:h,
flat:b+"_dp_container",flatCallback:gx.fn.datePickerChanged,align:"Bl",singleClick:!0})},datePickerChanged:function(b,a,c){if(b&&b.dateClicked){c||(c=b.params.inputField);var a=gx.O,e=null,f=gx.fn.controlIds(),h=f.length;for(i=0;i<h;i++){var e=gx.fn.validStruct(f[i]),j=0!=e.grid?"_"+gx.fn.currentGridRow(e.grid):"";if(c.id==a.CmpContext+e.fld+j)break}null!=e&&void 0!=e.dp&&(f=b.dateIsEmpty?gx.date.nulldate_toc(e.len,e.dec):b.date.print(gx.fn.datePickerFormat(e.dp.pic,e.dp.dec,e.len)),f!=c.value&&(c.setAttribute("gxvalid",
"0"),c.value=f,c.onchange(),b.callCloseHandler(),0<e.grid&&gx.fn.getGridObj(e.grid).setRowModified(gx.fn.currentGridRow(e.grid)),a.refreshDependantGrids(e)))}},toArray:function(b){if(gx.util.browser.isIE()&&8>=gx.util.browser.ieVersion()){for(var a=[],c=0,e=b.length;c<e;c++)a[c]=b[c];return a}return Array.prototype.slice.call(b)}}}(gx.$);
gx.thread={Map:function(){this.map={};this.add=function(c,f){this.map[c]=f};this.remove=function(c){delete this.map[c]};this.get=function(c){return null==c?null:this.map[c]};this.first=function(){return this.get(this.nextKey())};this.next=function(c){return this.get(this.nextKey(c))};this.nextKey=function(c){for(i in this.map){if(!c)return i;c==i&&(c=null)}return null}},Command:function(c,f,e){gx.thread.Command.LastID||(gx.thread.Command.LastID=0);this.id=++gx.thread.Command.LastID;this.execute=function(){f.apply(c,
e)};this.syncExecute=function(){new gx.thread.Mutex(this,"execute")}},Mutex:function(c,f,e,b){gx.thread.Mutex.Wait||(gx.thread.Mutex.Wait=new gx.thread.Map);gx.thread.Mutex.SLICE=function(a,b){gx.thread.Mutex.Wait.get(a).attempt(gx.thread.Mutex.Wait.get(b))};this.attempt=function(a){for(;a;a=gx.thread.Mutex.Wait.next(a.c.id))if(a.enter||a.number&&(a.number<this.number||a.number==this.number&&a.c.id<this.c.id))return setTimeout("gx.thread.Mutex.SLICE("+this.c.id+","+a.c.id+")",10);try{retVal=this.c.execute()}catch(d){gx.dbg.logEx(d,
"gxfrmutl.js","Mutex Call")}this.number=0;gx.thread.Mutex.Wait.remove(this.c.id);if(typeof b=="function")try{b.call(c,retVal)}catch(e){gx.dbg.logEx(e,"gxfrmutl.js","Mutex CallBack")}};this.c=new gx.thread.Command(c,f,e);gx.thread.Mutex.Wait.add(this.c.id,this);this.enter=!0;this.number=(new Date).getTime();this.enter=!1;this.attempt(gx.thread.Mutex.Wait.first())}};
gx.sec={key:null,keyName:"GX_AJAX_KEY",secToken:null,secTokenName:"AJAX_SECURITY_TOKEN",loadKey:function(){var c=gx.fn.getHidden(this.keyName);this.key=gx.lang.emptyObject(c)?null:c;null!=this.key&&this.loadSecToken()},loadSecToken:function(){var c=gx.fn.getHidden(this.secTokenName);this.secToken=gx.lang.emptyObject(c)?null:c},encrypt:function(c,f){try{if(f=null==f?this.key:f,null!=f){var e=this.rijndael,f=e.hexToByteArray(f),b=e.rijndaelEncrypt(c,f);return e.byteArrayToHex(b)}}catch(a){gx.dbg.logEx(a,
"gxfrmutl.js","encrypt")}return c},decrypt:function(c,f){try{if(f=null==f?this.key:f,null!=f){var e=this.rijndael,f=e.hexToByteArray(f),b=e.hexToByteArray(c),a=e.rijndaelDecrypt(b,f);return e.byteArrayToString(a)}}catch(d){gx.dbg.logEx(d,"gxfrmutl.js","decrypt")}return c},_init:function(){this.rijndael._init()}};
gx.MD5={RotateLeft:function(c,f){return c<<f|c>>>32-f},AddUnsigned:function(c,f){var e,b,a,d,g;a=c&2147483648;d=f&2147483648;e=c&1073741824;b=f&1073741824;g=(c&1073741823)+(f&1073741823);return e&b?g^2147483648^a^d:e|b?g&1073741824?g^3221225472^a^d:g^1073741824^a^d:g^a^d},F:function(c,f,e){return c&f|~c&e},G:function(c,f,e){return c&e|f&~e},H:function(c,f,e){return c^f^e},I:function(c,f,e){return f^(c|~e)},FF:function(c,f,e,b,a,d,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.F(f,
e,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,d),f)},GG:function(c,f,e,b,a,d,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.G(f,e,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,d),f)},HH:function(c,f,e,b,a,d,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.H(f,e,b),a),g));return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,d),f)},II:function(c,f,e,b,a,d,g){c=gx.MD5.AddUnsigned(c,gx.MD5.AddUnsigned(gx.MD5.AddUnsigned(gx.MD5.I(f,e,b),a),g));
return gx.MD5.AddUnsigned(gx.MD5.RotateLeft(c,d),f)},ConvertToWordArray:function(c){var f,e=c.length;f=e+8;for(var b=16*((f-f%64)/64+1),a=Array(b-1),d=0,g=0;g<e;)f=(g-g%4)/4,d=8*(g%4),a[f]|=c.charCodeAt(g)<<d,g++;f=(g-g%4)/4;a[f]|=128<<8*(g%4);a[b-2]=e<<3;a[b-1]=e>>>29;return a},WordToHex:function(c){var f="",e="",b;for(b=0;3>=b;b++)e=c>>>8*b&255,e="0"+e.toString(16),f+=e.substr(e.length-2,2);return f},Utf8Encode:function(c){for(var c=c.replace(/\r\n/g,"\n"),f="",e=0;e<c.length;e++){var b=c.charCodeAt(e);
128>b?f+=String.fromCharCode(b):(127<b&&2048>b?f+=String.fromCharCode(b>>6|192):(f+=String.fromCharCode(b>>12|224),f+=String.fromCharCode(b>>6&63|128)),f+=String.fromCharCode(b&63|128))}return f},getHsh:function(c){var f=[],e,b,a,d,g,n,h,j,c=gx.MD5.Utf8Encode(c),f=gx.MD5.ConvertToWordArray(c);g=1732584193;n=4023233417;h=2562383102;j=271733878;for(c=0;c<f.length;c+=16)e=g,b=n,a=h,d=j,g=gx.MD5.FF(g,n,h,j,f[c+0],7,3614090360),j=gx.MD5.FF(j,g,n,h,f[c+1],12,3905402710),h=gx.MD5.FF(h,j,g,n,f[c+2],17,606105819),
n=gx.MD5.FF(n,h,j,g,f[c+3],22,3250441966),g=gx.MD5.FF(g,n,h,j,f[c+4],7,4118548399),j=gx.MD5.FF(j,g,n,h,f[c+5],12,1200080426),h=gx.MD5.FF(h,j,g,n,f[c+6],17,2821735955),n=gx.MD5.FF(n,h,j,g,f[c+7],22,4249261313),g=gx.MD5.FF(g,n,h,j,f[c+8],7,1770035416),j=gx.MD5.FF(j,g,n,h,f[c+9],12,2336552879),h=gx.MD5.FF(h,j,g,n,f[c+10],17,4294925233),n=gx.MD5.FF(n,h,j,g,f[c+11],22,2304563134),g=gx.MD5.FF(g,n,h,j,f[c+12],7,1804603682),j=gx.MD5.FF(j,g,n,h,f[c+13],12,4254626195),h=gx.MD5.FF(h,j,g,n,f[c+14],17,2792965006),
n=gx.MD5.FF(n,h,j,g,f[c+15],22,1236535329),g=gx.MD5.GG(g,n,h,j,f[c+1],5,4129170786),j=gx.MD5.GG(j,g,n,h,f[c+6],9,3225465664),h=gx.MD5.GG(h,j,g,n,f[c+11],14,643717713),n=gx.MD5.GG(n,h,j,g,f[c+0],20,3921069994),g=gx.MD5.GG(g,n,h,j,f[c+5],5,3593408605),j=gx.MD5.GG(j,g,n,h,f[c+10],9,38016083),h=gx.MD5.GG(h,j,g,n,f[c+15],14,3634488961),n=gx.MD5.GG(n,h,j,g,f[c+4],20,3889429448),g=gx.MD5.GG(g,n,h,j,f[c+9],5,568446438),j=gx.MD5.GG(j,g,n,h,f[c+14],9,3275163606),h=gx.MD5.GG(h,j,g,n,f[c+3],14,4107603335),n=
gx.MD5.GG(n,h,j,g,f[c+8],20,1163531501),g=gx.MD5.GG(g,n,h,j,f[c+13],5,2850285829),j=gx.MD5.GG(j,g,n,h,f[c+2],9,4243563512),h=gx.MD5.GG(h,j,g,n,f[c+7],14,1735328473),n=gx.MD5.GG(n,h,j,g,f[c+12],20,2368359562),g=gx.MD5.HH(g,n,h,j,f[c+5],4,4294588738),j=gx.MD5.HH(j,g,n,h,f[c+8],11,2272392833),h=gx.MD5.HH(h,j,g,n,f[c+11],16,1839030562),n=gx.MD5.HH(n,h,j,g,f[c+14],23,4259657740),g=gx.MD5.HH(g,n,h,j,f[c+1],4,2763975236),j=gx.MD5.HH(j,g,n,h,f[c+4],11,1272893353),h=gx.MD5.HH(h,j,g,n,f[c+7],16,4139469664),
n=gx.MD5.HH(n,h,j,g,f[c+10],23,3200236656),g=gx.MD5.HH(g,n,h,j,f[c+13],4,681279174),j=gx.MD5.HH(j,g,n,h,f[c+0],11,3936430074),h=gx.MD5.HH(h,j,g,n,f[c+3],16,3572445317),n=gx.MD5.HH(n,h,j,g,f[c+6],23,76029189),g=gx.MD5.HH(g,n,h,j,f[c+9],4,3654602809),j=gx.MD5.HH(j,g,n,h,f[c+12],11,3873151461),h=gx.MD5.HH(h,j,g,n,f[c+15],16,530742520),n=gx.MD5.HH(n,h,j,g,f[c+2],23,3299628645),g=gx.MD5.II(g,n,h,j,f[c+0],6,4096336452),j=gx.MD5.II(j,g,n,h,f[c+7],10,1126891415),h=gx.MD5.II(h,j,g,n,f[c+14],15,2878612391),
n=gx.MD5.II(n,h,j,g,f[c+5],21,4237533241),g=gx.MD5.II(g,n,h,j,f[c+12],6,1700485571),j=gx.MD5.II(j,g,n,h,f[c+3],10,2399980690),h=gx.MD5.II(h,j,g,n,f[c+10],15,4293915773),n=gx.MD5.II(n,h,j,g,f[c+1],21,2240044497),g=gx.MD5.II(g,n,h,j,f[c+8],6,1873313359),j=gx.MD5.II(j,g,n,h,f[c+15],10,4264355552),h=gx.MD5.II(h,j,g,n,f[c+6],15,2734768916),n=gx.MD5.II(n,h,j,g,f[c+13],21,1309151649),g=gx.MD5.II(g,n,h,j,f[c+4],6,4149444226),j=gx.MD5.II(j,g,n,h,f[c+11],10,3174756917),h=gx.MD5.II(h,j,g,n,f[c+2],15,718787259),
n=gx.MD5.II(n,h,j,g,f[c+9],21,3951481745),g=gx.MD5.AddUnsigned(g,e),n=gx.MD5.AddUnsigned(n,b),h=gx.MD5.AddUnsigned(h,a),j=gx.MD5.AddUnsigned(j,d);return(gx.MD5.WordToHex(g)+gx.MD5.WordToHex(n)+gx.MD5.WordToHex(h)+gx.MD5.WordToHex(j)).toLowerCase()}};
gx.base64={b64:[],f64:[],decode:function(c){return this.bytesToString(this.bytesFromUTF8Bytes(this.decodeImpl(c)))},encode:function(c){return this.encodeImpl(this.UTF8BytesFromString(c))},bytesFromUTF8Bytes:function(c){for(var f=[],e=0,b=c1=c2=0,a=c.length;e<a;)b=c[e],128>b?(f.push(b),e++):191<b&&224>b?(c2=c[e+1],f.push((b&31)<<6|c2&63),e+=2):(c2=c[e+1],c3=c[e+2],f.push((b&15)<<12|(c2&63)<<6|c3&63),e+=3);return f},UTF8BytesFromString:function(c){for(var c=c.replace(/\r\n/g,"\n"),f=[],e=c.length,b=
0;b<e;b++){var a=c.charCodeAt(b);128>a?f.push(a):(127<a&&2048>a?f.push(a>>6|192):(f.push(a>>12|224),f.push(a>>6&63|128)),f.push(a&63|128))}return f},bytesToString:function(c){for(var f=gx.util.browser.isChrome()?32765:5E4,e=[];c.length>=f;)e.push(eval("String.fromCharCode("+c.slice(0,f).join(",")+");")),c=c.slice(f);0!=c.length&&e.push(eval("String.fromCharCode("+c.join(",")+");"));return e.join("")},decodeImpl:function(c){for(var f=this.f64,e=[],b=0,c=c.replace(/\n|\r/g,""),c=c.replace(/=/g,""),
a=c.length;b<a;)e[e.length]=f[c.charAt(b)]<<2|f[c.charAt(b+1)]>>4,e[e.length]=(f[c.charAt(b+1)]&15)<<4|f[c.charAt(b+2)]>>2,e[e.length]=(f[c.charAt(b+2)]&3)<<6|f[c.charAt(b+3)],b+=4;2==c.length%4&&(e=e.slice(0,e.length-2));3==c.length%4&&(e=e.slice(0,e.length-1));return e},encodeImpl:function(c){var f=this.b64,e=[],b=0,a=c.length;1==a%3&&(c[c.length]=0,c[c.length]=0);2==a%3&&(c[c.length]=0);for(var d=c.length;b<d;)e[e.length]=f[c[b]>>2],e[e.length]=f[(c[b]&3)<<4|c[b+1]>>4],e[e.length]=f[(c[b+1]&15)<<
2|c[b+2]>>6],e[e.length]=f[c[b+2]&63],b+=3;1==a%3&&(e[e.length-1]=e[e.length-2]="=");2==a%3&&(e[e.length-1]="=");return e.join("")},_init:function(){for(var c=0;64>c;c++){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(c);this.b64[c]=f;this.f64[f]=c}}};
gx.webSocket=function(){var c=!1,f=!1,e=0,b=function(a){var b=new WebSocket(a);b.onopen=function(){c=!0;e=0};b.onmessage=function(a){gx.dbg.logDebug("gx.webSocket - New Message: "+a.data);gx.fx.obs.notify("gx.ws.onMessage",[a.data])};b.onclose=function(){gx.dbg.logDebug("gx.webSocket - OnClose");f=c=!1;gx.webSocket.reconnect&&3>e&&(e++,gx.lang.doCallTimeout(gx.webSocket._init,gx.webSocket,[],1E4))};window.onbeforeunload=function(){c&&b.close()}};return{reconnect:!0,_init:function(){if(!f&&this.supported()){var a=
gx.fn.getHidden("GX_WEBSOCKET_PORT"),c=gx.fn.getHidden("GX_WEBSOCKET_ID"),e="https:"===location.protocol?"wss://":"ws://",a=a?location.hostname+":"+a+"/":location.host+"/",n=gx.gen.isDotNet()?"/gxwebsocket.svc?":"/gxwebsocket?";try{b(e+a+gx.basePath+n+c),f=!0}catch(h){gx.dbg.logEx(h,"gxfrmutl.js","Could not initialize WebSocket")}}},supported:function(){return"WebSocket"in window}}}();
gx.geolocation=function(c){return{attachedCtrls:null,_init:function(){attachedCtrls=[]},getMyPosition:function(f){f.attachedCtrl=c("#"+f.id.replace(/_geoLocMe$/,""))[0];attachedCtrls.push(f);navigator.geolocation?navigator.geolocation.getCurrentPosition(this.positionHandler,this.handle_errors):(msg="Your browser does not support HTML5 Geolocalization",gx.pO.clearMessages(),gx.pO.addMessage(msg),gx.pO.refreshOutputs([]))},positionHandler:function(c){var e=attachedCtrls.shift(),b=gx.fn.validStruct(gx.O.getValidStructId(e.attachedCtrl.id)),
c=c.coords.latitude+","+c.coords.longitude;gx.evt.setEventRow(gx.pO,e.attachedCtrl);b.v2v&&(b.v2v(c),b.v2c());b.gxgrid&&b.gxgrid.updateControlValue(b,!0)},handle_errors:function(c){attachedCtrls.shift();switch(c.code){case c.PERMISSION_DENIED:c="user did not share geolocation data";break;case c.POSITION_UNAVAILABLE:c="could not detect current position";break;case c.TIMEOUT:c="retrieving position timed out";break;default:c="unknown error"}gx.pO.clearMessages();gx.pO.addMessage(c);gx.pO.refreshOutputs([])}}}(gx.$);
gx.sec.rijndael={keySizeInBits:128,blockSizeInBits:128,roundsArray:[,,,,[,,,,10,,12,,14],,[,,,,12,,12,,14],,[,,,,14,,14,,14]],shiftOffsets:[,,,,[,1,2,3],,[,1,2,3],,[,1,3,4]],Rcon:[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],SBox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,
226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,
221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],SBoxInverse:[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,
108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,
201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],cyclicShiftLeft:function(c,f){var e=c.slice(0,f);return c=c.slice(f).concat(e)},xtime:function(c){c<<=1;return c&256?c^283:c},mult_GF256:function(c,f){var e,b=0;for(e=1;256>e;e*=2,f=this.xtime(f))c&e&&(b^=f);return b},byteSub:function(c,f){var e;e="encrypt"==f?this.SBox:this.SBoxInverse;for(var b=0;4>b;b++)for(var a=0;a<this.Nb;a++)c[b][a]=e[c[b][a]]},shiftRow:function(c,f){for(var e=
1;4>e;e++)c[e]="encrypt"==f?this.cyclicShiftLeft(c[e],this.shiftOffsets[this.Nb][e]):this.cyclicShiftLeft(c[e],this.Nb-this.shiftOffsets[this.Nb][e])},mixColumn:function(c,f){for(var e=[],b=0;b<this.Nb;b++){for(var a=0;4>a;a++)e[a]="encrypt"==f?this.mult_GF256(c[a][b],2)^this.mult_GF256(c[(a+1)%4][b],3)^c[(a+2)%4][b]^c[(a+3)%4][b]:this.mult_GF256(c[a][b],14)^this.mult_GF256(c[(a+1)%4][b],11)^this.mult_GF256(c[(a+2)%4][b],13)^this.mult_GF256(c[(a+3)%4][b],9);for(a=0;4>a;a++)c[a][b]=e[a]}},addRoundKey:function(c,
f){for(var e=0;e<this.Nb;e++)c[0][e]^=f[e]&255,c[1][e]^=f[e]>>8&255,c[2][e]^=f[e]>>16&255,c[3][e]^=f[e]>>24&255},keyExpansion:function(c){var f=[];this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb];for(var e=0;e<this.Nk;e++)f[e]=c[4*e]|c[4*e+1]<<8|c[4*e+2]<<16|c[4*e+3]<<24;for(e=this.Nk;e<this.Nb*(this.Nr+1);e++)c=f[e-1],0==e%this.Nk?c=(this.SBox[c>>8&255]|this.SBox[c>>16&255]<<8|this.SBox[c>>24&255]<<16|this.SBox[c&255]<<24)^this.Rcon[Math.floor(e/
this.Nk)-1]:6<this.Nk&&4==e%this.Nk&&(c=this.SBox[c>>24&255]<<24|this.SBox[c>>16&255]<<16|this.SBox[c>>8&255]<<8|this.SBox[c&255]),f[e]=f[e-this.Nk]^c;return f},Round:function(c,f){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.mixColumn(c,"encrypt");this.addRoundKey(c,f)},InverseRound:function(c,f){this.addRoundKey(c,f);this.mixColumn(c,"decrypt");this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},FinalRound:function(c,f){this.byteSub(c,"encrypt");this.shiftRow(c,"encrypt");this.addRoundKey(c,
f)},InverseFinalRound:function(c,f){this.addRoundKey(c,f);this.shiftRow(c,"decrypt");this.byteSub(c,"decrypt")},encrypt:function(c,f){var e;if(c&&8*c.length==this.blockSizeInBits&&f){c=this.packBytes(c);this.addRoundKey(c,f);for(e=1;e<this.Nr;e++)this.Round(c,f.slice(this.Nb*e,this.Nb*(e+1)));this.FinalRound(c,f.slice(this.Nb*this.Nr));return this.unpackBytes(c)}},decrypt:function(c,f){var e;if(c&&8*c.length==this.blockSizeInBits&&f){c=this.packBytes(c);this.InverseFinalRound(c,f.slice(this.Nb*this.Nr));
for(e=this.Nr-1;0<e;e--)this.InverseRound(c,f.slice(this.Nb*e,this.Nb*(e+1)));this.addRoundKey(c,f);return this.unpackBytes(c)}},byteArrayToString:function(c){for(var f="",e=c.length,b=0;b<e;b++)0!=c[b]&&(f+=String.fromCharCode(c[b]));return f},stringToByteArray:function(c){for(var f=[],e=c.length,b=0;b<e;b++)f[f.length]=c.charCodeAt();return f},byteArrayToHex:function(c){var f="";if(c){for(var e=c.length,b=0;b<e;b++)f+=(16>c[b]?"0":"")+c[b].toString(16);return f}},hexToByteArray:function(c){var f=
[];if(!(c.length%2)){if(0==c.indexOf("0x")||0==c.indexOf("0X"))c=c.substring(2);for(var e=c.length,b=0;b<e;b+=2)f[Math.floor(b/2)]=parseInt(c.slice(b,b+2),16);return f}},packBytes:function(c){var f=[];if(c&&!(c.length%4)){f[0]=[];f[1]=[];f[2]=[];f[3]=[];for(var e=c.length,b=0;b<e;b+=4)f[0][b/4]=c[b],f[1][b/4]=c[b+1],f[2][b/4]=c[b+2],f[3][b/4]=c[b+3];return f}},unpackBytes:function(c){for(var f=[],e=c[0].length,b=0;b<e;b++)f[f.length]=c[0][b],f[f.length]=c[1][b],f[f.length]=c[2][b],f[f.length]=c[3][b];
return f},formatPlaintext:function(c){var f=this.blockSizeInBits/8,e;if("string"==typeof c||c.indexOf){var c=c.split(""),b=c.length;for(e=0;e<b;e++)c[e]=c[e].charCodeAt(0)&255}for(e=f-c.length%f;0<e&&e<f;e--)c[c.length]=0;return c},getRandomBytes:function(c){var f,e=[];for(f=0;f<c;f++)e[f]=Math.round(255*Math.random());return e},rijndaelEncrypt:function(c,f,e){var b,a,d=this.blockSizeInBits/8,g;if(c&&f&&8*f.length==this.keySizeInBits){"CBC"==e?g=this.getRandomBytes(d):(e="ECB",g=[]);for(var c=this.formatPlaintext(c),
f=this.keyExpansion(f),n=0;n<c.length/d;n++){a=c.slice(n*d,(n+1)*d);if("CBC"==e)for(b=0;b<d;b++)a[b]^=g[n*d+b];g=g.concat(this.encrypt(a,f))}return g}},rijndaelDecrypt:function(c,f,e){var b=this.blockSizeInBits/8,a=[],d,g;if(c&&(f&&"string"!=typeof c)&&8*f.length==this.keySizeInBits){e||(e="ECB");f=this.keyExpansion(f);for(g=c.length/b-1;0<g;g--)if(d=this.decrypt(c.slice(g*b,(g+1)*b),f),"CBC"==e)for(var n=0;n<b;n++)a[(g-1)*b+n]=d[n]^c[(g-1)*b+n];else a=d.concat(a);"ECB"==e&&(a=this.decrypt(c.slice(0,
b),f).concat(a));return a}},_init:function(){this.Nk=this.keySizeInBits/32;this.Nb=this.blockSizeInBits/32;this.Nr=this.roundsArray[this.Nk][this.Nb]}};
gx.ui={grid:function(){this.gridContainer=null;this.firstTime=!0;this.loadingCollection=this.autoRefreshing=!1;this.properties=[];this.setContainerDelayed=function(c){this.gridContainer=c;this.DesignContainerName=this.ContainerName=gx.dom.id(c);this.ParentObject.setUserControl(this)};this.getContainerControl=function(){return this.gridContainer};this.me=function(){return this.gridObject()+".grid"};this.render=function(c,f,e,b){this.clearFunctions();this.refreshDynProperties();this.properties=[];for(var a=
0;a<this.rows.length;a++){this.properties[a]=[];for(var d=this.rows[a],g=0;g<this.columns.length;g++){var n=this.columns[g],h=d.gxProps[n.index],j=n.gxControl;j.grid=this.ownerGrid;j.row=d;j.gridId=this.gxId;j.gridRow=d.gxId;e?j.value=h[0]:j.setProperties.apply(j,h);this.setRenderProperties(d.gxRenderProps[g],j);!j.enabled&&j.type<=gx.html.controls.types.checkBox&&(""!==j.cssClass&&0!==j.cssClass.indexOf("Readonly"))&&(j.cssClass="Readonly"+j.cssClass);this.properties[a][g]=gx.lang.clone(j);this.addC2V(n,
this.properties[a][g])}}this.firstTime=c;this.autoRefreshing=f?!0:!1;this.loadingCollection=e?!0:!1;this.show&&(this.setC2ShowFunction(function(a){a.show();b()}),this.autoRefreshing&&(this.show(),b()));this.autoRefreshing=!1};this.addC2V=function(c,f){this.addC2VFunction(function(e){if(""!==c.gxAttName){var b=e.ParentObject.getValidStruct(c.gxId);b&&(e.ParentObject[b.gxvar]=f.value);gx.fn.setHidden(f.id,f.value)}})};this.setRenderProperties=function(c,f){if(c)for(var e in c)f[e]=c[e]};this.selectRow=
function(c){if(c=this.rows[c])this.instanciateSelectionVars(c.gxId),this.instanciateSelectedRow(c)};this.getEventRow=function(){return!gx.lang.emptyObject(this.GridRow)?this.GridRow:"0001"};this.executeEvent=function(c,f){if(c<this.columns.length&&f<this.rows.length){var e=this.properties[f][c],b=gx.html.controls.eventJSCode(e.jsScrCode,e.eventName,e.jsDynCode,e.grid,e.row);if(""!==b)gx.lang.emptyObject(e.usrOnclick)||(b="if("+e.usrOnclick+") { "+b+" }"),e=new Function(b),"function"==typeof e&&e();
else if(e.clickEvent){var b=this.parentGxObject,a=e.row.gxId;this.ownerGrid.instanciateRow(a);b[e.clickEvent].call(b,a)}}};this.addEventHandler=function(c,f){this[c]=function(){this.eventHandler(this.GridId,gx.fn.currentGridRow(this.GridId),f)}.closure(this)}}};gx._init();window.$?gx.dbg.write("Warning: Using custom $ version."):(window.$=gx.$,gx.dbg.write("Using jquery from GX distr."));
!window.$.fn||!window.$.fn.jquery?gx.dbg.write("Warning: $ is not a jQuery object instance"):gx.dbg.write("global $ is jquery"+window.$.fn.jquery);
window.Modernizr=function(c,f,e){function b(a,b){for(var c in a){var d=a[c];if(!~(""+d).indexOf("-")&&n[d]!==e)return b=="pfx"?d:true}return false}function a(a,c,d){var f=a.charAt(0).toUpperCase()+a.slice(1),g=(a+" "+h.join(f+" ")+f).split(" ");if(typeof c==="string"||typeof c==="undefined")return b(g,c);g=(a+" "+j.join(f+" ")+f).split(" ");a:{var a=g,k;for(k in a){f=c[a[k]];if(f!==e){if(d===false){c=a[k];break a}if(typeof f==="function"){c=f.bind(d||c);break a}c=f;break a}}c=false}return c}var d=
{},g=f.documentElement,f=f.createElement("modernizr"),n=f.style,h=["Webkit","Moz","O","ms"],j=["webkit","moz","o","ms"],f={},k=[],m=k.slice,l,q={}.hasOwnProperty,o;o=typeof q!=="undefined"&&typeof q.call!=="undefined"?function(a,b){return q.call(a,b)}:function(a,b){return b in a&&typeof a.constructor.prototype[b]==="undefined"};if(!Function.prototype.bind)Function.prototype.bind=function(a){var b=this;if(typeof b!="function")throw new TypeError;var c=m.call(arguments,1),d=function(){if(this instanceof
d){var e=function(){};e.prototype=b.prototype;var e=new e,f=b.apply(e,c.concat(m.call(arguments)));return Object(f)===f?f:e}return b.apply(a,c.concat(m.call(arguments)))};return d};f.history=function(){return!(!c.history||!history.pushState)};f.csstransitions=function(){return a("transition")};for(var p in f)if(o(f,p)){l=p.toLowerCase();d[l]=f[p]();k.push((d[l]?"":"no-")+l)}d.addTest=function(a,b){if(typeof a=="object")for(var c in a)o(a,c)&&d.addTest(c,a[c]);else{a=a.toLowerCase();if(d[a]!==e)return d;
b=typeof b=="function"?b():b;if(enableClasses)g.className=g.className+(" "+(b?"":"no-")+a);d[a]=b}return d};n.cssText="";f=null;d._version="2.6.1";d._domPrefixes=j;d._cssomPrefixes=h;d.testProp=function(a){return b([a])};d.testAllProps=a;return d}(this,this.document);
(function(c,f){if(typeof exports==="object"&&exports)f(exports);else{var e={};f(e);typeof define==="function"&&define.amd?define(e):c.Mustache=e}})(this,function(c){function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function e(a){this.tail=this.string=a;this.pos=0}function b(a,b){this.view=a||{};this.parent=b;this._cache={}}function a(){this.clearCache()}function d(a,b,e,f){for(var g="",j,k,h=0,l=a.length;h<l;++h){j=a[h];k=j[1];switch(j[0]){case "#":k=e.lookup(k);if(typeof k==="object")if(p(k))for(var m=
0,n=k.length;m<n;++m)g=g+d(j[4],b,e.push(k[m]),f);else k&&(g=g+d(j[4],b,e.push(k),f));else if(typeof k==="function"){j=f==null?null:f.slice(j[3],j[5]);k=k.call(e.view,j,function(a){return b.render(a,e)});k!=null&&(g=g+k)}else k&&(g=g+d(j[4],b,e,f));break;case "^":k=e.lookup(k);if(!k||p(k)&&k.length===0)g=g+d(j[4],b,e,f);break;case ">":k=b.getPartial(k);typeof k==="function"&&(g=g+k(e));break;case "&":k=e.lookup(k);k!=null&&(g=g+k);break;case "name":k=e.lookup(k);k!=null&&(g=g+c.escape(k));break;case "text":g=
g+k}}return g}function g(a){return[RegExp(f(a[0])+"\\s*"),RegExp("\\s*"+f(a[1]))]}var n=/\s*/,h=/\s+/,j=/\S/,k=/\s*=/,m=/\s*\}/,l=/#|\^|\/|>|\{|&|=|!/,q=RegExp.prototype.test,o=Object.prototype.toString,p=Array.isArray||function(a){return o.call(a)==="[object Array]"},r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};e.prototype.eos=function(){return this.tail===""};e.prototype.scan=function(a){if((a=this.tail.match(a))&&a.index===0){this.tail=this.tail.substring(a[0].length);
this.pos=this.pos+a[0].length;return a[0]}return""};e.prototype.scanUntil=function(a){var b=this.tail.search(a);switch(b){case -1:a=this.tail;this.pos=this.pos+this.tail.length;this.tail="";break;case 0:a="";break;default:a=this.tail.substring(0,b);this.tail=this.tail.substring(b);this.pos=this.pos+b}return a};b.make=function(a){return a instanceof b?a:new b(a)};b.prototype.push=function(a){return new b(a,this)};b.prototype.lookup=function(a){var b=this._cache[a];if(!b){if(a==".")b=this.view;else for(var c=
this;c;){if(a.indexOf(".")>0)for(var b=c.view,d=a.split("."),e=0;b&&e<d.length;)b=b[d[e++]];else b=c.view[a];if(b!=null)break;c=c.parent}this._cache[a]=b}typeof b==="function"&&(b=b.call(this.view));return b};a.prototype.clearCache=function(){this._cache={};this._partialCache={}};a.prototype.compile=function(a,b){var d=this._cache[a];if(!d){d=c.parse(a,b);d=this._cache[a]=this.compileTokens(d,a)}return d};a.prototype.compilePartial=function(a,b,c){b=this.compile(b,c);return this._partialCache[a]=
b};a.prototype.getPartial=function(a){!(a in this._partialCache)&&this._loadPartial&&this.compilePartial(a,this._loadPartial(a));return this._partialCache[a]};a.prototype.compileTokens=function(a,c){var e=this;return function(f,g){if(g)if(typeof g==="function")e._loadPartial=g;else for(var j in g)e.compilePartial(j,g[j]);return d(a,e,b.make(f),c)}};a.prototype.render=function(a,b,c){return this.compile(a)(b,c)};c.name="mustache.js";c.version="0.7.2";c.tags=["{{","}}"];c.Scanner=e;c.Context=b;c.Writer=
a;c.parse=function(a,b){a=a||"";b=b||c.tags;typeof b==="string"&&(b=b.split(h));if(b.length!==2)throw Error("Invalid tags: "+b.join(", "));for(var d=g(b),o=new e(a),p=[],r=[],s=[],D=false,F=false,E,B,G,H;!o.eos();){E=o.pos;if(G=o.scanUntil(d[0])){H=0;for(var L=G.length;H<L;++H){B=G.charAt(H);q.call(j,B)?F=true:s.push(r.length);r.push(["text",B,E,E+1]);E=E+1;if(B=="\n"){if(D&&!F)for(;s.length;)delete r[s.pop()];else s=[];F=D=false}}}if(!o.scan(d[0]))break;D=true;B=o.scan(l)||"name";o.scan(n);if(B===
"="){G=o.scanUntil(k);o.scan(k);o.scanUntil(d[1])}else if(B==="{"){G=o.scanUntil(RegExp("\\s*"+f("}"+b[1])));o.scan(m);o.scanUntil(d[1]);B="&"}else G=o.scanUntil(d[1]);if(!o.scan(d[1]))throw Error("Unclosed tag at "+o.pos);H=[B,G,E,o.pos];r.push(H);if(B==="#"||B==="^")p.push(H);else if(B==="/"){if(p.length===0)throw Error('Unopened section "'+G+'" at '+E);B=p.pop();if(B[1]!==G)throw Error('Unclosed section "'+B[1]+'" at '+E);}else if(B==="name"||B==="{"||B==="&")F=true;else if(B==="="){b=G.split(h);
if(b.length!==2)throw Error("Invalid tags at "+E+": "+b.join(", "));d=g(b)}}if(B=p.pop())throw Error('Unclosed section "'+B[1]+'" at '+o.pos);for(var d=r,o=[],z,r=0,s=d.length;r<s;++r)if(p=d[r])if(p[0]==="text"&&z&&z[0]==="text"){z[1]=z[1]+p[1];z[3]=p[3]}else{z=p;o.push(p)}z=o;o=d=[];p=[];s=0;for(D=z.length;s<D;++s){r=z[s];switch(r[0]){case "#":case "^":p.push(r);o.push(r);o=r[4]=[];break;case "/":p.pop()[5]=r[2];o=p.length>0?p[p.length-1][4]:d;break;default:o.push(r)}}return d};c.escape=function(a){return(""+
a).replace(/[&<>"'\/]/g,function(a){return r[a]})};var s=new a;c.clearCache=function(){return s.clearCache()};c.compile=function(a,b){return s.compile(a,b)};c.compilePartial=function(a,b,c){return s.compilePartial(a,b,c)};c.compileTokens=function(a,b){return s.compileTokens(a,b)};c.render=function(a,b,c){return s.render(a,b,c)};c.to_html=function(a,b,d,e){a=c.render(a,b,d);if(typeof e==="function")e(a);else return a}});
gx.spa=function(c){var f=/<head[^>]*>([\s\S]*?)<\/head>/i,e=/(<body[^>]*>[\s\S]*?<\/body>)/i,b=/<title[^>]*>([\s\S]*?)<\/title>/i,a=false,d=false,g=true,n,h;"state"in window.history&&(g=false);return{timeout:5E3,isSameApp:function(a,b){var c=a.port===b.port,c=(c=c||a.port===""&&a.protocol==="http:"&&b.port==="80")||a.port===""&&a.protocol==="https:"&&b.port==="443";return a.protocol===b.protocol&&a.hostname===b.hostname&&c},handleClick:function(a){var b=this.getTarget(a);if(b&&b.tagName.toUpperCase()===
"A"&&!(b.getAttribute("href")===null||b.getAttribute("href")===void 0))if(!b.target||!(b.target=="_blank"||b.target=="_parent"&&window.parent!=window||b.target=="_top"&&window.top!=window||b.target.substr(0,1)!="_"&&window.name!=b.target))if(!(a.which>1||a.metaKey||a.ctrlKey)){var c=this.parseUrl(b.href);if(this.isSameApp(location,c)){var d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;if(location.pathname.substring(0,location.pathname.lastIndexOf("/"))===d.substring(0,d.lastIndexOf("/"))&&
c.href.replace(/#.*/,"")!==location.href.replace(/#.*/,"")&&b.getAttribute("href")!==""&&b.href.indexOf("javascript:")!==0){this.navigate({url:b.href,push:true,scrollTo:true,direction:"forward"});a.preventDefault()}}}},redirect:function(a,b){var b=b===void 0||b,c=this.parseUrl(a),d=c.pathname.charAt(0)=="/"?c.pathname:"/"+c.pathname;this.isSameApp(location,c)?location.pathname.substring(0,location.pathname.lastIndexOf("/"))!==d.substring(0,d.lastIndexOf("/"))?window.location=a:this.navigate({url:a,
push:b,scrollTo:true,direction:"forward"}):window.location=a},setLocation:function(a){gx.util.browser.isFirefox()?setTimeout(function(){window.location.href=a},100):window.location=a},canNavigate:function(){return!a&&!d},navigate:function(b){var c,d,e=b.url;if(this.canNavigate()){a=true;this.notify("onbeforenavigate",[e]);if((d=this.request)&&d.readyState<4){d.onreadystatechange=gx.emptyFn;gx.dbg.logMsg("Request cancelled as data ir already being retrieved: "+d.readyState);d.abort()}this.request=
d=gx.http.doCall({method:"GET",url:e,handler:function(f,g,h){var f=h.getResponseHeader("X-SPA-REDIRECT-URL"),n=h.getResponseHeader("X-GXOBJECT");c&&clearTimeout(c);if(h.status==530)this.setLocation(e);else if(f){a=false;setTimeout(gx.spa.redirect.closure(gx.spa,[f]),100)}else{if(b.push&&d.readyState>0&&n){this.updateState();this.state=this.createState(b);window.history.pushState(null,"",e)}this.processResponse.call(this,g,h,b)}},beforeSend:function(a){this.notify("onbeforesend",[this.createEvent(a,
e),"X-SPA-REQUEST","X-SPA-MP"]);c=setTimeout(this.timeoutHandler.closure(this,[a,e]),this.timeout);a.setRequestHeader("X-SPA-REQUEST","1")},error:function(a){a=this.createEvent(a,e);a.cancel=true;this.notify("onerror",[a]);a.cancel&&this.setLocation(e)},ajaxHeader:false,avoidCache:false,handleAllStatusCodes:true,obj:this});this.notify("onnavigatestart",[e])}else this.setLocation(e)},processResponse:function(a,b,c){try{var e=c.url,f=this.parseUrl(e).hash,g=c.direction,h=b.getResponseHeader("X-GXOBJECT"),
n=b.getResponseHeader("X-SPA-RETURN"),s=this.createEvent(b,e),u=gx.pO.MasterPage,t=gx.pO.MasterPage?gx.pO.MasterPage.ServerClass:"",x=b.getResponseHeader("X-SPA-MP")||"",A=!(t===""||t.toLowerCase()!=x.toLowerCase()),y=this.getContentPlaceholder();if(n!=null){gx.evt.clinav=true;gx.fn.closeWindow(n)}else if(h){this.notify("onbeforeprocessresponse",[s,a,h,t,x,A]);var w=this.extractContents(b,!A),v=A?y.firstChild:document.body,D=w.body;if(w.body){this.state=this.createState(c);c.push&&window.history.replaceState(this.state,
"",e);if(w.title)document.title=w.title;this.notify("onbeforecontentreplace",[b,e,w]);gx.cache.removeAllRemoteFiles();gx.dom.replaceWithFx(v,D,{domRemove:false,domAdd:A,enteringClass:g=="forward"?"entering":"leaving",leavingClass:g=="forward"?"leaving":"entering",enterDurationClass:g=="forward"?"enter-fx-duration":"leave-fx-duration",leaveDurationClass:g=="forward"?"leave-fx-duration":"enter-fx-duration",transitionTimeout:800,transitionEndCallback:function(){D=this.replaceContentCallback(b,e,f,a,
y,w,v,D,c,h,u,t,x,A);A||gx.html.processCode(w.head.innerHTML+w.body.innerHTML,false,this.processCodeCallback.closure(this,[b,e,f,a,y,w,v,D,c,h,u,t,x,A]),null,null,false);d=false;this.recoverScrollPosition(c);return D}.closure(this),beforeTransitionStart:function(g){d=true;if(A){gx.html.processCode(a,false,function(){g&&g();this.processCodeCallback(b,e,f,a,y,w,v,D,c,h,u,t,x,A)}.closure(this),null,null,false);return true}}.closure(this)})}else this.setLocation(e)}else this.setLocation(e)}catch(F){gx.dbg.logEx(F,
"gxspa.js","processResponse");this.setLocation(e)}},replaceContentCallback:function(a,b,d,e,f,g,h,n,s,u,t,x,A,y){if(y)h.parentNode&&h.parentNode.removeChild(h);else{if(gx.util.browser.isWebkit()){document.body.parentNode.removeChild(document.body);var w=document.createElement("body"),a=c(n).prop("attributes");c.each(a,function(){c(w).attr(this.name,this.value)});document.documentElement.appendChild(w);w.innerHTML=n.innerHTML;n=w}else{document.body=n;n=document.body}document.head=g.head}return n},
processCodeCallback:function(b,c,d,e,f,g,h,n,s,u,t,x,A,y){b=this.createEvent(b,c);try{this.notify("oncontentreplace",[b,e,g,u,t,x,A,y])}catch(w){gx.dbg.logEx(w,"gxspa.js","processCodeCallback");this.setLocation(c)}e=true;if(s.scrollTo){window.scrollTo(0,0);e=false}s.push&&window._gaq&&_gaq.push(["_trackPageview"]);if(d!==""){g=this.parseUrl(c);g.hash=d;window.history.replaceState(this.state,"",g.href);if(d=gx.dom.el(g.hash)){d.scrollIntoView(true);e=false}}this.notify("onnavigate",[c]);a=false;e&&
this.recoverScrollPosition(s)},timeoutHandler:function(a,b){var c=this.createEvent(a,b);c.cancel=true;this.notify("ontimeout",[c]);if(c.cancel){a.abort();gx.dbg.logMsg("Request cancelled - timeout expired: "+a.readyState);this.setLocation(b)}},getContentPlaceholder:function(){return gx.dom.byClass("gx-content-placeholder")[0]},extractContents:function(a,d){var g=document.createElement("div"),h={},n,o,p;if(d){g=document.createElement("iframe");g.src="about:blank";g.style.display="none";document.body.appendChild(g);
var r=a.responseText.match(f);r.length>1&&(n=r[1]);r=a.responseText.match(e);r.length>0&&(o=r[0]);r=a.responseText.match(b);if(r.length>1)h.title=r[1];g.contentDocument.body.outerHTML=o;p=g.contentDocument.head;p.innerHTML=n;c("head script").each(function(a,b){c(p).find("script").each(function(a,c){b.src==c.src&&p.removeChild(c)})});h.body=g.contentDocument.body;h.head=p}else{gx.html.setInnerHtml(g,a.responseText,false,false,false);n=gx.dom.byClass("gx-content-placeholder","div",g);if(n.length===
0)return h;h.body=n[0].firstChild;n=gx.dom.byTag("title",g);if(n.length>0)h.title=n[0].innerText||n[0].textContent}return h},handlePopState:function(a){var a=a.state,b=this.getContentPlaceholder();if(a&&a.source=="gx-spa"&&!(g&&initialURL==a.url)){this.navigate({id:a.id,url:a.url,push:false,scrollPosition:a.scrollPosition,direction:this.state.id<a.id?"forward":"back"});b&&void 0}},parseUrl:function(a){var b=document.createElement("a");b.href=a;return b},createEvent:function(a,b){return{req:a,url:b,
cancel:false}},recoverScrollPosition:function(a){var b=a.scrollPosition;this.canNavigate()&&(!a.scrollTo&&b)&&window.scrollTo(b.x,b.y)},updateState:function(){var a=this.state;a.scrollPosition={x:window.scrollX,y:window.scrollY};window.history.replaceState(a,"",a.url)},createState:function(a){a=a||{};return{id:a.id||(new Date).getTime(),source:"gx-spa",url:a.url}},getTarget:function(a){return a.target&&a.target.tagName=="A"?a.target:gx.dom.findParentByTagName(a.target,"A")},applyConfig:function(a){if(a&&
a.listeners)for(var b in a.listeners){var c=a.listeners[b];typeof c=="function"&&this.addObserver(b,a.listeners.scope||this,c)}},setBodyClass:function(){var a="Form",b=document.body;b.className&&(a=b.className.split(" ")[0]);gx.dom.hasClass(b,a+"-fx")||gx.dom.addClass(b,a+"-fx")},isSupported:function(){return gx.pO.fullAjax&&Modernizr.history&&!(gx.util.browser.isChrome()&&window.parent!=window)},start:function(a){if(this.isSupported()&&!this.started){this.applyConfig(a);n=this.handleClick.closure(this);
h=this.handlePopState.closure(this);document.addEventListener("click",n,false);window.addEventListener("popstate",h,false);this.state=this.createState({url:location.href});window.history.replaceState(this.state,document.title);this.setBodyClass();this.started=true}},stop:function(){if(this.started){document.removeEventListener("click",n,false);window.removeEventListener("popstate",h,false);this.started=false}}}}(gx.$);gx.lang.apply(gx.spa,new gx.util.Observable);
